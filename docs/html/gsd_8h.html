<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bodies in Potential Flow: src/data_io/gsd.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/ams.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js", "TeX/bm.js", "TeX/bbm.js", "TeX/dsfont.js", "TeX/mathrsfs.js", "TeX/upgreek.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bodies in Potential Flow
   &#160;<span id="projectnumber">2.0-alpha</span>
   </div>
   <div id="projectbrief">Study dynamics of inertial active matter in potential flow (irrotational, incompressible).</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('gsd_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Prototypes</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle">
<div class="title">gsd.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Declare GSD data types and C API.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Prototypes</h2></td></tr>
<tr class="memitem:a493ef951956c9f98adff89a80ddb3fa6"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version</a> (unsigned int major, unsigned int minor)</td></tr>
<tr class="separator:a493ef951956c9f98adff89a80ddb3fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58654880dd98b2bc32e429810b7d2623"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#a58654880dd98b2bc32e429810b7d2623">gsd_create</a> (const char *fname, const char *application, const char *schema, uint32_t schema_version)</td></tr>
<tr class="separator:a58654880dd98b2bc32e429810b7d2623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a157d14770365926fde71a7787871bc63"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#a157d14770365926fde71a7787871bc63">gsd_create_and_open</a> (struct gsd_handle *handle, const char *fname, const char *application, const char *schema, uint32_t schema_version, enum <a class="el" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98">gsd_open_flag</a> flags, int exclusive_create)</td></tr>
<tr class="separator:a157d14770365926fde71a7787871bc63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0add799755285c1108a7b97b2ed7e00"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open</a> (struct gsd_handle *handle, const char *fname, enum <a class="el" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98">gsd_open_flag</a> flags)</td></tr>
<tr class="separator:ae0add799755285c1108a7b97b2ed7e00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02ac7984034069d508b1c7ccbe702bac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#a02ac7984034069d508b1c7ccbe702bac">gsd_truncate</a> (struct gsd_handle *handle)</td></tr>
<tr class="separator:a02ac7984034069d508b1c7ccbe702bac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08b4f76e3e19eda194def8c0c4b2b7a3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#a08b4f76e3e19eda194def8c0c4b2b7a3">gsd_close</a> (struct gsd_handle *handle)</td></tr>
<tr class="separator:a08b4f76e3e19eda194def8c0c4b2b7a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa03810337c5eebcbe716d8633eaefc5e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#aa03810337c5eebcbe716d8633eaefc5e">gsd_end_frame</a> (struct gsd_handle *handle)</td></tr>
<tr class="separator:aa03810337c5eebcbe716d8633eaefc5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae22447904b925f284bf987fae448488a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#ae22447904b925f284bf987fae448488a">gsd_write_chunk</a> (struct gsd_handle *handle, const char *name, enum <a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a> type, uint64_t N, uint32_t M, uint8_t flags, const void *data)</td></tr>
<tr class="separator:ae22447904b925f284bf987fae448488a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c76bbf6c28b953cff198a44852c732f"><td class="memItemLeft" align="right" valign="top">const struct gsd_index_entry *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#a3c76bbf6c28b953cff198a44852c732f">gsd_find_chunk</a> (struct gsd_handle *handle, uint64_t frame, const char *name)</td></tr>
<tr class="separator:a3c76bbf6c28b953cff198a44852c732f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2db2e3e8a72948bf413e7f09469ec8a6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#a2db2e3e8a72948bf413e7f09469ec8a6">gsd_read_chunk</a> (struct gsd_handle *handle, void *data, const struct gsd_index_entry *chunk)</td></tr>
<tr class="separator:a2db2e3e8a72948bf413e7f09469ec8a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7479046d4d6e15c33cb24034ddd87562"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#a7479046d4d6e15c33cb24034ddd87562">gsd_get_nframes</a> (struct gsd_handle *handle)</td></tr>
<tr class="separator:a7479046d4d6e15c33cb24034ddd87562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1d1a8a5f73b37df0c706f41df3bdd69"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#ab1d1a8a5f73b37df0c706f41df3bdd69">gsd_sizeof_type</a> (enum <a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a> type)</td></tr>
<tr class="separator:ab1d1a8a5f73b37df0c706f41df3bdd69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a081b6fad5e27f4f8cfabd0030af7ebf5"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#a081b6fad5e27f4f8cfabd0030af7ebf5">gsd_find_matching_chunk_name</a> (struct gsd_handle *handle, const char *match, const char *prev)</td></tr>
<tr class="separator:a081b6fad5e27f4f8cfabd0030af7ebf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb92d5142812c19bf4ee33cbde439131"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#adb92d5142812c19bf4ee33cbde439131">gsd_upgrade</a> (struct gsd_handle *handle)</td></tr>
<tr class="separator:adb92d5142812c19bf4ee33cbde439131"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Declare GSD data types and C API. </p>

<p class="definition">Definition in file <a class="el" href="gsd_8h_source.html">gsd.h</a>.</p>
</div><div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for gsd.h:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h__incl.svg" width="266" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h__dep__incl.svg" width="924" height="544"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="gsd_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a5813a2a637516567a2b42dc745ec1118"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a> { <br />
&#160;&#160;<a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118addc1aa49964e9df18eca95586854564e">GSD_TYPE_UINT8</a> = 1, 
<a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a154cf53ac1f09d58516ee90c5e50ee9b">GSD_TYPE_UINT16</a>, 
<a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a49225daa33e0c1f26dda21d22a6ffb10">GSD_TYPE_UINT32</a>, 
<a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a43c1b41755ac12b8611b8478eab5f377">GSD_TYPE_UINT64</a>, 
<br />
&#160;&#160;<a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a5d13ce82d25b294b7300ea013396fb45">GSD_TYPE_INT8</a>, 
<a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a6e5c1ccf3040cebc0dbcf562fd4291cb">GSD_TYPE_INT16</a>, 
<a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a58aacbcfef4ae23382d8b857cfba815a">GSD_TYPE_INT32</a>, 
<a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a25b4572782ed785491f8b5b666692212">GSD_TYPE_INT64</a>, 
<br />
&#160;&#160;<a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a8f2fc103d16a251246a102c5477fc0be">GSD_TYPE_FLOAT</a>, 
<a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a2bf7336e70f8d15921952b6ec177d238">GSD_TYPE_DOUBLE</a>
<br />
 }</td></tr>
<tr class="memdesc:a5813a2a637516567a2b42dc745ec1118"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identifiers for the gsd data chunk element types.  <a href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">More...</a><br /></td></tr>
<tr class="separator:a5813a2a637516567a2b42dc745ec1118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23a9970f53fda4e8902697670300ec98"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98">gsd_open_flag</a> { <a class="el" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61">GSD_OPEN_READWRITE</a> = 1, 
<a class="el" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>, 
<a class="el" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a>
 }</td></tr>
<tr class="memdesc:a23a9970f53fda4e8902697670300ec98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag for GSD file open options.  <a href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98">More...</a><br /></td></tr>
<tr class="separator:a23a9970f53fda4e8902697670300ec98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03a578779769ed7e288df22c6a75f07b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07b">gsd_error</a> { <br />
&#160;&#160;<a class="el" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a> = 0, 
<a class="el" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a> = -1, 
<a class="el" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a> = -2, 
<a class="el" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba84a9d0b912c0f9dd4ef7eda53560253b">GSD_ERROR_NOT_A_GSD_FILE</a> = -3, 
<br />
&#160;&#160;<a class="el" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba72c4d63d4cbec5412ab1ab57716afe80">GSD_ERROR_INVALID_GSD_FILE_VERSION</a> = -4, 
<a class="el" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c">GSD_ERROR_FILE_CORRUPT</a> = -5, 
<a class="el" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba927545200d5ae6b308d536988ff37637">GSD_ERROR_MEMORY_ALLOCATION_FAILED</a> = -6, 
<a class="el" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4cca403d94a443c160073da8cf26a88b">GSD_ERROR_NAMELIST_FULL</a> = -7, 
<br />
&#160;&#160;<a class="el" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64">GSD_ERROR_FILE_MUST_BE_WRITABLE</a> = -8, 
<a class="el" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07bac5de89b0da97d4df5b52f18ee0977b7c">GSD_ERROR_FILE_MUST_BE_READABLE</a> = -9
<br />
 }</td></tr>
<tr class="memdesc:a03a578779769ed7e288df22c6a75f07b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error return values.  <a href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07b">More...</a><br /></td></tr>
<tr class="separator:a03a578779769ed7e288df22c6a75f07b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0411cd49bb5b71852cecd93bcbf0ca2d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="gsd_8h.html#a0411cd49bb5b71852cecd93bcbf0ca2dab1e8211d5344adb743238d82d369331d">GSD_NAME_SIZE</a> = 64
 }</td></tr>
<tr class="separator:a0411cd49bb5b71852cecd93bcbf0ca2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed82baf7f470b522273a3e37c24c600"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="gsd_8h.html#abed82baf7f470b522273a3e37c24c600a7199f456f54bd738f291363298706f4a">GSD_RESERVED_BYTES</a> = 80
 }</td></tr>
<tr class="separator:abed82baf7f470b522273a3e37c24c600"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a5813a2a637516567a2b42dc745ec1118"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5813a2a637516567a2b42dc745ec1118">&#9670;&nbsp;</a></span>gsd_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identifiers for the gsd data chunk element types. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118addc1aa49964e9df18eca95586854564e"></a>GSD_TYPE_UINT8&#160;</td><td class="fielddoc"><p>Unsigned 8-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a154cf53ac1f09d58516ee90c5e50ee9b"></a>GSD_TYPE_UINT16&#160;</td><td class="fielddoc"><p>Unsigned 16-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a49225daa33e0c1f26dda21d22a6ffb10"></a>GSD_TYPE_UINT32&#160;</td><td class="fielddoc"><p>Unsigned 32-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a43c1b41755ac12b8611b8478eab5f377"></a>GSD_TYPE_UINT64&#160;</td><td class="fielddoc"><p>Unsigned 53-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a5d13ce82d25b294b7300ea013396fb45"></a>GSD_TYPE_INT8&#160;</td><td class="fielddoc"><p>Signed 8-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a6e5c1ccf3040cebc0dbcf562fd4291cb"></a>GSD_TYPE_INT16&#160;</td><td class="fielddoc"><p>Signed 16-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a58aacbcfef4ae23382d8b857cfba815a"></a>GSD_TYPE_INT32&#160;</td><td class="fielddoc"><p>Signed 32-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a25b4572782ed785491f8b5b666692212"></a>GSD_TYPE_INT64&#160;</td><td class="fielddoc"><p>Signed 64-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a8f2fc103d16a251246a102c5477fc0be"></a>GSD_TYPE_FLOAT&#160;</td><td class="fielddoc"><p>32-bit floating point number. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a2bf7336e70f8d15921952b6ec177d238"></a>GSD_TYPE_DOUBLE&#160;</td><td class="fielddoc"><p>64-bit floating point number. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="gsd_8h_source.html#l00022">22</a> of file <a class="el" href="gsd_8h_source.html">gsd.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    {</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118addc1aa49964e9df18eca95586854564e">GSD_TYPE_UINT8</a> = 1,</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a154cf53ac1f09d58516ee90c5e50ee9b">GSD_TYPE_UINT16</a>,</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a49225daa33e0c1f26dda21d22a6ffb10">GSD_TYPE_UINT32</a>,</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a43c1b41755ac12b8611b8478eab5f377">GSD_TYPE_UINT64</a>,</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a5d13ce82d25b294b7300ea013396fb45">GSD_TYPE_INT8</a>,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a6e5c1ccf3040cebc0dbcf562fd4291cb">GSD_TYPE_INT16</a>,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a58aacbcfef4ae23382d8b857cfba815a">GSD_TYPE_INT32</a>,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a25b4572782ed785491f8b5b666692212">GSD_TYPE_INT64</a>,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a8f2fc103d16a251246a102c5477fc0be">GSD_TYPE_FLOAT</a>,</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a2bf7336e70f8d15921952b6ec177d238">GSD_TYPE_DOUBLE</a></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    };</div>
</div><!-- fragment -->
</div>
</div>
<a id="a23a9970f53fda4e8902697670300ec98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23a9970f53fda4e8902697670300ec98">&#9670;&nbsp;</a></span>gsd_open_flag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98">gsd_open_flag</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flag for GSD file open options. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61"></a>GSD_OPEN_READWRITE&#160;</td><td class="fielddoc"><p>Open for both reading and writing. </p>
</td></tr>
<tr><td class="fieldname"><a id="a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205"></a>GSD_OPEN_READONLY&#160;</td><td class="fielddoc"><p>Open only for reading. </p>
</td></tr>
<tr><td class="fieldname"><a id="a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40"></a>GSD_OPEN_APPEND&#160;</td><td class="fielddoc"><p>Open only for writing. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="gsd_8h_source.html#l00056">56</a> of file <a class="el" href="gsd_8h_source.html">gsd.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61">GSD_OPEN_READWRITE</a> = 1,</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>,</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    };</div>
</div><!-- fragment -->
</div>
</div>
<a id="a03a578779769ed7e288df22c6a75f07b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03a578779769ed7e288df22c6a75f07b">&#9670;&nbsp;</a></span>gsd_error</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07b">gsd_error</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Error return values. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3"></a>GSD_SUCCESS&#160;</td><td class="fielddoc"><p>Success. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96"></a>GSD_ERROR_IO&#160;</td><td class="fielddoc"><p>IO error. Check <code>errno</code> for details. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2"></a>GSD_ERROR_INVALID_ARGUMENT&#160;</td><td class="fielddoc"><p>Invalid argument passed to function. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07ba84a9d0b912c0f9dd4ef7eda53560253b"></a>GSD_ERROR_NOT_A_GSD_FILE&#160;</td><td class="fielddoc"><p>The file is not a GSD file. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07ba72c4d63d4cbec5412ab1ab57716afe80"></a>GSD_ERROR_INVALID_GSD_FILE_VERSION&#160;</td><td class="fielddoc"><p>The GSD file version cannot be read. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c"></a>GSD_ERROR_FILE_CORRUPT&#160;</td><td class="fielddoc"><p>The GSD file is corrupt. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07ba927545200d5ae6b308d536988ff37637"></a>GSD_ERROR_MEMORY_ALLOCATION_FAILED&#160;</td><td class="fielddoc"><p>GSD failed to allocated memory. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07ba4cca403d94a443c160073da8cf26a88b"></a>GSD_ERROR_NAMELIST_FULL&#160;</td><td class="fielddoc"><p>The GSD file cannot store any additional unique data chunk names. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64"></a>GSD_ERROR_FILE_MUST_BE_WRITABLE&#160;</td><td class="fielddoc"><p>This API call requires that the GSD file opened in with the mode GSD_OPEN_APPEND or GSD_OPEN_READWRITE. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07bac5de89b0da97d4df5b52f18ee0977b7c"></a>GSD_ERROR_FILE_MUST_BE_READABLE&#160;</td><td class="fielddoc"><p>This API call requires that the GSD file opened the mode GSD_OPEN_READ or GSD_OPEN_READWRITE. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="gsd_8h_source.html#l00069">69</a> of file <a class="el" href="gsd_8h_source.html">gsd.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a> = 0,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a> = -1,</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a> = -2,</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba84a9d0b912c0f9dd4ef7eda53560253b">GSD_ERROR_NOT_A_GSD_FILE</a> = -3,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba72c4d63d4cbec5412ab1ab57716afe80">GSD_ERROR_INVALID_GSD_FILE_VERSION</a> = -4,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c">GSD_ERROR_FILE_CORRUPT</a> = -5,</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba927545200d5ae6b308d536988ff37637">GSD_ERROR_MEMORY_ALLOCATION_FAILED</a> = -6,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4cca403d94a443c160073da8cf26a88b">GSD_ERROR_NAMELIST_FULL</a> = -7,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64">GSD_ERROR_FILE_MUST_BE_WRITABLE</a> = -8,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07bac5de89b0da97d4df5b52f18ee0977b7c">GSD_ERROR_FILE_MUST_BE_READABLE</a> = -9,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    };</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0411cd49bb5b71852cecd93bcbf0ca2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0411cd49bb5b71852cecd93bcbf0ca2d">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a0411cd49bb5b71852cecd93bcbf0ca2dab1e8211d5344adb743238d82d369331d"></a>GSD_NAME_SIZE&#160;</td><td class="fielddoc"><p>v1 file: Size of a GSD name in memory. v2 file: The name buffer size is a multiple of GSD_NAME_SIZE. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="gsd_8h_source.html#l00106">106</a> of file <a class="el" href="gsd_8h_source.html">gsd.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="gsd_8h.html#a0411cd49bb5b71852cecd93bcbf0ca2dab1e8211d5344adb743238d82d369331d">GSD_NAME_SIZE</a> = 64</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    };</div>
</div><!-- fragment -->
</div>
</div>
<a id="abed82baf7f470b522273a3e37c24c600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abed82baf7f470b522273a3e37c24c600">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="abed82baf7f470b522273a3e37c24c600a7199f456f54bd738f291363298706f4a"></a>GSD_RESERVED_BYTES&#160;</td><td class="fielddoc"><p>Reserved bytes in the header structure. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="gsd_8h_source.html#l00114">114</a> of file <a class="el" href="gsd_8h_source.html">gsd.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <a class="code" href="gsd_8h.html#abed82baf7f470b522273a3e37c24c600a7199f456f54bd738f291363298706f4a">GSD_RESERVED_BYTES</a> = 80</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    };</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a493ef951956c9f98adff89a80ddb3fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a493ef951956c9f98adff89a80ddb3fa6">&#9670;&nbsp;</a></span>gsd_make_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t gsd_make_version </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>major</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>minor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Specify a version</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">major</td><td>major version </td></tr>
    <tr><td class="paramname">minor</td><td>minor version</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a packed version number aaaa.bbbb suitable for storing in a gsd file version entry. </dd></dl>

<p class="definition">Definition at line <a class="el" href="gsd_8c_source.html#l01563">1563</a> of file <a class="el" href="gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="keywordflow">return</span> major &lt;&lt; (<span class="keyword">sizeof</span>(uint32_t) * 4) | minor;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="gsd_8c_source.html#l01264">gsd_append_name()</a>, <a class="el" href="gsd_8c_source.html#l02039">gsd_find_chunk()</a>, <a class="el" href="gsd_8c_source.html#l02228">gsd_find_matching_chunk_name()</a>, <a class="el" href="gsd_8c_source.html#l01322">gsd_initialize_file()</a>, <a class="el" href="gsd_8c_source.html#l01401">gsd_initialize_handle()</a>, and <a class="el" href="gsd_8c_source.html#l02300">gsd_upgrade()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_a493ef951956c9f98adff89a80ddb3fa6_icgraph.svg" width="1042" height="595"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a58654880dd98b2bc32e429810b7d2623"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58654880dd98b2bc32e429810b7d2623">&#9670;&nbsp;</a></span>gsd_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>application</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>schema</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>schema_version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fname</td><td>File name. </td></tr>
    <tr><td class="paramname">application</td><td>Generating application name (truncated to 63 chars). </td></tr>
    <tr><td class="paramname">schema</td><td>Schema name for data to be written in this GSD file (truncated to 63 chars). </td></tr>
    <tr><td class="paramname">schema_version</td><td>Version of the scheme data to be written (make with <a class="el" href="gsd_8h.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version()</a>).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section post"><dt>Postcondition</dt><dd>Create an empty gsd file in a file of the given name. Overwrite any existing file at that location.</dd></dl>
<p>The generated gsd file is not opened. Call <a class="el" href="gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a> to open it for writing.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno). </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="gsd_8c_source.html#l01568">1568</a> of file <a class="el" href="gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    {</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <span class="keywordtype">int</span> extra_flags = 0;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    extra_flags = _O_BINARY;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160; </div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <span class="comment">// create the file</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="keywordtype">int</span> fd = open(fname,</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                  O_RDWR | O_CREAT | O_TRUNC | extra_flags,</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                  S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="keywordtype">int</span> retval = <a class="code" href="gsd_8c.html#acb769baf09c31a5ad6cba95bd348c194">gsd_initialize_file</a>(fd, application, schema, schema_version);</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    close(fd);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="gsd_8c_source.html#l01322">gsd_initialize_file()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_a58654880dd98b2bc32e429810b7d2623_cgraph.svg" width="468" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a157d14770365926fde71a7787871bc63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a157d14770365926fde71a7787871bc63">&#9670;&nbsp;</a></span>gsd_create_and_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_create_and_open </td>
          <td>(</td>
          <td class="paramtype">struct gsd_handle *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>application</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>schema</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>schema_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98">gsd_open_flag</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>exclusive_create</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create and open a GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to open. </td></tr>
    <tr><td class="paramname">fname</td><td>File name. </td></tr>
    <tr><td class="paramname">application</td><td>Generating application name (truncated to 63 chars). </td></tr>
    <tr><td class="paramname">schema</td><td>Schema name for data to be written in this GSD file (truncated to 63 chars). </td></tr>
    <tr><td class="paramname">schema_version</td><td>Version of the scheme data to be written (make with <a class="el" href="gsd_8h.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version()</a>). </td></tr>
    <tr><td class="paramname">flags</td><td>Either GSD_OPEN_READWRITE, or GSD_OPEN_APPEND. </td></tr>
    <tr><td class="paramname">exclusive_create</td><td>Set to non-zero to force exclusive creation of the file.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section post"><dt>Postcondition</dt><dd>Create an empty gsd file with the given name. Overwrite any existing file at that location.</dd></dl>
<p>Open the generated gsd file in <em>handle</em>.</p>
<p>The file descriptor is closed if there when an error opening the file.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_NOT_A_GSD_FILE: Not a GSD file.</li>
<li>GSD_ERROR_INVALID_GSD_FILE_VERSION: Invalid GSD file version.</li>
<li>GSD_ERROR_FILE_CORRUPT: Corrupt file.</li>
<li>GSD_ERROR_MEMORY_ALLOCATION_FAILED: Unable to allocate memory. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="gsd_8c_source.html#l01587">1587</a> of file <a class="el" href="gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    {</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <span class="comment">// zero the handle</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <a class="code" href="gsd_8c.html#a9b05d58560daee2512f03bedf7b2926d">gsd_util_zero_memory</a>(handle, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> gsd_handle));</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160; </div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="keywordtype">int</span> extra_flags = 0;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    extra_flags = _O_BINARY;</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160; </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="comment">// set the open flags in the handle</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="keywordflow">if</span> (flags == <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61">GSD_OPEN_READWRITE</a>)</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        {</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        handle-&gt;open_flags = <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61">GSD_OPEN_READWRITE</a>;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        }</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags == <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>)</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        {</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        }</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags == <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a>)</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        {</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        handle-&gt;open_flags = <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a>;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        }</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160; </div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="comment">// set the exclusive create bit</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keywordflow">if</span> (exclusive_create)</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        {</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        extra_flags |= O_EXCL;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        }</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160; </div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="comment">// create the file</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    handle-&gt;fd = open(fname,</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;                      O_RDWR | O_CREAT | O_TRUNC | extra_flags,</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                      S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP);</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordtype">int</span> retval = <a class="code" href="gsd_8c.html#acb769baf09c31a5ad6cba95bd348c194">gsd_initialize_file</a>(handle-&gt;fd, application, schema, schema_version);</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        {</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        close(handle-&gt;fd);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        }</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160; </div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    retval = <a class="code" href="gsd_8c.html#ac159dfbfd790607f85073ad2d8464a8b">gsd_initialize_handle</a>(handle);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        {</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        close(handle-&gt;fd);</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        }</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="gsd_8h_source.html#l00098">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>, <a class="el" href="gsd_8c_source.html#l01322">gsd_initialize_file()</a>, <a class="el" href="gsd_8c_source.html#l01401">gsd_initialize_handle()</a>, <a class="el" href="gsd_8h_source.html#l00065">GSD_OPEN_APPEND</a>, <a class="el" href="gsd_8h_source.html#l00062">GSD_OPEN_READONLY</a>, <a class="el" href="gsd_8h_source.html#l00059">GSD_OPEN_READWRITE</a>, and <a class="el" href="gsd_8c_source.html#l00130">gsd_util_zero_memory()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_a157d14770365926fde71a7787871bc63_cgraph.svg" width="967" height="443"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ae0add799755285c1108a7b97b2ed7e00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0add799755285c1108a7b97b2ed7e00">&#9670;&nbsp;</a></span>gsd_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_open </td>
          <td>(</td>
          <td class="paramtype">struct gsd_handle *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98">gsd_open_flag</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open a GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to open. </td></tr>
    <tr><td class="paramname">fname</td><td>File name to open. </td></tr>
    <tr><td class="paramname">flags</td><td>Either GSD_OPEN_READWRITE, GSD_OPEN_READONLY, or GSD_OPEN_APPEND.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>The file name <em>fname</em> is a GSD file.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>Open a GSD file and populates the handle for use by API calls.</dd></dl>
<p>The file descriptor is closed if there is an error opening the file.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_NOT_A_GSD_FILE: Not a GSD file.</li>
<li>GSD_ERROR_INVALID_GSD_FILE_VERSION: Invalid GSD file version.</li>
<li>GSD_ERROR_FILE_CORRUPT: Corrupt file.</li>
<li>GSD_ERROR_MEMORY_ALLOCATION_FAILED: Unable to allocate memory. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="gsd_8c_source.html#l01642">1642</a> of file <a class="el" href="gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    {</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="comment">// zero the handle</span></div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <a class="code" href="gsd_8c.html#a9b05d58560daee2512f03bedf7b2926d">gsd_util_zero_memory</a>(handle, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> gsd_handle));</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160; </div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordtype">int</span> extra_flags = 0;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    extra_flags = _O_BINARY;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160; </div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="comment">// open the file</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="keywordflow">if</span> (flags == <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61">GSD_OPEN_READWRITE</a>)</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        {</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        handle-&gt;fd = open(fname, O_RDWR | extra_flags);</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        handle-&gt;open_flags = <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61">GSD_OPEN_READWRITE</a>;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        }</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags == <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>)</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        {</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        handle-&gt;fd = open(fname, O_RDONLY | extra_flags);</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        handle-&gt;open_flags = <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        }</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags == <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a>)</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;        {</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        handle-&gt;fd = open(fname, O_RDWR | extra_flags);</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        handle-&gt;open_flags = <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a>;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        }</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160; </div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordtype">int</span> retval = <a class="code" href="gsd_8c.html#ac159dfbfd790607f85073ad2d8464a8b">gsd_initialize_handle</a>(handle);</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        {</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        close(handle-&gt;fd);</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        }</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="gsd_8c_source.html#l01401">gsd_initialize_handle()</a>, <a class="el" href="gsd_8h_source.html#l00065">GSD_OPEN_APPEND</a>, <a class="el" href="gsd_8h_source.html#l00062">GSD_OPEN_READONLY</a>, <a class="el" href="gsd_8h_source.html#l00059">GSD_OPEN_READWRITE</a>, and <a class="el" href="gsd_8c_source.html#l00130">gsd_util_zero_memory()</a>.</p>

<p class="reference">Referenced by <a class="el" href="GSDUtil_8cpp_source.html#l00008">GSDUtil::GSDUtil()</a>, and <a class="el" href="testsSimulationBuild_8cpp_source.html#l00018">TEST_CASE()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_ae0add799755285c1108a7b97b2ed7e00_cgraph.svg" width="907" height="342"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_ae0add799755285c1108a7b97b2ed7e00_icgraph.svg" width="266" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a02ac7984034069d508b1c7ccbe702bac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02ac7984034069d508b1c7ccbe702bac">&#9670;&nbsp;</a></span>gsd_truncate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_truncate </td>
          <td>(</td>
          <td class="paramtype">struct gsd_handle *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Truncate a GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Open GSD file to truncate.</td></tr>
  </table>
  </dd>
</dl>
<p>After truncating, a file will have no frames and no data chunks. The file size will be that of a newly created gsd file. The application, schema, and schema version metadata will be kept. Truncate does not close and reopen the file, so it is suitable for writing restart files on Lustre file systems without any metadata access.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_NOT_A_GSD_FILE: Not a GSD file.</li>
<li>GSD_ERROR_INVALID_GSD_FILE_VERSION: Invalid GSD file version.</li>
<li>GSD_ERROR_FILE_CORRUPT: Corrupt file.</li>
<li>GSD_ERROR_MEMORY_ALLOCATION_FAILED: Unable to allocate memory. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="gsd_8c_source.html#l01677">1677</a> of file <a class="el" href="gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    {</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        }</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;open_flags == <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>)</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        {</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        }</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordtype">int</span> retval = 0;</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160; </div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <span class="comment">// deallocate indices</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;frame_names.data.reserved &gt; 0)</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        {</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        retval = <a class="code" href="gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;handle-&gt;frame_names.data);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;            {</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;            }</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        }</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160; </div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;file_names.data.reserved &gt; 0)</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        {</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        retval = <a class="code" href="gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;handle-&gt;file_names.data);</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;        <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;            {</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;            }</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;        }</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160; </div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    retval = <a class="code" href="gsd_8c.html#a8249dc854c432e55e8ee07a8d3e8546c">gsd_name_id_map_free</a>(&amp;handle-&gt;name_map);</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        {</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        }</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    retval = <a class="code" href="gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;handle-&gt;file_index);</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        {</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;        }</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160; </div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;frame_index.reserved &gt; 0)</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        retval = <a class="code" href="gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;handle-&gt;frame_index);</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;            {</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;            }</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        }</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160; </div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;buffer_index.reserved &gt; 0)</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        {</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        retval = <a class="code" href="gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;handle-&gt;buffer_index);</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;            {</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            }</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        }</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160; </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;write_buffer.reserved &gt; 0)</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        {</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        retval = <a class="code" href="gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;handle-&gt;write_buffer);</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            {</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;            }</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        }</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160; </div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="comment">// keep a copy of the old header</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="keyword">struct </span>gsd_header old_header = handle-&gt;header;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    retval = <a class="code" href="gsd_8c.html#acb769baf09c31a5ad6cba95bd348c194">gsd_initialize_file</a>(handle-&gt;fd,</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                                 old_header.application,</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;                                 old_header.schema,</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                                 old_header.schema_version);</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160; </div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;        {</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        }</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160; </div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="gsd_8c.html#ac159dfbfd790607f85073ad2d8464a8b">gsd_initialize_handle</a>(handle);</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="gsd_8c_source.html#l00535">gsd_byte_buffer_free()</a>, <a class="el" href="gsd_8h_source.html#l00098">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>, <a class="el" href="gsd_8h_source.html#l00078">GSD_ERROR_INVALID_ARGUMENT</a>, <a class="el" href="gsd_8c_source.html#l00706">gsd_index_buffer_free()</a>, <a class="el" href="gsd_8c_source.html#l01322">gsd_initialize_file()</a>, <a class="el" href="gsd_8c_source.html#l01401">gsd_initialize_handle()</a>, <a class="el" href="gsd_8c_source.html#l00257">gsd_name_id_map_free()</a>, <a class="el" href="gsd_8h_source.html#l00062">GSD_OPEN_READONLY</a>, and <a class="el" href="gsd_8h_source.html#l00072">GSD_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="GSDUtil_8cpp_source.html#l00075">GSDUtil::truncateGSD()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_a02ac7984034069d508b1c7ccbe702bac_cgraph.svg" width="932" height="443"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_a02ac7984034069d508b1c7ccbe702bac_icgraph.svg" width="311" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a08b4f76e3e19eda194def8c0c4b2b7a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08b4f76e3e19eda194def8c0c4b2b7a3">&#9670;&nbsp;</a></span>gsd_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_close </td>
          <td>(</td>
          <td class="paramtype">struct gsd_handle *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close a GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>GSD file to close.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened by <a class="el" href="gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a>. </dd>
<dd>
<a class="el" href="gsd_8h.html#aa03810337c5eebcbe716d8633eaefc5e">gsd_end_frame()</a> has been called since the last call to <a class="el" href="gsd_8h.html#ae22447904b925f284bf987fae448488a">gsd_write_chunk()</a>.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The file is closed. </dd>
<dd>
<em>handle</em> is freed and can no longer be used.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Ensure that all <a class="el" href="gsd_8h.html#ae22447904b925f284bf987fae448488a">gsd_write_chunk()</a> calls are committed with <a class="el" href="gsd_8h.html#aa03810337c5eebcbe716d8633eaefc5e">gsd_end_frame()</a> before closing the file.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_INVALID_ARGUMENT: <em>handle</em> is NULL. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="gsd_8c_source.html#l01763">1763</a> of file <a class="el" href="gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        {</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        }</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160; </div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <span class="comment">// save the fd so we can use it after freeing the handle</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="keywordtype">int</span> fd = handle-&gt;fd;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160; </div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <span class="keywordtype">int</span> retval = <a class="code" href="gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;handle-&gt;file_index);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;        {</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        }</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160; </div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;frame_index.reserved &gt; 0)</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        {</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        retval = <a class="code" href="gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;handle-&gt;frame_index);</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;            {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;            }</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        }</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160; </div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;buffer_index.reserved &gt; 0)</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        {</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        retval = <a class="code" href="gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;handle-&gt;buffer_index);</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;            {</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;            }</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        }</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160; </div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;write_buffer.reserved &gt; 0)</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        {</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        retval = <a class="code" href="gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;handle-&gt;write_buffer);</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;            {</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;            }</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        }</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160; </div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    retval = <a class="code" href="gsd_8c.html#a8249dc854c432e55e8ee07a8d3e8546c">gsd_name_id_map_free</a>(&amp;handle-&gt;name_map);</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        {</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        }</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160; </div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;frame_names.data.reserved &gt; 0)</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        {</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        handle-&gt;frame_names.n_names = 0;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;        retval = <a class="code" href="gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;handle-&gt;frame_names.data);</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;            {</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;            }</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        }</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160; </div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;file_names.data.reserved &gt; 0)</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        {</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        handle-&gt;file_names.n_names = 0;</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        retval = <a class="code" href="gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;handle-&gt;file_names.data);</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;            {</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;            }</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        }</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="comment">// close the file</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    retval = close(fd);</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        {</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        }</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160; </div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="gsd_8c_source.html#l00535">gsd_byte_buffer_free()</a>, <a class="el" href="gsd_8h_source.html#l00078">GSD_ERROR_INVALID_ARGUMENT</a>, <a class="el" href="gsd_8h_source.html#l00075">GSD_ERROR_IO</a>, <a class="el" href="gsd_8c_source.html#l00706">gsd_index_buffer_free()</a>, <a class="el" href="gsd_8c_source.html#l00257">gsd_name_id_map_free()</a>, and <a class="el" href="gsd_8h_source.html#l00072">GSD_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="systemData_8cpp_source.html#l00026">systemData::~systemData()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_a08b4f76e3e19eda194def8c0c4b2b7a3_cgraph.svg" width="502" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_a08b4f76e3e19eda194def8c0c4b2b7a3_icgraph.svg" width="320" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa03810337c5eebcbe716d8633eaefc5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa03810337c5eebcbe716d8633eaefc5e">&#9670;&nbsp;</a></span>gsd_end_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_end_frame </td>
          <td>(</td>
          <td class="paramtype">struct gsd_handle *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Commit the current frame and increment the frame counter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to an open GSD file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened by <a class="el" href="gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a>. </dd>
<dd>
<a class="el" href="gsd_8h.html#ae22447904b925f284bf987fae448488a">gsd_write_chunk()</a> has been called at least once since the last call to <a class="el" href="gsd_8h.html#aa03810337c5eebcbe716d8633eaefc5e">gsd_end_frame()</a>.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The current frame counter is increased by 1 and cached indexes are written to disk.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_INVALID_ARGUMENT: <em>handle</em> is NULL.</li>
<li>GSD_ERROR_FILE_MUST_BE_WRITABLE: The file was opened read-only.</li>
<li>GSD_ERROR_MEMORY_ALLOCATION_FAILED: Unable to allocate memory. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="gsd_8c_source.html#l01842">1842</a> of file <a class="el" href="gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    {</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        {</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        }</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;open_flags == <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>)</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        {</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        }</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160; </div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <span class="comment">// increment the frame counter</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    handle-&gt;cur_frame++;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160; </div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <span class="comment">// flush the namelist buffer</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <span class="keywordtype">int</span> retval = <a class="code" href="gsd_8c.html#ab147cf4d77c10fd8085e5023e9afe55f">gsd_flush_name_buffer</a>(handle);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        {</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        }</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160; </div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="comment">// flush the write buffer</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    retval = <a class="code" href="gsd_8c.html#a61daeaa70162e9bac3d241832b460278">gsd_flush_write_buffer</a>(handle);</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        {</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        }</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160; </div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <span class="comment">// write the frame index to the file</span></div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;frame_index.size &gt; 0)</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        {</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        <span class="comment">// ensure there is enough space in the index</span></div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        <span class="keywordflow">if</span> ((handle-&gt;file_index.size + handle-&gt;frame_index.size) &gt; handle-&gt;file_index.reserved)</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;            {</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;            <a class="code" href="gsd_8c.html#ae6dddb94661e99e54f6c01b1a443e27f">gsd_expand_file_index</a>(handle, handle-&gt;file_index.size + handle-&gt;frame_index.size);</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;            }</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160; </div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        <span class="comment">// sort the index before writing</span></div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        retval = <a class="code" href="gsd_8c.html#a6c20ccb47eed1a3ea9995a47a8eebdbd">gsd_index_buffer_sort</a>(&amp;handle-&gt;frame_index);</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;            {</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;            }</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160; </div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        <span class="comment">// write the frame index entries to the file</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        int64_t write_pos = handle-&gt;header.index_location</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                            + <span class="keyword">sizeof</span>(<span class="keyword">struct </span>gsd_index_entry) * handle-&gt;file_index.size;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160; </div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;        <span class="keywordtype">size_t</span> bytes_to_write = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>gsd_index_entry) * handle-&gt;frame_index.size;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;        ssize_t bytes_written</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;            = <a class="code" href="gsd_8c.html#a3fb7746d93a1c856ca7ef64fa3548cbe">gsd_io_pwrite_retry</a>(handle-&gt;fd, handle-&gt;frame_index.data, bytes_to_write, write_pos);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160; </div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        <span class="keywordflow">if</span> (bytes_written == -1 || bytes_written != bytes_to_write)</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;            {</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;            }</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160; </div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;<span class="preprocessor">#if !GSD_USE_MMAP</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;        <span class="comment">// add the entries to the file index</span></div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        memcpy(handle-&gt;file_index.data + handle-&gt;file_index.size,</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;               handle-&gt;frame_index.data,</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;               <span class="keyword">sizeof</span>(<span class="keyword">struct</span> gsd_index_entry) * handle-&gt;frame_index.size);</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160; </div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        <span class="comment">// update size of file index</span></div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        handle-&gt;file_index.size += handle-&gt;frame_index.size;</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160; </div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;        <span class="comment">// clear the frame index</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        handle-&gt;frame_index.size = 0;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;        }</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160; </div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>;</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="gsd_8h_source.html#l00098">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>, <a class="el" href="gsd_8h_source.html#l00078">GSD_ERROR_INVALID_ARGUMENT</a>, <a class="el" href="gsd_8h_source.html#l00075">GSD_ERROR_IO</a>, <a class="el" href="gsd_8c_source.html#l00933">gsd_expand_file_index()</a>, <a class="el" href="gsd_8c_source.html#l01148">gsd_flush_name_buffer()</a>, <a class="el" href="gsd_8c_source.html#l01081">gsd_flush_write_buffer()</a>, <a class="el" href="gsd_8c_source.html#l00899">gsd_index_buffer_sort()</a>, <a class="el" href="gsd_8c_source.html#l00148">gsd_io_pwrite_retry()</a>, <a class="el" href="gsd_8h_source.html#l00062">GSD_OPEN_READONLY</a>, and <a class="el" href="gsd_8h_source.html#l00072">GSD_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="GSDUtil_8cpp_source.html#l00455">GSDUtil::writeFrame()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_aa03810337c5eebcbe716d8633eaefc5e_cgraph.svg" width="954" height="544"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_aa03810337c5eebcbe716d8633eaefc5e_icgraph.svg" width="314" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ae22447904b925f284bf987fae448488a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae22447904b925f284bf987fae448488a">&#9670;&nbsp;</a></span>gsd_write_chunk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_write_chunk </td>
          <td>(</td>
          <td class="paramtype">struct gsd_handle *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>N</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>M</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a data chunk to the current frame</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to an open GSD file. </td></tr>
    <tr><td class="paramname">name</td><td>Name of the data chunk. </td></tr>
    <tr><td class="paramname">type</td><td>type ID that identifies the type of data in <em>data</em>. </td></tr>
    <tr><td class="paramname">N</td><td>Number of rows in the data. </td></tr>
    <tr><td class="paramname">M</td><td>Number of columns in the data. </td></tr>
    <tr><td class="paramname">flags</td><td>set to 0, non-zero values reserved for future use. </td></tr>
    <tr><td class="paramname">data</td><td>Data buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened by <a class="el" href="gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a>. </dd>
<dd>
<em>name</em> is a unique name for data chunks in the given frame. </dd>
<dd>
data is allocated and contains at least <code>N * M * gsd_sizeof_type(type)</code> bytes.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The given data chunk is written to the end of the file and its location is updated in the in-memory index.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the GSD file is version 1.0, the chunk name is truncated to 63 bytes. GSD version 2.0 files support arbitrarily long names.</dd>
<dd>
<em>N</em> == 0 is allowed. When <em>N</em> is 0, <em>data</em> may be NULL.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_INVALID_ARGUMENT: <em>handle</em> is NULL, <em>N</em> == 0, <em>M</em> == 0, <em>type</em> is invalid, or flags* != 0.</li>
<li>GSD_ERROR_FILE_MUST_BE_WRITABLE: The file was opened read-only.</li>
<li>GSD_ERROR_NAMELIST_FULL: The file cannot store any additional unique chunk names.</li>
<li>GSD_ERROR_MEMORY_ALLOCATION_FAILED: failed to allocate memory. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="gsd_8c_source.html#l01916">1916</a> of file <a class="el" href="gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    {</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <span class="comment">// validate input</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="keywordflow">if</span> (N &gt; 0 &amp;&amp; data == NULL)</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        {</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;        }</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <span class="keywordflow">if</span> (M == 0)</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        {</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        }</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;open_flags == <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>)</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;        {</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>;</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;        }</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <span class="keywordflow">if</span> (flags != 0)</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        {</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;        }</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160; </div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    uint16_t <span class="keywordtype">id</span> = <a class="code" href="gsd_8c.html#a31b9400272036b121040e9fc0a9e626b">gsd_name_id_map_find</a>(&amp;handle-&gt;name_map, name);</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == UINT16_MAX)</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        {</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;        <span class="comment">// not found, append to the index</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;        <span class="keywordtype">int</span> retval = <a class="code" href="gsd_8c.html#aa1a0a7dcf4015edcadbb47a6451b4a4b">gsd_append_name</a>(&amp;<span class="keywordtype">id</span>, handle, name);</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;            {</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;            }</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160; </div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == UINT16_MAX)</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;            {</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;            <span class="comment">// this should never happen</span></div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4cca403d94a443c160073da8cf26a88b">GSD_ERROR_NAMELIST_FULL</a>;</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;            }</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;        }</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; </div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <span class="keyword">struct </span>gsd_index_entry entry;</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <span class="comment">// populate fields in the entry&#39;s data</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <a class="code" href="gsd_8c.html#a9b05d58560daee2512f03bedf7b2926d">gsd_util_zero_memory</a>(&amp;entry, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> gsd_index_entry));</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    entry.frame = handle-&gt;cur_frame;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    entry.id = id;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    entry.type = (uint8_t)type;</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    entry.N = N;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    entry.M = M;</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    <span class="keywordtype">size_t</span> size = N * M * <a class="code" href="gsd_8c.html#ab1d1a8a5f73b37df0c706f41df3bdd69">gsd_sizeof_type</a>(type);</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160; </div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    <span class="comment">// decide whether to write this chunk to the buffer or straight to disk</span></div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    <span class="keywordflow">if</span> (size &lt; handle-&gt;write_buffer.reserved / 2)</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        {</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;        <span class="comment">// flush the buffer if this entry won&#39;t fit</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        <span class="keywordflow">if</span> (size &gt; (handle-&gt;write_buffer.reserved - handle-&gt;write_buffer.size))</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;            {</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;            <a class="code" href="gsd_8c.html#a61daeaa70162e9bac3d241832b460278">gsd_flush_write_buffer</a>(handle);</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;            }</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160; </div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        entry.location = handle-&gt;write_buffer.size;</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160; </div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        <span class="comment">// add an entry to the buffer index</span></div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        <span class="keyword">struct </span>gsd_index_entry* index_entry;</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160; </div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;        <span class="keywordtype">int</span> retval = <a class="code" href="gsd_8c.html#a258b64725f90f60d969752d65fba9850">gsd_index_buffer_add</a>(&amp;handle-&gt;buffer_index, &amp;index_entry);</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;            {</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;            }</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        *index_entry = entry;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160; </div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;        <span class="comment">// add the data to the write buffer</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        <span class="keywordflow">if</span> (size &gt; 0)</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;            {</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;            retval = <a class="code" href="gsd_8c.html#a7a717f9dafe011e68434e181c76253af">gsd_byte_buffer_append</a>(&amp;handle-&gt;write_buffer, data, size);</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;            <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;                {</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;                <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;                }</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;            }</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        }</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        {</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;        <span class="comment">// add an entry to the frame index</span></div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;        <span class="keyword">struct </span>gsd_index_entry* index_entry;</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160; </div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;        <span class="keywordtype">int</span> retval = <a class="code" href="gsd_8c.html#a258b64725f90f60d969752d65fba9850">gsd_index_buffer_add</a>(&amp;handle-&gt;frame_index, &amp;index_entry);</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;            {</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;            }</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        *index_entry = entry;</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160; </div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        <span class="comment">// find the location at the end of the file for the chunk</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;        index_entry-&gt;location = handle-&gt;file_size;</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160; </div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;        <span class="comment">// write the data</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        ssize_t bytes_written = <a class="code" href="gsd_8c.html#a3fb7746d93a1c856ca7ef64fa3548cbe">gsd_io_pwrite_retry</a>(handle-&gt;fd, data, size, index_entry-&gt;location);</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;        <span class="keywordflow">if</span> (bytes_written == -1 || bytes_written != size)</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;            {</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;            }</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160; </div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;        <span class="comment">// update the file_size in the handle</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        handle-&gt;file_size += bytes_written;</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        }</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160; </div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="gsd_8c_source.html#l01264">gsd_append_name()</a>, <a class="el" href="gsd_8c_source.html#l00491">gsd_byte_buffer_append()</a>, <a class="el" href="gsd_8h_source.html#l00098">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>, <a class="el" href="gsd_8h_source.html#l00078">GSD_ERROR_INVALID_ARGUMENT</a>, <a class="el" href="gsd_8h_source.html#l00075">GSD_ERROR_IO</a>, <a class="el" href="gsd_8h_source.html#l00093">GSD_ERROR_NAMELIST_FULL</a>, <a class="el" href="gsd_8c_source.html#l01081">gsd_flush_write_buffer()</a>, <a class="el" href="gsd_8c_source.html#l00744">gsd_index_buffer_add()</a>, <a class="el" href="gsd_8c_source.html#l00148">gsd_io_pwrite_retry()</a>, <a class="el" href="gsd_8c_source.html#l00377">gsd_name_id_map_find()</a>, <a class="el" href="gsd_8h_source.html#l00062">GSD_OPEN_READONLY</a>, <a class="el" href="gsd_8c_source.html#l02177">gsd_sizeof_type()</a>, <a class="el" href="gsd_8h_source.html#l00072">GSD_SUCCESS</a>, and <a class="el" href="gsd_8c_source.html#l00130">gsd_util_zero_memory()</a>.</p>

<p class="reference">Referenced by <a class="el" href="GSDUtil_8cpp_source.html#l00472">GSDUtil::writeHeader()</a>, <a class="el" href="GSDUtil_8cpp_source.html#l00499">GSDUtil::writeParameters()</a>, and <a class="el" href="GSDUtil_8cpp_source.html#l00516">GSDUtil::writeParticles()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_ae22447904b925f284bf987fae448488a_cgraph.svg" width="758" height="382"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_ae22447904b925f284bf987fae448488a_icgraph.svg" width="546" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3c76bbf6c28b953cff198a44852c732f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c76bbf6c28b953cff198a44852c732f">&#9670;&nbsp;</a></span>gsd_find_chunk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct gsd_index_entry* gsd_find_chunk </td>
          <td>(</td>
          <td class="paramtype">struct gsd_handle *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find a chunk in the GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to an open GSD file </td></tr>
    <tr><td class="paramname">frame</td><td>Frame to look for chunk </td></tr>
    <tr><td class="paramname">name</td><td>Name of the chunk to find</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened by <a class="el" href="gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a> in read or readwrite mode.</dd></dl>
<p>The found entry contains size and type metadata and can be passed to <a class="el" href="gsd_8h.html#a2db2e3e8a72948bf413e7f09469ec8a6">gsd_read_chunk()</a> to read the data.</p>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the found chunk, or NULL if not found. </dd></dl>

<p class="definition">Definition at line <a class="el" href="gsd_8c_source.html#l02039">2039</a> of file <a class="el" href="gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    {</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        {</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        }</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    <span class="keywordflow">if</span> (name == NULL)</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        {</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        }</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    <span class="keywordflow">if</span> (frame &gt;= <a class="code" href="gsd_8c.html#a7479046d4d6e15c33cb24034ddd87562">gsd_get_nframes</a>(handle))</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;        {</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;        }</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;open_flags == <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a>)</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;        {</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        }</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160; </div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    <span class="comment">// find the id for the given name</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    uint16_t match_id = <a class="code" href="gsd_8c.html#a31b9400272036b121040e9fc0a9e626b">gsd_name_id_map_find</a>(&amp;handle-&gt;name_map, name);</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <span class="keywordflow">if</span> (match_id == UINT16_MAX)</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;        {</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;        }</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160; </div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;header.gsd_version &gt;= <a class="code" href="gsd_8c.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version</a>(2, 0))</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        {</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        <span class="comment">// gsd 2.0 files sort the entire index</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        <span class="comment">// binary search for the index entry</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        ssize_t L = 0;</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        ssize_t R = handle-&gt;file_index.size - 1;</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;        <span class="keyword">struct </span>gsd_index_entry T;</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        T.frame = frame;</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;        T.id = match_id;</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160; </div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <span class="keywordflow">while</span> (L &lt;= R)</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;            {</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;            <span class="keywordtype">size_t</span> m = (L + R) / 2;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;            <span class="keywordtype">int</span> cmp = <a class="code" href="gsd_8c.html#a3ffe758eed9a5bae487f514a0a45e97d">gsd_cmp_index_entry</a>(handle-&gt;file_index.data + m, &amp;T);</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;            <span class="keywordflow">if</span> (cmp == -1)</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;                {</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;                L = m + 1;</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;                }</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmp == 1)</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;                {</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;                R = m - 1;</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;                }</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;                {</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;                <span class="keywordflow">return</span> &amp;(handle-&gt;file_index.data[m]);</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;                }</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;            }</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;        }</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        {</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        <span class="comment">// gsd 1.0 file: use binary search to find the frame and linear search to find the entry</span></div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;        <span class="keywordtype">size_t</span> L = 0;</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;        <span class="keywordtype">size_t</span> R = handle-&gt;file_index.size;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160; </div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;        <span class="comment">// progressively narrow the search window by halves</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;            {</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;            <span class="keywordtype">size_t</span> m = (L + R) / 2;</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160; </div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;            <span class="keywordflow">if</span> (frame &lt; handle-&gt;file_index.data[m].frame)</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                {</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                R = m;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                }</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                {</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;                L = m;</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;                }</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;            } <span class="keywordflow">while</span> ((R - L) &gt; 1);</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160; </div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;        <span class="comment">// this finds L = the rightmost index with the desired frame</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;        int64_t cur_index;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160; </div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;        <span class="comment">// search all index entries with the matching frame</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;        <span class="keywordflow">for</span> (cur_index = L; (cur_index &gt;= 0) &amp;&amp; (handle-&gt;file_index.data[cur_index].frame == frame);</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;             cur_index--)</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;            {</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;            <span class="comment">// if the frame matches, check the id</span></div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;            <span class="keywordflow">if</span> (match_id == handle-&gt;file_index.data[cur_index].id)</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;                {</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;                <span class="keywordflow">return</span> &amp;(handle-&gt;file_index.data[cur_index]);</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                }</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;            }</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        }</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160; </div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    <span class="comment">// if we got here, we didn&#39;t find the specified chunk</span></div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="gsd_8c_source.html#l00774">gsd_cmp_index_entry()</a>, <a class="el" href="gsd_8c_source.html#l02029">gsd_get_nframes()</a>, <a class="el" href="gsd_8c_source.html#l01563">gsd_make_version()</a>, <a class="el" href="gsd_8c_source.html#l00377">gsd_name_id_map_find()</a>, and <a class="el" href="gsd_8h_source.html#l00065">GSD_OPEN_APPEND</a>.</p>

<p class="reference">Referenced by <a class="el" href="GSDUtil_8cpp_source.html#l00103">GSDUtil::readChunk()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_a3c76bbf6c28b953cff198a44852c732f_cgraph.svg" width="479" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_a3c76bbf6c28b953cff198a44852c732f_icgraph.svg" width="742" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2db2e3e8a72948bf413e7f09469ec8a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2db2e3e8a72948bf413e7f09469ec8a6">&#9670;&nbsp;</a></span>gsd_read_chunk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_read_chunk </td>
          <td>(</td>
          <td class="paramtype">struct gsd_handle *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct gsd_index_entry *&#160;</td>
          <td class="paramname"><em>chunk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a chunk from the GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to an open GSD file. </td></tr>
    <tr><td class="paramname">data</td><td>Data buffer to read into. </td></tr>
    <tr><td class="paramname">chunk</td><td>Chunk to read.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened in read or readwrite mode. </dd>
<dd>
<em>chunk</em> was found by <a class="el" href="gsd_8h.html#a3c76bbf6c28b953cff198a44852c732f">gsd_find_chunk()</a>. </dd>
<dd>
<em>data</em> points to an allocated buffer with at least <code>N * M * gsd_sizeof_type(type)</code> bytes.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_INVALID_ARGUMENT: <em>handle</em> is NULL, <em>data</em> is NULL, or <em>chunk</em> is NULL.</li>
<li>GSD_ERROR_FILE_MUST_BE_READABLE: The file was opened in append mode.</li>
<li>GSD_ERROR_FILE_CORRUPT: The GSD file is corrupt. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="gsd_8c_source.html#l02133">2133</a> of file <a class="el" href="gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    {</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        {</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;        }</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <span class="keywordflow">if</span> (data == NULL)</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        {</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        }</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    <span class="keywordflow">if</span> (chunk == NULL)</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;        {</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;        }</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;open_flags == <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a>)</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;        {</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07bac5de89b0da97d4df5b52f18ee0977b7c">GSD_ERROR_FILE_MUST_BE_READABLE</a>;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;        }</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160; </div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    <span class="keywordtype">size_t</span> size = chunk-&gt;N * chunk-&gt;M * <a class="code" href="gsd_8c.html#ab1d1a8a5f73b37df0c706f41df3bdd69">gsd_sizeof_type</a>((<span class="keyword">enum</span> <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a>)chunk-&gt;type);</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    <span class="keywordflow">if</span> (size == 0)</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        {</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c">GSD_ERROR_FILE_CORRUPT</a>;</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;        }</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="keywordflow">if</span> (chunk-&gt;location == 0)</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;        {</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c">GSD_ERROR_FILE_CORRUPT</a>;</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        }</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160; </div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="comment">// validate that we don&#39;t read past the end of the file</span></div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <span class="keywordflow">if</span> ((chunk-&gt;location + size) &gt; (uint64_t)handle-&gt;file_size)</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;        {</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c">GSD_ERROR_FILE_CORRUPT</a>;</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        }</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160; </div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    ssize_t bytes_read = <a class="code" href="gsd_8c.html#ac1f41abbefbfe35337e7053d766c089b">gsd_io_pread_retry</a>(handle-&gt;fd, data, size, chunk-&gt;location);</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    <span class="keywordflow">if</span> (bytes_read == -1 || bytes_read != size)</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        {</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;        }</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160; </div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>;</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="gsd_8h_source.html#l00087">GSD_ERROR_FILE_CORRUPT</a>, <a class="el" href="gsd_8h_source.html#l00103">GSD_ERROR_FILE_MUST_BE_READABLE</a>, <a class="el" href="gsd_8h_source.html#l00078">GSD_ERROR_INVALID_ARGUMENT</a>, <a class="el" href="gsd_8h_source.html#l00075">GSD_ERROR_IO</a>, <a class="el" href="gsd_8c_source.html#l00190">gsd_io_pread_retry()</a>, <a class="el" href="gsd_8h_source.html#l00065">GSD_OPEN_APPEND</a>, <a class="el" href="gsd_8c_source.html#l02177">gsd_sizeof_type()</a>, and <a class="el" href="gsd_8h_source.html#l00072">GSD_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="GSDUtil_8cpp_source.html#l00103">GSDUtil::readChunk()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_a2db2e3e8a72948bf413e7f09469ec8a6_cgraph.svg" width="308" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_a2db2e3e8a72948bf413e7f09469ec8a6_icgraph.svg" width="746" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7479046d4d6e15c33cb24034ddd87562"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7479046d4d6e15c33cb24034ddd87562">&#9670;&nbsp;</a></span>gsd_get_nframes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t gsd_get_nframes </td>
          <td>(</td>
          <td class="paramtype">struct gsd_handle *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the number of frames in the GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to an open GSD file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened by <a class="el" href="gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The number of frames in the file, or 0 on error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="gsd_8c_source.html#l02029">2029</a> of file <a class="el" href="gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    {</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        {</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        }</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    <span class="keywordflow">return</span> handle-&gt;cur_frame;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="gsd_8c_source.html#l02039">gsd_find_chunk()</a>, <a class="el" href="GSDUtil_8cpp_source.html#l00008">GSDUtil::GSDUtil()</a>, <a class="el" href="GSDUtil_8cpp_source.html#l00472">GSDUtil::writeHeader()</a>, and <a class="el" href="GSDUtil_8cpp_source.html#l00516">GSDUtil::writeParticles()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_a7479046d4d6e15c33cb24034ddd87562_icgraph.svg" width="959" height="342"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab1d1a8a5f73b37df0c706f41df3bdd69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1d1a8a5f73b37df0c706f41df3bdd69">&#9670;&nbsp;</a></span>gsd_sizeof_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t gsd_sizeof_type </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Query size of a GSD type ID.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type ID to query.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Size of the given type in bytes, or 0 for an unknown type ID. </dd></dl>

<p class="definition">Definition at line <a class="el" href="gsd_8c_source.html#l02177">2177</a> of file <a class="el" href="gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    {</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="keywordtype">size_t</span> val = 0;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <span class="keywordflow">if</span> (type == <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118addc1aa49964e9df18eca95586854564e">GSD_TYPE_UINT8</a>)</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;        {</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;        val = <span class="keyword">sizeof</span>(uint8_t);</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;        }</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a154cf53ac1f09d58516ee90c5e50ee9b">GSD_TYPE_UINT16</a>)</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        {</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;        val = <span class="keyword">sizeof</span>(uint16_t);</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;        }</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a49225daa33e0c1f26dda21d22a6ffb10">GSD_TYPE_UINT32</a>)</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        {</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;        val = <span class="keyword">sizeof</span>(uint32_t);</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;        }</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a43c1b41755ac12b8611b8478eab5f377">GSD_TYPE_UINT64</a>)</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;        {</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;        val = <span class="keyword">sizeof</span>(uint64_t);</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;        }</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a5d13ce82d25b294b7300ea013396fb45">GSD_TYPE_INT8</a>)</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;        {</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;        val = <span class="keyword">sizeof</span>(int8_t);</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;        }</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a6e5c1ccf3040cebc0dbcf562fd4291cb">GSD_TYPE_INT16</a>)</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;        {</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;        val = <span class="keyword">sizeof</span>(int16_t);</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;        }</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a58aacbcfef4ae23382d8b857cfba815a">GSD_TYPE_INT32</a>)</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;        {</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;        val = <span class="keyword">sizeof</span>(int32_t);</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        }</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a25b4572782ed785491f8b5b666692212">GSD_TYPE_INT64</a>)</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;        {</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;        val = <span class="keyword">sizeof</span>(int64_t);</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        }</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a8f2fc103d16a251246a102c5477fc0be">GSD_TYPE_FLOAT</a>)</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        {</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        val = <span class="keyword">sizeof</span>(float);</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        }</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a2bf7336e70f8d15921952b6ec177d238">GSD_TYPE_DOUBLE</a>)</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;        {</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;        val = <span class="keyword">sizeof</span>(double);</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;        }</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;        {</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;        }</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    <span class="keywordflow">return</span> val;</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="gsd_8h_source.html#l00052">GSD_TYPE_DOUBLE</a>, <a class="el" href="gsd_8h_source.html#l00049">GSD_TYPE_FLOAT</a>, <a class="el" href="gsd_8h_source.html#l00040">GSD_TYPE_INT16</a>, <a class="el" href="gsd_8h_source.html#l00043">GSD_TYPE_INT32</a>, <a class="el" href="gsd_8h_source.html#l00046">GSD_TYPE_INT64</a>, <a class="el" href="gsd_8h_source.html#l00037">GSD_TYPE_INT8</a>, <a class="el" href="gsd_8h_source.html#l00028">GSD_TYPE_UINT16</a>, <a class="el" href="gsd_8h_source.html#l00031">GSD_TYPE_UINT32</a>, <a class="el" href="gsd_8h_source.html#l00034">GSD_TYPE_UINT64</a>, and <a class="el" href="gsd_8h_source.html#l00025">GSD_TYPE_UINT8</a>.</p>

<p class="reference">Referenced by <a class="el" href="gsd_8c_source.html#l00417">gsd_is_entry_valid()</a>, <a class="el" href="gsd_8c_source.html#l02133">gsd_read_chunk()</a>, <a class="el" href="gsd_8c_source.html#l01916">gsd_write_chunk()</a>, and <a class="el" href="GSDUtil_8cpp_source.html#l00103">GSDUtil::readChunk()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_ab1d1a8a5f73b37df0c706f41df3bdd69_icgraph.svg" width="1163" height="544"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a081b6fad5e27f4f8cfabd0030af7ebf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a081b6fad5e27f4f8cfabd0030af7ebf5">&#9670;&nbsp;</a></span>gsd_find_matching_chunk_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* gsd_find_matching_chunk_name </td>
          <td>(</td>
          <td class="paramtype">struct gsd_handle *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>match</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Search for chunk names in a gsd file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to an open GSD file. </td></tr>
    <tr><td class="paramname">match</td><td>String to match. </td></tr>
    <tr><td class="paramname">prev</td><td>Search starting point.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened by <a class="el" href="gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a> </dd>
<dd>
<em>prev</em> was returned by a previous call to <a class="el" href="gsd_8h.html#a081b6fad5e27f4f8cfabd0030af7ebf5">gsd_find_matching_chunk_name()</a></dd></dl>
<p>To find the first matching chunk name, pass NULL for prev. Pass in the previous found string to find the next after that, and so on. Chunk names match if they begin with the string in match*. Chunk names returned by this function may be present in at least one frame.</p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a string, NULL if no more matching chunks are found found, or NULL if prev* is invalid </dd></dl>

<p class="definition">Definition at line <a class="el" href="gsd_8c_source.html#l02228">2228</a> of file <a class="el" href="gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    {</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;        {</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        }</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <span class="keywordflow">if</span> (match == NULL)</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;        {</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        }</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;file_names.n_names == 0)</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        {</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;        }</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160; </div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    <span class="comment">// return nothing found if the name buffer is corrupt</span></div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;file_names.data.data[handle-&gt;file_names.data.reserved - 1] != 0)</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        {</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;        }</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160; </div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <span class="comment">// determine search start index</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* search_str;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    <span class="keywordflow">if</span> (prev == NULL)</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;        {</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;        search_str = handle-&gt;file_names.data.data;</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;        }</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;        {</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;        <span class="comment">// return not found if prev is not in range</span></div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        <span class="keywordflow">if</span> (prev &lt; handle-&gt;file_names.data.data)</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;            {</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;            }</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;        <span class="keywordflow">if</span> (prev &gt;= (handle-&gt;file_names.data.data + handle-&gt;file_names.data.reserved))</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;            {</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;            }</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160; </div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;        <span class="keywordflow">if</span> (handle-&gt;header.gsd_version &lt; <a class="code" href="gsd_8c.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version</a>(2, 0))</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;            {</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;            search_str = prev + <a class="code" href="gsd_8h.html#a0411cd49bb5b71852cecd93bcbf0ca2dab1e8211d5344adb743238d82d369331d">GSD_NAME_SIZE</a>;</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;            }</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;            {</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;            search_str = prev + strlen(prev) + 1;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;            }</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;        }</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160; </div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <span class="keywordtype">size_t</span> match_len = strlen(match);</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160; </div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="keywordflow">while</span> (search_str &lt; (handle-&gt;file_names.data.data + handle-&gt;file_names.data.reserved))</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;        {</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;        <span class="keywordflow">if</span> (search_str[0] != 0 &amp;&amp; 0 == strncmp(match, search_str, match_len))</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;            {</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;            <span class="keywordflow">return</span> search_str;</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;            }</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160; </div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;        <span class="keywordflow">if</span> (handle-&gt;header.gsd_version &lt; <a class="code" href="gsd_8c.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version</a>(2, 0))</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;            {</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;            search_str += <a class="code" href="gsd_8h.html#a0411cd49bb5b71852cecd93bcbf0ca2dab1e8211d5344adb743238d82d369331d">GSD_NAME_SIZE</a>;</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;            }</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;            {</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;            search_str += strlen(search_str) + 1;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;            }</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;        }</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160; </div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <span class="comment">// searched past the end of the list, return NULL</span></div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="gsd_8c_source.html#l01563">gsd_make_version()</a>, and <a class="el" href="gsd_8h_source.html#l00111">GSD_NAME_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="gsd_8c_source.html#l02300">gsd_upgrade()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_a081b6fad5e27f4f8cfabd0030af7ebf5_cgraph.svg" width="402" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_a081b6fad5e27f4f8cfabd0030af7ebf5_icgraph.svg" width="367" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="adb92d5142812c19bf4ee33cbde439131"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb92d5142812c19bf4ee33cbde439131">&#9670;&nbsp;</a></span>gsd_upgrade()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_upgrade </td>
          <td>(</td>
          <td class="paramtype">struct gsd_handle *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Upgrade a GSD file to the latest specification.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to an open GSD file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened by <a class="el" href="gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a> with a writable mode. </dd>
<dd>
There are no pending data to write to the file in <a class="el" href="gsd_8h.html#aa03810337c5eebcbe716d8633eaefc5e">gsd_end_frame()</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_INVALID_ARGUMENT: <em>handle</em> is NULL</li>
<li>GSD_ERROR_FILE_MUST_BE_WRITABLE: The file was opened in read-only mode. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="gsd_8c_source.html#l02300">2300</a> of file <a class="el" href="gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    {</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;        {</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;        }</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;open_flags == <a class="code" href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>)</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;        {</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;        }</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;frame_index.size &gt; 0 || handle-&gt;frame_names.n_names &gt; 0)</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        {</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;        }</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160; </div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    <span class="keywordflow">if</span> (handle-&gt;header.gsd_version &lt; <a class="code" href="gsd_8c.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version</a>(2, 0))</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        {</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        <span class="keywordflow">if</span> (handle-&gt;file_index.size &gt; 0)</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;            {</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;            <span class="comment">// make a copy of the file index</span></div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;            <span class="keyword">struct </span>gsd_index_buffer buf;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;            <a class="code" href="gsd_8c.html#a9b05d58560daee2512f03bedf7b2926d">gsd_util_zero_memory</a>(&amp;buf, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> gsd_index_buffer));</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;            <span class="keywordtype">int</span> retval = <a class="code" href="gsd_8c.html#ae1948c93f77d642c4e3797fe7e5f2095">gsd_index_buffer_allocate</a>(&amp;buf, handle-&gt;file_index.size);</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;            <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                {</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;                <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;                }</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;            memcpy(buf.data,</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;                   handle-&gt;file_index.data,</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                   <span class="keyword">sizeof</span>(<span class="keyword">struct</span> gsd_index_entry) * handle-&gt;file_index.size);</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;            buf.size = handle-&gt;file_index.size;</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160; </div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;            <span class="comment">// sort the copy and write it back out to the file</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;            retval = <a class="code" href="gsd_8c.html#a6c20ccb47eed1a3ea9995a47a8eebdbd">gsd_index_buffer_sort</a>(&amp;buf);</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;            <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;                {</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;                <a class="code" href="gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;buf);</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;                <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;                }</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160; </div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;            ssize_t bytes_written = <a class="code" href="gsd_8c.html#a3fb7746d93a1c856ca7ef64fa3548cbe">gsd_io_pwrite_retry</a>(handle-&gt;fd,</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;                                                        buf.data,</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                                                        <span class="keyword">sizeof</span>(<span class="keyword">struct</span> gsd_index_entry) * buf.size,</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                                                        handle-&gt;header.index_location);</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160; </div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;            <span class="keywordflow">if</span> (bytes_written == -1 || bytes_written != <span class="keyword">sizeof</span>(<span class="keyword">struct</span> gsd_index_entry) * buf.size)</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                {</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;                <a class="code" href="gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;buf);</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;                }</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160; </div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;            retval = <a class="code" href="gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;buf);</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;            <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;                {</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;                <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                }</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160; </div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;            <span class="comment">// sync the updated index</span></div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;            retval = fsync(handle-&gt;fd);</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;            <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                {</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;                }</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;            }</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160; </div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        <span class="keywordflow">if</span> (handle-&gt;file_names.n_names &gt; 0)</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;            {</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;            <span class="comment">// compact the name list without changing its size or position on the disk</span></div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;            <span class="keyword">struct </span>gsd_byte_buffer new_name_buf;</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;            <a class="code" href="gsd_8c.html#a9b05d58560daee2512f03bedf7b2926d">gsd_util_zero_memory</a>(&amp;new_name_buf, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> gsd_byte_buffer));</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;            <span class="keywordtype">int</span> retval = <a class="code" href="gsd_8c.html#aeaf487909ab334303fa478cf4a126d6f">gsd_byte_buffer_allocate</a>(&amp;new_name_buf, handle-&gt;file_names.data.reserved);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;            <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;                {</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;                <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;                }</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160; </div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span>* name = <a class="code" href="gsd_8c.html#a081b6fad5e27f4f8cfabd0030af7ebf5">gsd_find_matching_chunk_name</a>(handle, <span class="stringliteral">&quot;&quot;</span>, NULL);</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;            <span class="keywordflow">while</span> (name != NULL)</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;                {</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;                retval = <a class="code" href="gsd_8c.html#a7a717f9dafe011e68434e181c76253af">gsd_byte_buffer_append</a>(&amp;new_name_buf, name, strlen(name) + 1);</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;                <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;                    {</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                    <a class="code" href="gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;new_name_buf);</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                    <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;                    }</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;                name = <a class="code" href="gsd_8c.html#a081b6fad5e27f4f8cfabd0030af7ebf5">gsd_find_matching_chunk_name</a>(handle, <span class="stringliteral">&quot;&quot;</span>, name);</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                }</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160; </div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;            <span class="keywordflow">if</span> (new_name_buf.reserved != handle-&gt;file_names.data.reserved)</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;                {</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                <a class="code" href="gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;new_name_buf);</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c">GSD_ERROR_FILE_CORRUPT</a>;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                }</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160; </div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;            <span class="comment">// write the new names out to disk</span></div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;            ssize_t bytes_written = <a class="code" href="gsd_8c.html#a3fb7746d93a1c856ca7ef64fa3548cbe">gsd_io_pwrite_retry</a>(handle-&gt;fd,</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;                                                        new_name_buf.data,</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;                                                        new_name_buf.reserved,</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;                                                        handle-&gt;header.namelist_location);</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160; </div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;            <span class="keywordflow">if</span> (bytes_written == -1 || bytes_written != new_name_buf.reserved)</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;                {</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;                <a class="code" href="gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;new_name_buf);</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;                }</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160; </div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;            <span class="comment">// swap in the re-organized name buffer</span></div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;            retval = <a class="code" href="gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;handle-&gt;file_names.data);</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;            <span class="keywordflow">if</span> (retval != <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                {</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;                <a class="code" href="gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;new_name_buf);</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;                }</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;            handle-&gt;file_names.data = new_name_buf;</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160; </div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;            <span class="comment">// sync the updated name list</span></div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;            retval = fsync(handle-&gt;fd);</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;            <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                {</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                <a class="code" href="gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;new_name_buf);</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;                }</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;            }</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160; </div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;        <span class="comment">// label the file as a v2.0 file</span></div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;        handle-&gt;header.gsd_version = <a class="code" href="gsd_8c.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version</a>(<a class="code" href="gsd_8c.html#a726ca809ffd3d67ab4b8476646f26635a9e41ab940950d400d353438f87a6f559">GSD_CURRENT_FILE_VERSION</a>, 0);</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160; </div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        <span class="comment">// write the new header out</span></div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;        ssize_t bytes_written</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;            = <a class="code" href="gsd_8c.html#a3fb7746d93a1c856ca7ef64fa3548cbe">gsd_io_pwrite_retry</a>(handle-&gt;fd, &amp;(handle-&gt;header), <span class="keyword">sizeof</span>(<span class="keyword">struct</span> gsd_header), 0);</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        <span class="keywordflow">if</span> (bytes_written != <span class="keyword">sizeof</span>(<span class="keyword">struct</span> gsd_header))</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;            {</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;            }</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160; </div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;        <span class="comment">// sync the updated header</span></div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;        <span class="keywordtype">int</span> retval = fsync(handle-&gt;fd);</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;            {</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;            }</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160; </div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;        <span class="comment">// remap the file index</span></div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;        retval = <a class="code" href="gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;handle-&gt;file_index);</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;            {</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;            }</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160; </div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        retval = <a class="code" href="gsd_8c.html#a6fe75caf6c4df550af2455a0c40bfbdf">gsd_index_buffer_map</a>(&amp;handle-&gt;file_index, handle);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;        <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;            {</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;            }</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        }</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160; </div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>;</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="gsd_8c_source.html#l00463">gsd_byte_buffer_allocate()</a>, <a class="el" href="gsd_8c_source.html#l00491">gsd_byte_buffer_append()</a>, <a class="el" href="gsd_8c_source.html#l00535">gsd_byte_buffer_free()</a>, <a class="el" href="gsd_8c_source.html#l00081">GSD_CURRENT_FILE_VERSION</a>, <a class="el" href="gsd_8h_source.html#l00087">GSD_ERROR_FILE_CORRUPT</a>, <a class="el" href="gsd_8h_source.html#l00078">GSD_ERROR_INVALID_ARGUMENT</a>, <a class="el" href="gsd_8h_source.html#l00075">GSD_ERROR_IO</a>, <a class="el" href="gsd_8c_source.html#l02228">gsd_find_matching_chunk_name()</a>, <a class="el" href="gsd_8c_source.html#l00558">gsd_index_buffer_allocate()</a>, <a class="el" href="gsd_8c_source.html#l00706">gsd_index_buffer_free()</a>, <a class="el" href="gsd_8c_source.html#l00593">gsd_index_buffer_map()</a>, <a class="el" href="gsd_8c_source.html#l00899">gsd_index_buffer_sort()</a>, <a class="el" href="gsd_8c_source.html#l00148">gsd_io_pwrite_retry()</a>, <a class="el" href="gsd_8c_source.html#l01563">gsd_make_version()</a>, <a class="el" href="gsd_8h_source.html#l00062">GSD_OPEN_READONLY</a>, <a class="el" href="gsd_8h_source.html#l00072">GSD_SUCCESS</a>, and <a class="el" href="gsd_8c_source.html#l00130">gsd_util_zero_memory()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gsd_8h_adb92d5142812c19bf4ee33cbde439131_cgraph.svg" width="980" height="658"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="agsd_8c_html_a9e12a38df69cf73fa771b005748cb3e5"><div class="ttname"><a href="gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a></div><div class="ttdeci">static int gsd_index_buffer_free(struct gsd_index_buffer *buf)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00706">gsd.c:706</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07ba84a9d0b912c0f9dd4ef7eda53560253b"><div class="ttname"><a href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba84a9d0b912c0f9dd4ef7eda53560253b">GSD_ERROR_NOT_A_GSD_FILE</a></div><div class="ttdeci">@ GSD_ERROR_NOT_A_GSD_FILE</div><div class="ttdoc">The file is not a GSD file.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00081">gsd.h:81</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a58aacbcfef4ae23382d8b857cfba815a"><div class="ttname"><a href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a58aacbcfef4ae23382d8b857cfba815a">GSD_TYPE_INT32</a></div><div class="ttdeci">@ GSD_TYPE_INT32</div><div class="ttdoc">Signed 32-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00043">gsd.h:43</a></div></div>
<div class="ttc" id="agsd_8h_html_abed82baf7f470b522273a3e37c24c600a7199f456f54bd738f291363298706f4a"><div class="ttname"><a href="gsd_8h.html#abed82baf7f470b522273a3e37c24c600a7199f456f54bd738f291363298706f4a">GSD_RESERVED_BYTES</a></div><div class="ttdeci">@ GSD_RESERVED_BYTES</div><div class="ttdoc">Reserved bytes in the header structure.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00117">gsd.h:117</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a49225daa33e0c1f26dda21d22a6ffb10"><div class="ttname"><a href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a49225daa33e0c1f26dda21d22a6ffb10">GSD_TYPE_UINT32</a></div><div class="ttdeci">@ GSD_TYPE_UINT32</div><div class="ttdoc">Unsigned 32-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00031">gsd.h:31</a></div></div>
<div class="ttc" id="agsd_8c_html_a258b64725f90f60d969752d65fba9850"><div class="ttname"><a href="gsd_8c.html#a258b64725f90f60d969752d65fba9850">gsd_index_buffer_add</a></div><div class="ttdeci">static int gsd_index_buffer_add(struct gsd_index_buffer *buf, struct gsd_index_entry **entry)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00744">gsd.c:744</a></div></div>
<div class="ttc" id="agsd_8h_html_a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205"><div class="ttname"><a href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a></div><div class="ttdeci">@ GSD_OPEN_READONLY</div><div class="ttdoc">Open only for reading.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00062">gsd.h:62</a></div></div>
<div class="ttc" id="agsd_8h_html_a0411cd49bb5b71852cecd93bcbf0ca2dab1e8211d5344adb743238d82d369331d"><div class="ttname"><a href="gsd_8h.html#a0411cd49bb5b71852cecd93bcbf0ca2dab1e8211d5344adb743238d82d369331d">GSD_NAME_SIZE</a></div><div class="ttdeci">@ GSD_NAME_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00111">gsd.h:111</a></div></div>
<div class="ttc" id="agsd_8c_html_acb769baf09c31a5ad6cba95bd348c194"><div class="ttname"><a href="gsd_8c.html#acb769baf09c31a5ad6cba95bd348c194">gsd_initialize_file</a></div><div class="ttdeci">static int gsd_initialize_file(int fd, const char *application, const char *schema, uint32_t schema_version)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l01322">gsd.c:1322</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a6e5c1ccf3040cebc0dbcf562fd4291cb"><div class="ttname"><a href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a6e5c1ccf3040cebc0dbcf562fd4291cb">GSD_TYPE_INT16</a></div><div class="ttdeci">@ GSD_TYPE_INT16</div><div class="ttdoc">Signed 16-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00040">gsd.h:40</a></div></div>
<div class="ttc" id="agsd_8c_html_a081b6fad5e27f4f8cfabd0030af7ebf5"><div class="ttname"><a href="gsd_8c.html#a081b6fad5e27f4f8cfabd0030af7ebf5">gsd_find_matching_chunk_name</a></div><div class="ttdeci">const char * gsd_find_matching_chunk_name(struct gsd_handle *handle, const char *match, const char *prev)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l02228">gsd.c:2228</a></div></div>
<div class="ttc" id="agsd_8c_html_ac159dfbfd790607f85073ad2d8464a8b"><div class="ttname"><a href="gsd_8c.html#ac159dfbfd790607f85073ad2d8464a8b">gsd_initialize_handle</a></div><div class="ttdeci">static int gsd_initialize_handle(struct gsd_handle *handle)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l01401">gsd.c:1401</a></div></div>
<div class="ttc" id="agsd_8h_html_a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61"><div class="ttname"><a href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61">GSD_OPEN_READWRITE</a></div><div class="ttdeci">@ GSD_OPEN_READWRITE</div><div class="ttdoc">Open for both reading and writing.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00059">gsd.h:59</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a43c1b41755ac12b8611b8478eab5f377"><div class="ttname"><a href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a43c1b41755ac12b8611b8478eab5f377">GSD_TYPE_UINT64</a></div><div class="ttdeci">@ GSD_TYPE_UINT64</div><div class="ttdoc">Unsigned 53-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00034">gsd.h:34</a></div></div>
<div class="ttc" id="agsd_8c_html_a3fb7746d93a1c856ca7ef64fa3548cbe"><div class="ttname"><a href="gsd_8c.html#a3fb7746d93a1c856ca7ef64fa3548cbe">gsd_io_pwrite_retry</a></div><div class="ttdeci">static ssize_t gsd_io_pwrite_retry(int fd, const void *buf, size_t count, int64_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00148">gsd.c:148</a></div></div>
<div class="ttc" id="agsd_8c_html_aa1a0a7dcf4015edcadbb47a6451b4a4b"><div class="ttname"><a href="gsd_8c.html#aa1a0a7dcf4015edcadbb47a6451b4a4b">gsd_append_name</a></div><div class="ttdeci">static int gsd_append_name(uint16_t *id, struct gsd_handle *handle, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l01264">gsd.c:1264</a></div></div>
<div class="ttc" id="agsd_8c_html_a6fe75caf6c4df550af2455a0c40bfbdf"><div class="ttname"><a href="gsd_8c.html#a6fe75caf6c4df550af2455a0c40bfbdf">gsd_index_buffer_map</a></div><div class="ttdeci">static int gsd_index_buffer_map(struct gsd_index_buffer *buf, struct gsd_handle *handle)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00593">gsd.c:593</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2"><div class="ttname"><a href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a></div><div class="ttdeci">@ GSD_ERROR_INVALID_ARGUMENT</div><div class="ttdoc">Invalid argument passed to function.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00078">gsd.h:78</a></div></div>
<div class="ttc" id="agsd_8c_html_ae6dddb94661e99e54f6c01b1a443e27f"><div class="ttname"><a href="gsd_8c.html#ae6dddb94661e99e54f6c01b1a443e27f">gsd_expand_file_index</a></div><div class="ttdeci">static int gsd_expand_file_index(struct gsd_handle *handle, size_t size_required)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00933">gsd.c:933</a></div></div>
<div class="ttc" id="agsd_8c_html_ae50726c30c5bf629b6af1ef88020302f"><div class="ttname"><a href="gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a></div><div class="ttdeci">static int gsd_byte_buffer_free(struct gsd_byte_buffer *buf)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00535">gsd.c:535</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64"><div class="ttname"><a href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64">GSD_ERROR_FILE_MUST_BE_WRITABLE</a></div><div class="ttdeci">@ GSD_ERROR_FILE_MUST_BE_WRITABLE</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00098">gsd.h:98</a></div></div>
<div class="ttc" id="agsd_8c_html_a8249dc854c432e55e8ee07a8d3e8546c"><div class="ttname"><a href="gsd_8c.html#a8249dc854c432e55e8ee07a8d3e8546c">gsd_name_id_map_free</a></div><div class="ttdeci">static int gsd_name_id_map_free(struct gsd_name_id_map *map)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00257">gsd.c:257</a></div></div>
<div class="ttc" id="agsd_8c_html_aeaf487909ab334303fa478cf4a126d6f"><div class="ttname"><a href="gsd_8c.html#aeaf487909ab334303fa478cf4a126d6f">gsd_byte_buffer_allocate</a></div><div class="ttdeci">static int gsd_byte_buffer_allocate(struct gsd_byte_buffer *buf, size_t reserve)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00463">gsd.c:463</a></div></div>
<div class="ttc" id="agsd_8c_html_a3ffe758eed9a5bae487f514a0a45e97d"><div class="ttname"><a href="gsd_8c.html#a3ffe758eed9a5bae487f514a0a45e97d">gsd_cmp_index_entry</a></div><div class="ttdeci">static int gsd_cmp_index_entry(const struct gsd_index_entry *a, const struct gsd_index_entry *b)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00774">gsd.c:774</a></div></div>
<div class="ttc" id="agsd_8c_html_a493ef951956c9f98adff89a80ddb3fa6"><div class="ttname"><a href="gsd_8c.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version</a></div><div class="ttdeci">uint32_t gsd_make_version(unsigned int major, unsigned int minor)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l01563">gsd.c:1563</a></div></div>
<div class="ttc" id="agsd_8c_html_ab147cf4d77c10fd8085e5023e9afe55f"><div class="ttname"><a href="gsd_8c.html#ab147cf4d77c10fd8085e5023e9afe55f">gsd_flush_name_buffer</a></div><div class="ttdeci">static int gsd_flush_name_buffer(struct gsd_handle *handle)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l01148">gsd.c:1148</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07ba927545200d5ae6b308d536988ff37637"><div class="ttname"><a href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba927545200d5ae6b308d536988ff37637">GSD_ERROR_MEMORY_ALLOCATION_FAILED</a></div><div class="ttdeci">@ GSD_ERROR_MEMORY_ALLOCATION_FAILED</div><div class="ttdoc">GSD failed to allocated memory.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00090">gsd.h:90</a></div></div>
<div class="ttc" id="agsd_8c_html_a9b05d58560daee2512f03bedf7b2926d"><div class="ttname"><a href="gsd_8c.html#a9b05d58560daee2512f03bedf7b2926d">gsd_util_zero_memory</a></div><div class="ttdeci">static void gsd_util_zero_memory(void *d, size_t size_to_zero)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00130">gsd.c:130</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a5d13ce82d25b294b7300ea013396fb45"><div class="ttname"><a href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a5d13ce82d25b294b7300ea013396fb45">GSD_TYPE_INT8</a></div><div class="ttdeci">@ GSD_TYPE_INT8</div><div class="ttdoc">Signed 8-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00037">gsd.h:37</a></div></div>
<div class="ttc" id="agsd_8c_html_a31b9400272036b121040e9fc0a9e626b"><div class="ttname"><a href="gsd_8c.html#a31b9400272036b121040e9fc0a9e626b">gsd_name_id_map_find</a></div><div class="ttdeci">static uint16_t gsd_name_id_map_find(struct gsd_name_id_map *map, const char *str)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00377">gsd.c:377</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c"><div class="ttname"><a href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c">GSD_ERROR_FILE_CORRUPT</a></div><div class="ttdeci">@ GSD_ERROR_FILE_CORRUPT</div><div class="ttdoc">The GSD file is corrupt.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00087">gsd.h:87</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96"><div class="ttname"><a href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a></div><div class="ttdeci">@ GSD_ERROR_IO</div><div class="ttdoc">IO error. Check errno for details.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00075">gsd.h:75</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07ba4cca403d94a443c160073da8cf26a88b"><div class="ttname"><a href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4cca403d94a443c160073da8cf26a88b">GSD_ERROR_NAMELIST_FULL</a></div><div class="ttdeci">@ GSD_ERROR_NAMELIST_FULL</div><div class="ttdoc">The GSD file cannot store any additional unique data chunk names.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00093">gsd.h:93</a></div></div>
<div class="ttc" id="agsd_8c_html_a7a717f9dafe011e68434e181c76253af"><div class="ttname"><a href="gsd_8c.html#a7a717f9dafe011e68434e181c76253af">gsd_byte_buffer_append</a></div><div class="ttdeci">static int gsd_byte_buffer_append(struct gsd_byte_buffer *buf, const char *data, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00491">gsd.c:491</a></div></div>
<div class="ttc" id="agsd_8c_html_ac1f41abbefbfe35337e7053d766c089b"><div class="ttname"><a href="gsd_8c.html#ac1f41abbefbfe35337e7053d766c089b">gsd_io_pread_retry</a></div><div class="ttdeci">static ssize_t gsd_io_pread_retry(int fd, void *buf, size_t count, int64_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00190">gsd.c:190</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a8f2fc103d16a251246a102c5477fc0be"><div class="ttname"><a href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a8f2fc103d16a251246a102c5477fc0be">GSD_TYPE_FLOAT</a></div><div class="ttdeci">@ GSD_TYPE_FLOAT</div><div class="ttdoc">32-bit floating point number.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00049">gsd.h:49</a></div></div>
<div class="ttc" id="agsd_8c_html_ab1d1a8a5f73b37df0c706f41df3bdd69"><div class="ttname"><a href="gsd_8c.html#ab1d1a8a5f73b37df0c706f41df3bdd69">gsd_sizeof_type</a></div><div class="ttdeci">size_t gsd_sizeof_type(enum gsd_type type)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l02177">gsd.c:2177</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3"><div class="ttname"><a href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a></div><div class="ttdeci">@ GSD_SUCCESS</div><div class="ttdoc">Success.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00072">gsd.h:72</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118addc1aa49964e9df18eca95586854564e"><div class="ttname"><a href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118addc1aa49964e9df18eca95586854564e">GSD_TYPE_UINT8</a></div><div class="ttdeci">@ GSD_TYPE_UINT8</div><div class="ttdoc">Unsigned 8-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00025">gsd.h:25</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a2bf7336e70f8d15921952b6ec177d238"><div class="ttname"><a href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a2bf7336e70f8d15921952b6ec177d238">GSD_TYPE_DOUBLE</a></div><div class="ttdeci">@ GSD_TYPE_DOUBLE</div><div class="ttdoc">64-bit floating point number.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00052">gsd.h:52</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07bac5de89b0da97d4df5b52f18ee0977b7c"><div class="ttname"><a href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07bac5de89b0da97d4df5b52f18ee0977b7c">GSD_ERROR_FILE_MUST_BE_READABLE</a></div><div class="ttdeci">@ GSD_ERROR_FILE_MUST_BE_READABLE</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00103">gsd.h:103</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a154cf53ac1f09d58516ee90c5e50ee9b"><div class="ttname"><a href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a154cf53ac1f09d58516ee90c5e50ee9b">GSD_TYPE_UINT16</a></div><div class="ttdeci">@ GSD_TYPE_UINT16</div><div class="ttdoc">Unsigned 16-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00028">gsd.h:28</a></div></div>
<div class="ttc" id="agsd_8c_html_a6c20ccb47eed1a3ea9995a47a8eebdbd"><div class="ttname"><a href="gsd_8c.html#a6c20ccb47eed1a3ea9995a47a8eebdbd">gsd_index_buffer_sort</a></div><div class="ttdeci">static int gsd_index_buffer_sort(struct gsd_index_buffer *buf)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00899">gsd.c:899</a></div></div>
<div class="ttc" id="agsd_8h_html_a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40"><div class="ttname"><a href="gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a></div><div class="ttdeci">@ GSD_OPEN_APPEND</div><div class="ttdoc">Open only for writing.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00065">gsd.h:65</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118"><div class="ttname"><a href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a></div><div class="ttdeci">gsd_type</div><div class="ttdoc">Identifiers for the gsd data chunk element types.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00022">gsd.h:22</a></div></div>
<div class="ttc" id="agsd_8c_html_a726ca809ffd3d67ab4b8476646f26635a9e41ab940950d400d353438f87a6f559"><div class="ttname"><a href="gsd_8c.html#a726ca809ffd3d67ab4b8476646f26635a9e41ab940950d400d353438f87a6f559">GSD_CURRENT_FILE_VERSION</a></div><div class="ttdeci">@ GSD_CURRENT_FILE_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00081">gsd.c:81</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a25b4572782ed785491f8b5b666692212"><div class="ttname"><a href="gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a25b4572782ed785491f8b5b666692212">GSD_TYPE_INT64</a></div><div class="ttdeci">@ GSD_TYPE_INT64</div><div class="ttdoc">Signed 64-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00046">gsd.h:46</a></div></div>
<div class="ttc" id="agsd_8c_html_a7479046d4d6e15c33cb24034ddd87562"><div class="ttname"><a href="gsd_8c.html#a7479046d4d6e15c33cb24034ddd87562">gsd_get_nframes</a></div><div class="ttdeci">uint64_t gsd_get_nframes(struct gsd_handle *handle)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l02029">gsd.c:2029</a></div></div>
<div class="ttc" id="agsd_8c_html_ae1948c93f77d642c4e3797fe7e5f2095"><div class="ttname"><a href="gsd_8c.html#ae1948c93f77d642c4e3797fe7e5f2095">gsd_index_buffer_allocate</a></div><div class="ttdeci">static int gsd_index_buffer_allocate(struct gsd_index_buffer *buf, size_t reserve)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l00558">gsd.c:558</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07ba72c4d63d4cbec5412ab1ab57716afe80"><div class="ttname"><a href="gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba72c4d63d4cbec5412ab1ab57716afe80">GSD_ERROR_INVALID_GSD_FILE_VERSION</a></div><div class="ttdeci">@ GSD_ERROR_INVALID_GSD_FILE_VERSION</div><div class="ttdoc">The GSD file version cannot be read.</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8h_source.html#l00084">gsd.h:84</a></div></div>
<div class="ttc" id="agsd_8c_html_a61daeaa70162e9bac3d241832b460278"><div class="ttname"><a href="gsd_8c.html#a61daeaa70162e9bac3d241832b460278">gsd_flush_write_buffer</a></div><div class="ttdeci">static int gsd_flush_write_buffer(struct gsd_handle *handle)</div><div class="ttdef"><b>Definition:</b> <a href="gsd_8c_source.html#l01081">gsd.c:1081</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_5619d3ff040d238c5bcfe0ac1235817d.html">data_io</a></li><li class="navelem"><a class="el" href="gsd_8h.html">gsd.h</a></li>
    <li class="footer">Generated on Fri Oct 15 2021 13:17:31 for Bodies in Potential Flow by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
