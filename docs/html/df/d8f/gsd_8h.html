<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bodied in Potential Flow: src/data_io/gsd.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bodied in Potential Flow<span id="projectnumber">&#160;2.0-alpha</span>
   </div>
   <div id="projectbrief">Study dynamics of inertial active matter in a potential fluid (irrotational, incompressible).</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('df/d8f/gsd_8h.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">gsd.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Declare GSD data types and C API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for gsd.h:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d44/gsd_8h__incl.svg" width="266" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../de/d64/gsd_8h__dep__incl.svg" width="826" height="544"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="../../df/d8f/gsd_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d56/structgsd__header.html">gsd_header</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3e/structgsd__name__id__pair.html">gsd_name_id_pair</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d13/structgsd__name__id__map.html">gsd_name_id_map</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4d/structgsd__index__buffer.html">gsd_index_buffer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/dc6/structgsd__byte__buffer.html">gsd_byte_buffer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d77/structgsd__name__buffer.html">gsd_name_buffer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a5813a2a637516567a2b42dc745ec1118"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a> { <br />
&#160;&#160;<a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118addc1aa49964e9df18eca95586854564e">GSD_TYPE_UINT8</a> = 1
, <a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a154cf53ac1f09d58516ee90c5e50ee9b">GSD_TYPE_UINT16</a>
, <a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a49225daa33e0c1f26dda21d22a6ffb10">GSD_TYPE_UINT32</a>
, <a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a43c1b41755ac12b8611b8478eab5f377">GSD_TYPE_UINT64</a>
, <br />
&#160;&#160;<a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a5d13ce82d25b294b7300ea013396fb45">GSD_TYPE_INT8</a>
, <a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a6e5c1ccf3040cebc0dbcf562fd4291cb">GSD_TYPE_INT16</a>
, <a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a58aacbcfef4ae23382d8b857cfba815a">GSD_TYPE_INT32</a>
, <a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a25b4572782ed785491f8b5b666692212">GSD_TYPE_INT64</a>
, <br />
&#160;&#160;<a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a8f2fc103d16a251246a102c5477fc0be">GSD_TYPE_FLOAT</a>
, <a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a2bf7336e70f8d15921952b6ec177d238">GSD_TYPE_DOUBLE</a>
<br />
 }</td></tr>
<tr class="memdesc:a5813a2a637516567a2b42dc745ec1118"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identifiers for the gsd data chunk element types.  <a href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">More...</a><br /></td></tr>
<tr class="separator:a5813a2a637516567a2b42dc745ec1118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23a9970f53fda4e8902697670300ec98"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98">gsd_open_flag</a> { <a class="el" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61">GSD_OPEN_READWRITE</a> = 1
, <a class="el" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>
, <a class="el" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a>
 }</td></tr>
<tr class="memdesc:a23a9970f53fda4e8902697670300ec98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag for GSD file open options.  <a href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98">More...</a><br /></td></tr>
<tr class="separator:a23a9970f53fda4e8902697670300ec98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03a578779769ed7e288df22c6a75f07b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07b">gsd_error</a> { <br />
&#160;&#160;<a class="el" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a> = 0
, <a class="el" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a> = -1
, <a class="el" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a> = -2
, <a class="el" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba84a9d0b912c0f9dd4ef7eda53560253b">GSD_ERROR_NOT_A_GSD_FILE</a> = -3
, <br />
&#160;&#160;<a class="el" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba72c4d63d4cbec5412ab1ab57716afe80">GSD_ERROR_INVALID_GSD_FILE_VERSION</a> = -4
, <a class="el" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c">GSD_ERROR_FILE_CORRUPT</a> = -5
, <a class="el" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba927545200d5ae6b308d536988ff37637">GSD_ERROR_MEMORY_ALLOCATION_FAILED</a> = -6
, <a class="el" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4cca403d94a443c160073da8cf26a88b">GSD_ERROR_NAMELIST_FULL</a> = -7
, <br />
&#160;&#160;<a class="el" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64">GSD_ERROR_FILE_MUST_BE_WRITABLE</a> = -8
, <a class="el" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07bac5de89b0da97d4df5b52f18ee0977b7c">GSD_ERROR_FILE_MUST_BE_READABLE</a> = -9
<br />
 }</td></tr>
<tr class="memdesc:a03a578779769ed7e288df22c6a75f07b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error return values.  <a href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07b">More...</a><br /></td></tr>
<tr class="separator:a03a578779769ed7e288df22c6a75f07b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06fc87d81c62e9abb8790b6e5713c55b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="../../df/d8f/gsd_8h.html#a06fc87d81c62e9abb8790b6e5713c55bab1e8211d5344adb743238d82d369331d">GSD_NAME_SIZE</a> = 64
 }</td></tr>
<tr class="separator:a06fc87d81c62e9abb8790b6e5713c55b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf764cbdea00d65edcd07bb9953ad2b7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="../../df/d8f/gsd_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a7199f456f54bd738f291363298706f4a">GSD_RESERVED_BYTES</a> = 80
 }</td></tr>
<tr class="separator:adf764cbdea00d65edcd07bb9953ad2b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a493ef951956c9f98adff89a80ddb3fa6"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version</a> (unsigned int major, unsigned int minor)</td></tr>
<tr class="separator:a493ef951956c9f98adff89a80ddb3fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58654880dd98b2bc32e429810b7d2623"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#a58654880dd98b2bc32e429810b7d2623">gsd_create</a> (const char *fname, const char *application, const char *schema, uint32_t schema_version)</td></tr>
<tr class="separator:a58654880dd98b2bc32e429810b7d2623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a157d14770365926fde71a7787871bc63"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#a157d14770365926fde71a7787871bc63">gsd_create_and_open</a> (struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *handle, const char *fname, const char *application, const char *schema, uint32_t schema_version, enum <a class="el" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98">gsd_open_flag</a> flags, int exclusive_create)</td></tr>
<tr class="separator:a157d14770365926fde71a7787871bc63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0add799755285c1108a7b97b2ed7e00"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open</a> (struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *handle, const char *fname, enum <a class="el" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98">gsd_open_flag</a> flags)</td></tr>
<tr class="separator:ae0add799755285c1108a7b97b2ed7e00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02ac7984034069d508b1c7ccbe702bac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#a02ac7984034069d508b1c7ccbe702bac">gsd_truncate</a> (struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *handle)</td></tr>
<tr class="separator:a02ac7984034069d508b1c7ccbe702bac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08b4f76e3e19eda194def8c0c4b2b7a3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#a08b4f76e3e19eda194def8c0c4b2b7a3">gsd_close</a> (struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *handle)</td></tr>
<tr class="separator:a08b4f76e3e19eda194def8c0c4b2b7a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa03810337c5eebcbe716d8633eaefc5e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#aa03810337c5eebcbe716d8633eaefc5e">gsd_end_frame</a> (struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *handle)</td></tr>
<tr class="separator:aa03810337c5eebcbe716d8633eaefc5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae22447904b925f284bf987fae448488a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#ae22447904b925f284bf987fae448488a">gsd_write_chunk</a> (struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *handle, const char *name, enum <a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a> type, uint64_t N, uint32_t M, uint8_t flags, const void *data)</td></tr>
<tr class="separator:ae22447904b925f284bf987fae448488a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac00249e8c3030557711beb337c8424dd"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#ac00249e8c3030557711beb337c8424dd">gsd_find_chunk</a> (struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *handle, uint64_t frame, const char *name)</td></tr>
<tr class="separator:ac00249e8c3030557711beb337c8424dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2db2e3e8a72948bf413e7f09469ec8a6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#a2db2e3e8a72948bf413e7f09469ec8a6">gsd_read_chunk</a> (struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *handle, void *data, const struct <a class="el" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a> *chunk)</td></tr>
<tr class="separator:a2db2e3e8a72948bf413e7f09469ec8a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7479046d4d6e15c33cb24034ddd87562"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#a7479046d4d6e15c33cb24034ddd87562">gsd_get_nframes</a> (struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *handle)</td></tr>
<tr class="separator:a7479046d4d6e15c33cb24034ddd87562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1d1a8a5f73b37df0c706f41df3bdd69"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#ab1d1a8a5f73b37df0c706f41df3bdd69">gsd_sizeof_type</a> (enum <a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a> type)</td></tr>
<tr class="separator:ab1d1a8a5f73b37df0c706f41df3bdd69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6f823bc40d0a28be983368adb42783e"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#ad6f823bc40d0a28be983368adb42783e">gsd_find_matching_chunk_name</a> (struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *handle, const char *match, const char *prev)</td></tr>
<tr class="separator:ad6f823bc40d0a28be983368adb42783e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb92d5142812c19bf4ee33cbde439131"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8f/gsd_8h.html#adb92d5142812c19bf4ee33cbde439131">gsd_upgrade</a> (struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *handle)</td></tr>
<tr class="separator:adb92d5142812c19bf4ee33cbde439131"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Declare GSD data types and C API. </p>

<p class="definition">Definition in file <a class="el" href="../../df/d8f/gsd_8h_source.html">gsd.h</a>.</p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a5813a2a637516567a2b42dc745ec1118" name="a5813a2a637516567a2b42dc745ec1118"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5813a2a637516567a2b42dc745ec1118">&#9670;&nbsp;</a></span>gsd_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identifiers for the gsd data chunk element types. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118addc1aa49964e9df18eca95586854564e" name="a5813a2a637516567a2b42dc745ec1118addc1aa49964e9df18eca95586854564e"></a>GSD_TYPE_UINT8&#160;</td><td class="fielddoc"><p >Unsigned 8-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a154cf53ac1f09d58516ee90c5e50ee9b" name="a5813a2a637516567a2b42dc745ec1118a154cf53ac1f09d58516ee90c5e50ee9b"></a>GSD_TYPE_UINT16&#160;</td><td class="fielddoc"><p >Unsigned 16-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a49225daa33e0c1f26dda21d22a6ffb10" name="a5813a2a637516567a2b42dc745ec1118a49225daa33e0c1f26dda21d22a6ffb10"></a>GSD_TYPE_UINT32&#160;</td><td class="fielddoc"><p >Unsigned 32-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a43c1b41755ac12b8611b8478eab5f377" name="a5813a2a637516567a2b42dc745ec1118a43c1b41755ac12b8611b8478eab5f377"></a>GSD_TYPE_UINT64&#160;</td><td class="fielddoc"><p >Unsigned 53-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a5d13ce82d25b294b7300ea013396fb45" name="a5813a2a637516567a2b42dc745ec1118a5d13ce82d25b294b7300ea013396fb45"></a>GSD_TYPE_INT8&#160;</td><td class="fielddoc"><p >Signed 8-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a6e5c1ccf3040cebc0dbcf562fd4291cb" name="a5813a2a637516567a2b42dc745ec1118a6e5c1ccf3040cebc0dbcf562fd4291cb"></a>GSD_TYPE_INT16&#160;</td><td class="fielddoc"><p >Signed 16-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a58aacbcfef4ae23382d8b857cfba815a" name="a5813a2a637516567a2b42dc745ec1118a58aacbcfef4ae23382d8b857cfba815a"></a>GSD_TYPE_INT32&#160;</td><td class="fielddoc"><p >Signed 32-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a25b4572782ed785491f8b5b666692212" name="a5813a2a637516567a2b42dc745ec1118a25b4572782ed785491f8b5b666692212"></a>GSD_TYPE_INT64&#160;</td><td class="fielddoc"><p >Signed 64-bit integer. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a8f2fc103d16a251246a102c5477fc0be" name="a5813a2a637516567a2b42dc745ec1118a8f2fc103d16a251246a102c5477fc0be"></a>GSD_TYPE_FLOAT&#160;</td><td class="fielddoc"><p >32-bit floating point number. </p>
</td></tr>
<tr><td class="fieldname"><a id="a5813a2a637516567a2b42dc745ec1118a2bf7336e70f8d15921952b6ec177d238" name="a5813a2a637516567a2b42dc745ec1118a2bf7336e70f8d15921952b6ec177d238"></a>GSD_TYPE_DOUBLE&#160;</td><td class="fielddoc"><p >64-bit floating point number. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../df/d8f/gsd_8h_source.html#l00022">22</a> of file <a class="el" href="../../df/d8f/gsd_8h_source.html">gsd.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    {</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118addc1aa49964e9df18eca95586854564e">GSD_TYPE_UINT8</a> = 1,</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a154cf53ac1f09d58516ee90c5e50ee9b">GSD_TYPE_UINT16</a>,</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a49225daa33e0c1f26dda21d22a6ffb10">GSD_TYPE_UINT32</a>,</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a43c1b41755ac12b8611b8478eab5f377">GSD_TYPE_UINT64</a>,</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a5d13ce82d25b294b7300ea013396fb45">GSD_TYPE_INT8</a>,</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a6e5c1ccf3040cebc0dbcf562fd4291cb">GSD_TYPE_INT16</a>,</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a58aacbcfef4ae23382d8b857cfba815a">GSD_TYPE_INT32</a>,</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a25b4572782ed785491f8b5b666692212">GSD_TYPE_INT64</a>,</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a8f2fc103d16a251246a102c5477fc0be">GSD_TYPE_FLOAT</a>,</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a2bf7336e70f8d15921952b6ec177d238">GSD_TYPE_DOUBLE</a></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    };</div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a154cf53ac1f09d58516ee90c5e50ee9b"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a154cf53ac1f09d58516ee90c5e50ee9b">GSD_TYPE_UINT16</a></div><div class="ttdeci">@ GSD_TYPE_UINT16</div><div class="ttdoc">Unsigned 16-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00028">gsd.h:28</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a25b4572782ed785491f8b5b666692212"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a25b4572782ed785491f8b5b666692212">GSD_TYPE_INT64</a></div><div class="ttdeci">@ GSD_TYPE_INT64</div><div class="ttdoc">Signed 64-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00046">gsd.h:46</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a2bf7336e70f8d15921952b6ec177d238"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a2bf7336e70f8d15921952b6ec177d238">GSD_TYPE_DOUBLE</a></div><div class="ttdeci">@ GSD_TYPE_DOUBLE</div><div class="ttdoc">64-bit floating point number.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00053">gsd.h:52</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a43c1b41755ac12b8611b8478eab5f377"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a43c1b41755ac12b8611b8478eab5f377">GSD_TYPE_UINT64</a></div><div class="ttdeci">@ GSD_TYPE_UINT64</div><div class="ttdoc">Unsigned 53-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00034">gsd.h:34</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a49225daa33e0c1f26dda21d22a6ffb10"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a49225daa33e0c1f26dda21d22a6ffb10">GSD_TYPE_UINT32</a></div><div class="ttdeci">@ GSD_TYPE_UINT32</div><div class="ttdoc">Unsigned 32-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00031">gsd.h:31</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a58aacbcfef4ae23382d8b857cfba815a"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a58aacbcfef4ae23382d8b857cfba815a">GSD_TYPE_INT32</a></div><div class="ttdeci">@ GSD_TYPE_INT32</div><div class="ttdoc">Signed 32-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00043">gsd.h:43</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a5d13ce82d25b294b7300ea013396fb45"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a5d13ce82d25b294b7300ea013396fb45">GSD_TYPE_INT8</a></div><div class="ttdeci">@ GSD_TYPE_INT8</div><div class="ttdoc">Signed 8-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00037">gsd.h:37</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a6e5c1ccf3040cebc0dbcf562fd4291cb"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a6e5c1ccf3040cebc0dbcf562fd4291cb">GSD_TYPE_INT16</a></div><div class="ttdeci">@ GSD_TYPE_INT16</div><div class="ttdoc">Signed 16-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00040">gsd.h:40</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118a8f2fc103d16a251246a102c5477fc0be"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a8f2fc103d16a251246a102c5477fc0be">GSD_TYPE_FLOAT</a></div><div class="ttdeci">@ GSD_TYPE_FLOAT</div><div class="ttdoc">32-bit floating point number.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00049">gsd.h:49</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118addc1aa49964e9df18eca95586854564e"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118addc1aa49964e9df18eca95586854564e">GSD_TYPE_UINT8</a></div><div class="ttdeci">@ GSD_TYPE_UINT8</div><div class="ttdoc">Unsigned 8-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00025">gsd.h:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a23a9970f53fda4e8902697670300ec98" name="a23a9970f53fda4e8902697670300ec98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23a9970f53fda4e8902697670300ec98">&#9670;&nbsp;</a></span>gsd_open_flag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98">gsd_open_flag</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flag for GSD file open options. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61" name="a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61"></a>GSD_OPEN_READWRITE&#160;</td><td class="fielddoc"><p >Open for both reading and writing. </p>
</td></tr>
<tr><td class="fieldname"><a id="a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205" name="a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205"></a>GSD_OPEN_READONLY&#160;</td><td class="fielddoc"><p >Open only for reading. </p>
</td></tr>
<tr><td class="fieldname"><a id="a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40" name="a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40"></a>GSD_OPEN_APPEND&#160;</td><td class="fielddoc"><p >Open only for writing. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../df/d8f/gsd_8h_source.html#l00056">56</a> of file <a class="el" href="../../df/d8f/gsd_8h_source.html">gsd.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    {</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61">GSD_OPEN_READWRITE</a> = 1,</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span> </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>,</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    };</div>
<div class="ttc" id="agsd_8h_html_a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61">GSD_OPEN_READWRITE</a></div><div class="ttdeci">@ GSD_OPEN_READWRITE</div><div class="ttdoc">Open for both reading and writing.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00059">gsd.h:59</a></div></div>
<div class="ttc" id="agsd_8h_html_a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a></div><div class="ttdeci">@ GSD_OPEN_READONLY</div><div class="ttdoc">Open only for reading.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00062">gsd.h:62</a></div></div>
<div class="ttc" id="agsd_8h_html_a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a></div><div class="ttdeci">@ GSD_OPEN_APPEND</div><div class="ttdoc">Open only for writing.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00066">gsd.h:65</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a03a578779769ed7e288df22c6a75f07b" name="a03a578779769ed7e288df22c6a75f07b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03a578779769ed7e288df22c6a75f07b">&#9670;&nbsp;</a></span>gsd_error</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07b">gsd_error</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Error return values. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3" name="a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3"></a>GSD_SUCCESS&#160;</td><td class="fielddoc"><p >Success. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96" name="a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96"></a>GSD_ERROR_IO&#160;</td><td class="fielddoc"><p >IO error. Check <code>errno</code> for details. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2" name="a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2"></a>GSD_ERROR_INVALID_ARGUMENT&#160;</td><td class="fielddoc"><p >Invalid argument passed to function. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07ba84a9d0b912c0f9dd4ef7eda53560253b" name="a03a578779769ed7e288df22c6a75f07ba84a9d0b912c0f9dd4ef7eda53560253b"></a>GSD_ERROR_NOT_A_GSD_FILE&#160;</td><td class="fielddoc"><p >The file is not a GSD file. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07ba72c4d63d4cbec5412ab1ab57716afe80" name="a03a578779769ed7e288df22c6a75f07ba72c4d63d4cbec5412ab1ab57716afe80"></a>GSD_ERROR_INVALID_GSD_FILE_VERSION&#160;</td><td class="fielddoc"><p >The GSD file version cannot be read. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c" name="a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c"></a>GSD_ERROR_FILE_CORRUPT&#160;</td><td class="fielddoc"><p >The GSD file is corrupt. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07ba927545200d5ae6b308d536988ff37637" name="a03a578779769ed7e288df22c6a75f07ba927545200d5ae6b308d536988ff37637"></a>GSD_ERROR_MEMORY_ALLOCATION_FAILED&#160;</td><td class="fielddoc"><p >GSD failed to allocated memory. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07ba4cca403d94a443c160073da8cf26a88b" name="a03a578779769ed7e288df22c6a75f07ba4cca403d94a443c160073da8cf26a88b"></a>GSD_ERROR_NAMELIST_FULL&#160;</td><td class="fielddoc"><p >The GSD file cannot store any additional unique data chunk names. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64" name="a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64"></a>GSD_ERROR_FILE_MUST_BE_WRITABLE&#160;</td><td class="fielddoc"><p >This API call requires that the GSD file opened in with the mode GSD_OPEN_APPEND or GSD_OPEN_READWRITE. </p>
</td></tr>
<tr><td class="fieldname"><a id="a03a578779769ed7e288df22c6a75f07bac5de89b0da97d4df5b52f18ee0977b7c" name="a03a578779769ed7e288df22c6a75f07bac5de89b0da97d4df5b52f18ee0977b7c"></a>GSD_ERROR_FILE_MUST_BE_READABLE&#160;</td><td class="fielddoc"><p >This API call requires that the GSD file opened the mode GSD_OPEN_READ or GSD_OPEN_READWRITE. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../df/d8f/gsd_8h_source.html#l00069">69</a> of file <a class="el" href="../../df/d8f/gsd_8h_source.html">gsd.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    {</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a> = 0,</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a> = -1,</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a> = -2,</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span> </div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba84a9d0b912c0f9dd4ef7eda53560253b">GSD_ERROR_NOT_A_GSD_FILE</a> = -3,</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span> </div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba72c4d63d4cbec5412ab1ab57716afe80">GSD_ERROR_INVALID_GSD_FILE_VERSION</a> = -4,</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c">GSD_ERROR_FILE_CORRUPT</a> = -5,</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba927545200d5ae6b308d536988ff37637">GSD_ERROR_MEMORY_ALLOCATION_FAILED</a> = -6,</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4cca403d94a443c160073da8cf26a88b">GSD_ERROR_NAMELIST_FULL</a> = -7,</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span> </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64">GSD_ERROR_FILE_MUST_BE_WRITABLE</a> = -8,</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07bac5de89b0da97d4df5b52f18ee0977b7c">GSD_ERROR_FILE_MUST_BE_READABLE</a> = -9,</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    };</div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a></div><div class="ttdeci">@ GSD_SUCCESS</div><div class="ttdoc">Success.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00072">gsd.h:72</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c">GSD_ERROR_FILE_CORRUPT</a></div><div class="ttdeci">@ GSD_ERROR_FILE_CORRUPT</div><div class="ttdoc">The GSD file is corrupt.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00087">gsd.h:87</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07ba4cca403d94a443c160073da8cf26a88b"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4cca403d94a443c160073da8cf26a88b">GSD_ERROR_NAMELIST_FULL</a></div><div class="ttdeci">@ GSD_ERROR_NAMELIST_FULL</div><div class="ttdoc">The GSD file cannot store any additional unique data chunk names.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00093">gsd.h:93</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07ba72c4d63d4cbec5412ab1ab57716afe80"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba72c4d63d4cbec5412ab1ab57716afe80">GSD_ERROR_INVALID_GSD_FILE_VERSION</a></div><div class="ttdeci">@ GSD_ERROR_INVALID_GSD_FILE_VERSION</div><div class="ttdoc">The GSD file version cannot be read.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00084">gsd.h:84</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a></div><div class="ttdeci">@ GSD_ERROR_IO</div><div class="ttdoc">IO error. Check errno for details.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00075">gsd.h:75</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07ba84a9d0b912c0f9dd4ef7eda53560253b"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba84a9d0b912c0f9dd4ef7eda53560253b">GSD_ERROR_NOT_A_GSD_FILE</a></div><div class="ttdeci">@ GSD_ERROR_NOT_A_GSD_FILE</div><div class="ttdoc">The file is not a GSD file.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00081">gsd.h:81</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07ba927545200d5ae6b308d536988ff37637"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba927545200d5ae6b308d536988ff37637">GSD_ERROR_MEMORY_ALLOCATION_FAILED</a></div><div class="ttdeci">@ GSD_ERROR_MEMORY_ALLOCATION_FAILED</div><div class="ttdoc">GSD failed to allocated memory.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00090">gsd.h:90</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a></div><div class="ttdeci">@ GSD_ERROR_INVALID_ARGUMENT</div><div class="ttdoc">Invalid argument passed to function.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00078">gsd.h:78</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64">GSD_ERROR_FILE_MUST_BE_WRITABLE</a></div><div class="ttdeci">@ GSD_ERROR_FILE_MUST_BE_WRITABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00098">gsd.h:98</a></div></div>
<div class="ttc" id="agsd_8h_html_a03a578779769ed7e288df22c6a75f07bac5de89b0da97d4df5b52f18ee0977b7c"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07bac5de89b0da97d4df5b52f18ee0977b7c">GSD_ERROR_FILE_MUST_BE_READABLE</a></div><div class="ttdeci">@ GSD_ERROR_FILE_MUST_BE_READABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00103">gsd.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a06fc87d81c62e9abb8790b6e5713c55b" name="a06fc87d81c62e9abb8790b6e5713c55b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06fc87d81c62e9abb8790b6e5713c55b">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a06fc87d81c62e9abb8790b6e5713c55bab1e8211d5344adb743238d82d369331d" name="a06fc87d81c62e9abb8790b6e5713c55bab1e8211d5344adb743238d82d369331d"></a>GSD_NAME_SIZE&#160;</td><td class="fielddoc"><p >v1 file: Size of a GSD name in memory. v2 file: The name buffer size is a multiple of GSD_NAME_SIZE. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../df/d8f/gsd_8h_source.html#l00106">106</a> of file <a class="el" href="../../df/d8f/gsd_8h_source.html">gsd.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    {</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a06fc87d81c62e9abb8790b6e5713c55bab1e8211d5344adb743238d82d369331d">GSD_NAME_SIZE</a> = 64</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    };</div>
<div class="ttc" id="agsd_8h_html_a06fc87d81c62e9abb8790b6e5713c55bab1e8211d5344adb743238d82d369331d"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a06fc87d81c62e9abb8790b6e5713c55bab1e8211d5344adb743238d82d369331d">GSD_NAME_SIZE</a></div><div class="ttdeci">@ GSD_NAME_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00112">gsd.h:111</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adf764cbdea00d65edcd07bb9953ad2b7" name="adf764cbdea00d65edcd07bb9953ad2b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf764cbdea00d65edcd07bb9953ad2b7">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="adf764cbdea00d65edcd07bb9953ad2b7a7199f456f54bd738f291363298706f4a" name="adf764cbdea00d65edcd07bb9953ad2b7a7199f456f54bd738f291363298706f4a"></a>GSD_RESERVED_BYTES&#160;</td><td class="fielddoc"><p >Reserved bytes in the header structure. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../df/d8f/gsd_8h_source.html#l00114">114</a> of file <a class="el" href="../../df/d8f/gsd_8h_source.html">gsd.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    {</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a7199f456f54bd738f291363298706f4a">GSD_RESERVED_BYTES</a> = 80</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    };</div>
<div class="ttc" id="agsd_8h_html_adf764cbdea00d65edcd07bb9953ad2b7a7199f456f54bd738f291363298706f4a"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a7199f456f54bd738f291363298706f4a">GSD_RESERVED_BYTES</a></div><div class="ttdeci">@ GSD_RESERVED_BYTES</div><div class="ttdoc">Reserved bytes in the header structure.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00118">gsd.h:117</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a493ef951956c9f98adff89a80ddb3fa6" name="a493ef951956c9f98adff89a80ddb3fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a493ef951956c9f98adff89a80ddb3fa6">&#9670;&nbsp;</a></span>gsd_make_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t gsd_make_version </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>major</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>minor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Specify a version</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">major</td><td>major version </td></tr>
    <tr><td class="paramname">minor</td><td>minor version</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a packed version number aaaa.bbbb suitable for storing in a gsd file version entry. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01563">1563</a> of file <a class="el" href="../../dc/dcb/gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>    {</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>    <span class="keywordflow">return</span> major &lt;&lt; (<span class="keyword">sizeof</span>(uint32_t) * 4) | minor;</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01264">gsd_append_name()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02039">gsd_find_chunk()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02228">gsd_find_matching_chunk_name()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01322">gsd_initialize_file()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01401">gsd_initialize_handle()</a>, and <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02300">gsd_upgrade()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_a493ef951956c9f98adff89a80ddb3fa6_icgraph.svg" width="1055" height="570"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a58654880dd98b2bc32e429810b7d2623" name="a58654880dd98b2bc32e429810b7d2623"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58654880dd98b2bc32e429810b7d2623">&#9670;&nbsp;</a></span>gsd_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>application</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>schema</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>schema_version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create a GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fname</td><td>File name. </td></tr>
    <tr><td class="paramname">application</td><td>Generating application name (truncated to 63 chars). </td></tr>
    <tr><td class="paramname">schema</td><td>Schema name for data to be written in this GSD file (truncated to 63 chars). </td></tr>
    <tr><td class="paramname">schema_version</td><td>Version of the scheme data to be written (make with <a class="el" href="../../df/d8f/gsd_8h.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version()</a>).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section post"><dt>Postcondition</dt><dd>Create an empty gsd file in a file of the given name. Overwrite any existing file at that location.</dd></dl>
<p>The generated gsd file is not opened. Call <a class="el" href="../../df/d8f/gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a> to open it for writing.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno). </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01568">1568</a> of file <a class="el" href="../../dc/dcb/gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>    {</div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>    <span class="keywordtype">int</span> extra_flags = 0;</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span><span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>    extra_flags = _O_BINARY;</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span> </div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>    <span class="comment">// create the file</span></div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>    <span class="keywordtype">int</span> fd = open(fname,</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>                  O_RDWR | O_CREAT | O_TRUNC | extra_flags,</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>                  S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP);</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>    <span class="keywordtype">int</span> retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#acb769baf09c31a5ad6cba95bd348c194">gsd_initialize_file</a>(fd, application, schema, schema_version);</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>    close(fd);</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>    <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>    }</div>
<div class="ttc" id="agsd_8c_html_acb769baf09c31a5ad6cba95bd348c194"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#acb769baf09c31a5ad6cba95bd348c194">gsd_initialize_file</a></div><div class="ttdeci">static int gsd_initialize_file(int fd, const char *application, const char *schema, uint32_t schema_version)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l01322">gsd.c:1322</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01322">gsd_initialize_file()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_a58654880dd98b2bc32e429810b7d2623_cgraph.svg" width="475" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a157d14770365926fde71a7787871bc63" name="a157d14770365926fde71a7787871bc63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a157d14770365926fde71a7787871bc63">&#9670;&nbsp;</a></span>gsd_create_and_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_create_and_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>application</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>schema</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>schema_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98">gsd_open_flag</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>exclusive_create</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create and open a GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to open. </td></tr>
    <tr><td class="paramname">fname</td><td>File name. </td></tr>
    <tr><td class="paramname">application</td><td>Generating application name (truncated to 63 chars). </td></tr>
    <tr><td class="paramname">schema</td><td>Schema name for data to be written in this GSD file (truncated to 63 chars). </td></tr>
    <tr><td class="paramname">schema_version</td><td>Version of the scheme data to be written (make with <a class="el" href="../../df/d8f/gsd_8h.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version()</a>). </td></tr>
    <tr><td class="paramname">flags</td><td>Either GSD_OPEN_READWRITE, or GSD_OPEN_APPEND. </td></tr>
    <tr><td class="paramname">exclusive_create</td><td>Set to non-zero to force exclusive creation of the file.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section post"><dt>Postcondition</dt><dd>Create an empty gsd file with the given name. Overwrite any existing file at that location.</dd></dl>
<p>Open the generated gsd file in <em>handle</em>.</p>
<p >The file descriptor is closed if there when an error opening the file.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_NOT_A_GSD_FILE: Not a GSD file.</li>
<li>GSD_ERROR_INVALID_GSD_FILE_VERSION: Invalid GSD file version.</li>
<li>GSD_ERROR_FILE_CORRUPT: Corrupt file.</li>
<li>GSD_ERROR_MEMORY_ALLOCATION_FAILED: Unable to allocate memory. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01587">1587</a> of file <a class="el" href="../../dc/dcb/gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>    {</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>    <span class="comment">// zero the handle</span></div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>    <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9b05d58560daee2512f03bedf7b2926d">gsd_util_zero_memory</a>(handle, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a>));</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span> </div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>    <span class="keywordtype">int</span> extra_flags = 0;</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span><span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>    extra_flags = _O_BINARY;</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span> </div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>    <span class="comment">// set the open flags in the handle</span></div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>    <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61">GSD_OPEN_READWRITE</a>)</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>        {</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a37ddf6d53fc8c4f3eff247508fcc814b">open_flags</a> = <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61">GSD_OPEN_READWRITE</a>;</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>        }</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>)</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>        {</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>;</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>        }</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a>)</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>        {</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a37ddf6d53fc8c4f3eff247508fcc814b">open_flags</a> = <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a>;</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>        }</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span> </div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>    <span class="comment">// set the exclusive create bit</span></div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>    <span class="keywordflow">if</span> (exclusive_create)</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>        {</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>        extra_flags |= O_EXCL;</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>        }</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span> </div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>    <span class="comment">// create the file</span></div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>    handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a> = open(fname,</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>                      O_RDWR | O_CREAT | O_TRUNC | extra_flags,</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>                      S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP);</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>    <span class="keywordtype">int</span> retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#acb769baf09c31a5ad6cba95bd348c194">gsd_initialize_file</a>(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>, application, schema, schema_version);</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>    <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>        {</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>        close(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>);</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>        }</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span> </div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>    retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ac159dfbfd790607f85073ad2d8464a8b">gsd_initialize_handle</a>(handle);</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>    <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>        {</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>        close(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>);</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>        }</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>    <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>    }</div>
<div class="ttc" id="agsd_8c_html_a9b05d58560daee2512f03bedf7b2926d"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#a9b05d58560daee2512f03bedf7b2926d">gsd_util_zero_memory</a></div><div class="ttdeci">static void gsd_util_zero_memory(void *d, size_t size_to_zero)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00130">gsd.c:130</a></div></div>
<div class="ttc" id="agsd_8c_html_ac159dfbfd790607f85073ad2d8464a8b"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#ac159dfbfd790607f85073ad2d8464a8b">gsd_initialize_handle</a></div><div class="ttdeci">static int gsd_initialize_handle(struct gsd_handle *handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l01401">gsd.c:1401</a></div></div>
<div class="ttc" id="astructgsd__handle_html"><div class="ttname"><a href="../../d0/dc2/structgsd__handle.html">gsd_handle</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00281">gsd.h:282</a></div></div>
<div class="ttc" id="astructgsd__handle_html_a37ddf6d53fc8c4f3eff247508fcc814b"><div class="ttname"><a href="../../d0/dc2/structgsd__handle.html#a37ddf6d53fc8c4f3eff247508fcc814b">gsd_handle::open_flags</a></div><div class="ttdeci">enum gsd_open_flag open_flags</div><div class="ttdoc">Flags passed to gsd_open() when opening this handle.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00314">gsd.h:314</a></div></div>
<div class="ttc" id="astructgsd__handle_html_a38e4bf4d587e525904d615ce49352592"><div class="ttname"><a href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">gsd_handle::fd</a></div><div class="ttdeci">int fd</div><div class="ttdoc">File descriptor.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00284">gsd.h:284</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8f/gsd_8h_source.html#l00284">gsd_handle::fd</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00187">gsd_index_entry::flags</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00098">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01322">gsd_initialize_file()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01401">gsd_initialize_handle()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00065">GSD_OPEN_APPEND</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00062">GSD_OPEN_READONLY</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00059">GSD_OPEN_READWRITE</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00130">gsd_util_zero_memory()</a>, and <a class="el" href="../../df/d8f/gsd_8h_source.html#l00314">gsd_handle::open_flags</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_a157d14770365926fde71a7787871bc63_cgraph.svg" width="988" height="443"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ae0add799755285c1108a7b97b2ed7e00" name="ae0add799755285c1108a7b97b2ed7e00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0add799755285c1108a7b97b2ed7e00">&#9670;&nbsp;</a></span>gsd_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98">gsd_open_flag</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Open a GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to open. </td></tr>
    <tr><td class="paramname">fname</td><td>File name to open. </td></tr>
    <tr><td class="paramname">flags</td><td>Either GSD_OPEN_READWRITE, GSD_OPEN_READONLY, or GSD_OPEN_APPEND.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>The file name <em>fname</em> is a GSD file.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>Open a GSD file and populates the handle for use by API calls.</dd></dl>
<p>The file descriptor is closed if there is an error opening the file.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_NOT_A_GSD_FILE: Not a GSD file.</li>
<li>GSD_ERROR_INVALID_GSD_FILE_VERSION: Invalid GSD file version.</li>
<li>GSD_ERROR_FILE_CORRUPT: Corrupt file.</li>
<li>GSD_ERROR_MEMORY_ALLOCATION_FAILED: Unable to allocate memory. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01642">1642</a> of file <a class="el" href="../../dc/dcb/gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>    {</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>    <span class="comment">// zero the handle</span></div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>    <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9b05d58560daee2512f03bedf7b2926d">gsd_util_zero_memory</a>(handle, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a>));</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span> </div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>    <span class="keywordtype">int</span> extra_flags = 0;</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span><span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>    extra_flags = _O_BINARY;</div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span> </div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>    <span class="comment">// open the file</span></div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>    <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61">GSD_OPEN_READWRITE</a>)</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>        {</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a> = open(fname, O_RDWR | extra_flags);</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a37ddf6d53fc8c4f3eff247508fcc814b">open_flags</a> = <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a0f98b5182423243f10f362ddfb6d7d61">GSD_OPEN_READWRITE</a>;</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>        }</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>)</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>        {</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a> = open(fname, O_RDONLY | extra_flags);</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a37ddf6d53fc8c4f3eff247508fcc814b">open_flags</a> = <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>;</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>        }</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a>)</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>        {</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a> = open(fname, O_RDWR | extra_flags);</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a37ddf6d53fc8c4f3eff247508fcc814b">open_flags</a> = <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a>;</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>        }</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span> </div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>    <span class="keywordtype">int</span> retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ac159dfbfd790607f85073ad2d8464a8b">gsd_initialize_handle</a>(handle);</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>    <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>        {</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>        close(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>);</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>        }</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>    <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8f/gsd_8h_source.html#l00284">gsd_handle::fd</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00187">gsd_index_entry::flags</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01401">gsd_initialize_handle()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00065">GSD_OPEN_APPEND</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00062">GSD_OPEN_READONLY</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00059">GSD_OPEN_READWRITE</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00130">gsd_util_zero_memory()</a>, and <a class="el" href="../../df/d8f/gsd_8h_source.html#l00314">gsd_handle::open_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df3/GSDUtil_8cpp_source.html#l00008">GSDUtil::GSDUtil()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_ae0add799755285c1108a7b97b2ed7e00_cgraph.svg" width="926" height="342"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_ae0add799755285c1108a7b97b2ed7e00_icgraph.svg" width="264" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a02ac7984034069d508b1c7ccbe702bac" name="a02ac7984034069d508b1c7ccbe702bac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02ac7984034069d508b1c7ccbe702bac">&#9670;&nbsp;</a></span>gsd_truncate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_truncate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Truncate a GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Open GSD file to truncate.</td></tr>
  </table>
  </dd>
</dl>
<p>After truncating, a file will have no frames and no data chunks. The file size will be that of a newly created gsd file. The application, schema, and schema version metadata will be kept. Truncate does not close and reopen the file, so it is suitable for writing restart files on Lustre file systems without any metadata access.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_NOT_A_GSD_FILE: Not a GSD file.</li>
<li>GSD_ERROR_INVALID_GSD_FILE_VERSION: Invalid GSD file version.</li>
<li>GSD_ERROR_FILE_CORRUPT: Corrupt file.</li>
<li>GSD_ERROR_MEMORY_ALLOCATION_FAILED: Unable to allocate memory. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01677">1677</a> of file <a class="el" href="../../dc/dcb/gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>    {</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>        {</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>        }</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a37ddf6d53fc8c4f3eff247508fcc814b">open_flags</a> == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>)</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>        {</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>;</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>        }</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span> </div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>    <span class="keywordtype">int</span> retval = 0;</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span> </div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>    <span class="comment">// deallocate indices</span></div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#acb6f5e1288792803b529b8549e6dc1ce">frame_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a1be9afcc4aead755f0c37f93088fab1c">reserved</a> &gt; 0)</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>        {</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>        retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#acb6f5e1288792803b529b8549e6dc1ce">frame_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>);</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>        <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>            {</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>            }</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>        }</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span> </div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a1be9afcc4aead755f0c37f93088fab1c">reserved</a> &gt; 0)</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>        {</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>        retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>);</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>        <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>            {</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>            }</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>        }</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span> </div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>    retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a8249dc854c432e55e8ee07a8d3e8546c">gsd_name_id_map_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a17f63ed60cc1f9e456bf2d5ce301ecf8">name_map</a>);</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>    <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>        {</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>        }</div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span> </div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>    retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>);</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>    <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>        {</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>        }</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span> </div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a51a1e266f6d7d1aafdfd54822fc226b1">reserved</a> &gt; 0)</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>        {</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>        retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>);</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>        <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>            {</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>            }</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>        }</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span> </div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a501968a30f0b06f4b7cb69c115648627">buffer_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a51a1e266f6d7d1aafdfd54822fc226b1">reserved</a> &gt; 0)</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>        {</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>        retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a501968a30f0b06f4b7cb69c115648627">buffer_index</a>);</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>        <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>            {</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>            }</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>        }</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span> </div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a7ae49d668bbd61ce9d022acf5e5a9e76">write_buffer</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a1be9afcc4aead755f0c37f93088fab1c">reserved</a> &gt; 0)</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>        {</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>        retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a7ae49d668bbd61ce9d022acf5e5a9e76">write_buffer</a>);</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>        <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>            {</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span>            }</div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>        }</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span> </div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>    <span class="comment">// keep a copy of the old header</span></div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d5/d56/structgsd__header.html">gsd_header</a> old_header = handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a0b9b163d35869b802a8937e958ea410c">header</a>;</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>    retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#acb769baf09c31a5ad6cba95bd348c194">gsd_initialize_file</a>(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>,</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>                                 old_header.<a class="code hl_variable" href="../../d5/d56/structgsd__header.html#ad23681ad38d32167197a22e75a2605b1">application</a>,</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>                                 old_header.<a class="code hl_variable" href="../../d5/d56/structgsd__header.html#a31b0992efad0ec0288ce7064f773dbda">schema</a>,</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>                                 old_header.<a class="code hl_variable" href="../../d5/d56/structgsd__header.html#a1740d644c468c25cbade9ee0ee1c1a63">schema_version</a>);</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span> </div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>    <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>        {</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>        }</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span> </div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ac159dfbfd790607f85073ad2d8464a8b">gsd_initialize_handle</a>(handle);</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>    }</div>
<div class="ttc" id="agsd_8c_html_a8249dc854c432e55e8ee07a8d3e8546c"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#a8249dc854c432e55e8ee07a8d3e8546c">gsd_name_id_map_free</a></div><div class="ttdeci">static int gsd_name_id_map_free(struct gsd_name_id_map *map)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00257">gsd.c:257</a></div></div>
<div class="ttc" id="agsd_8c_html_a9e12a38df69cf73fa771b005748cb3e5"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a></div><div class="ttdeci">static int gsd_index_buffer_free(struct gsd_index_buffer *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00706">gsd.c:706</a></div></div>
<div class="ttc" id="agsd_8c_html_ae50726c30c5bf629b6af1ef88020302f"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a></div><div class="ttdeci">static int gsd_byte_buffer_free(struct gsd_byte_buffer *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00535">gsd.c:535</a></div></div>
<div class="ttc" id="astructgsd__byte__buffer_html_a1be9afcc4aead755f0c37f93088fab1c"><div class="ttname"><a href="../../d5/dc6/structgsd__byte__buffer.html#a1be9afcc4aead755f0c37f93088fab1c">gsd_byte_buffer::reserved</a></div><div class="ttdeci">size_t reserved</div><div class="ttdoc">Number of bytes available in the buffer.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00255">gsd.h:255</a></div></div>
<div class="ttc" id="astructgsd__handle_html_a0b9b163d35869b802a8937e958ea410c"><div class="ttname"><a href="../../d0/dc2/structgsd__handle.html#a0b9b163d35869b802a8937e958ea410c">gsd_handle::header</a></div><div class="ttdeci">struct gsd_header header</div><div class="ttdoc">The file header.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00287">gsd.h:287</a></div></div>
<div class="ttc" id="astructgsd__handle_html_a17f63ed60cc1f9e456bf2d5ce301ecf8"><div class="ttname"><a href="../../d0/dc2/structgsd__handle.html#a17f63ed60cc1f9e456bf2d5ce301ecf8">gsd_handle::name_map</a></div><div class="ttdeci">struct gsd_name_id_map name_map</div><div class="ttdoc">Access the names in the namelist.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00317">gsd.h:317</a></div></div>
<div class="ttc" id="astructgsd__handle_html_a501968a30f0b06f4b7cb69c115648627"><div class="ttname"><a href="../../d0/dc2/structgsd__handle.html#a501968a30f0b06f4b7cb69c115648627">gsd_handle::buffer_index</a></div><div class="ttdeci">struct gsd_index_buffer buffer_index</div><div class="ttdoc">Buffered index entries to append to the current frame.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00296">gsd.h:296</a></div></div>
<div class="ttc" id="astructgsd__handle_html_a6b5215cbf0bdf8172f66166ef4fda7a8"><div class="ttname"><a href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">gsd_handle::file_index</a></div><div class="ttdeci">struct gsd_index_buffer file_index</div><div class="ttdoc">Mapped data chunk index.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00290">gsd.h:290</a></div></div>
<div class="ttc" id="astructgsd__handle_html_a7ae49d668bbd61ce9d022acf5e5a9e76"><div class="ttname"><a href="../../d0/dc2/structgsd__handle.html#a7ae49d668bbd61ce9d022acf5e5a9e76">gsd_handle::write_buffer</a></div><div class="ttdeci">struct gsd_byte_buffer write_buffer</div><div class="ttdoc">Buffered write data.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00299">gsd.h:299</a></div></div>
<div class="ttc" id="astructgsd__handle_html_a80988eb386cc7af15aa4c6329e9f6217"><div class="ttname"><a href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">gsd_handle::file_names</a></div><div class="ttdeci">struct gsd_name_buffer file_names</div><div class="ttdoc">List of names stored in the file.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00302">gsd.h:302</a></div></div>
<div class="ttc" id="astructgsd__handle_html_a9086141add0c7be99bcfed3bfd6dadac"><div class="ttname"><a href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">gsd_handle::frame_index</a></div><div class="ttdeci">struct gsd_index_buffer frame_index</div><div class="ttdoc">Index entries to append to the current frame.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00293">gsd.h:293</a></div></div>
<div class="ttc" id="astructgsd__handle_html_acb6f5e1288792803b529b8549e6dc1ce"><div class="ttname"><a href="../../d0/dc2/structgsd__handle.html#acb6f5e1288792803b529b8549e6dc1ce">gsd_handle::frame_names</a></div><div class="ttdeci">struct gsd_name_buffer frame_names</div><div class="ttdoc">List of names added in the current frame.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00305">gsd.h:305</a></div></div>
<div class="ttc" id="astructgsd__header_html"><div class="ttname"><a href="../../d5/d56/structgsd__header.html">gsd_header</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00127">gsd.h:128</a></div></div>
<div class="ttc" id="astructgsd__header_html_a1740d644c468c25cbade9ee0ee1c1a63"><div class="ttname"><a href="../../d5/d56/structgsd__header.html#a1740d644c468c25cbade9ee0ee1c1a63">gsd_header::schema_version</a></div><div class="ttdeci">uint32_t schema_version</div><div class="ttdoc">Schema version: from gsd_make_version().</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00145">gsd.h:145</a></div></div>
<div class="ttc" id="astructgsd__header_html_a31b0992efad0ec0288ce7064f773dbda"><div class="ttname"><a href="../../d5/d56/structgsd__header.html#a31b0992efad0ec0288ce7064f773dbda">gsd_header::schema</a></div><div class="ttdeci">char schema[GSD_NAME_SIZE]</div><div class="ttdoc">Name of data schema.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00154">gsd.h:154</a></div></div>
<div class="ttc" id="astructgsd__header_html_ad23681ad38d32167197a22e75a2605b1"><div class="ttname"><a href="../../d5/d56/structgsd__header.html#ad23681ad38d32167197a22e75a2605b1">gsd_header::application</a></div><div class="ttdeci">char application[GSD_NAME_SIZE]</div><div class="ttdoc">Name of the application that generated this file.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00151">gsd.h:151</a></div></div>
<div class="ttc" id="astructgsd__index__buffer_html_a51a1e266f6d7d1aafdfd54822fc226b1"><div class="ttname"><a href="../../dc/d4d/structgsd__index__buffer.html#a51a1e266f6d7d1aafdfd54822fc226b1">gsd_index_buffer::reserved</a></div><div class="ttdeci">size_t reserved</div><div class="ttdoc">Number of entries available in the buffer.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00232">gsd.h:232</a></div></div>
<div class="ttc" id="astructgsd__name__buffer_html_a78255aa2f730ed427a11debe378087c8"><div class="ttname"><a href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">gsd_name_buffer::data</a></div><div class="ttdeci">struct gsd_byte_buffer data</div><div class="ttdoc">Data.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00266">gsd.h:266</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8f/gsd_8h_source.html#l00151">gsd_header::application</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00296">gsd_handle::buffer_index</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00266">gsd_name_buffer::data</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00284">gsd_handle::fd</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00290">gsd_handle::file_index</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00302">gsd_handle::file_names</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00293">gsd_handle::frame_index</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00305">gsd_handle::frame_names</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00535">gsd_byte_buffer_free()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00098">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00078">GSD_ERROR_INVALID_ARGUMENT</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00706">gsd_index_buffer_free()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01322">gsd_initialize_file()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01401">gsd_initialize_handle()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00257">gsd_name_id_map_free()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00062">GSD_OPEN_READONLY</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00072">GSD_SUCCESS</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00287">gsd_handle::header</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00317">gsd_handle::name_map</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00314">gsd_handle::open_flags</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00232">gsd_index_buffer::reserved</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00255">gsd_byte_buffer::reserved</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00154">gsd_header::schema</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00145">gsd_header::schema_version</a>, and <a class="el" href="../../df/d8f/gsd_8h_source.html#l00299">gsd_handle::write_buffer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df3/GSDUtil_8cpp_source.html#l00075">GSDUtil::truncateGSD()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_a02ac7984034069d508b1c7ccbe702bac_cgraph.svg" width="952" height="443"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_a02ac7984034069d508b1c7ccbe702bac_icgraph.svg" width="312" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a08b4f76e3e19eda194def8c0c4b2b7a3" name="a08b4f76e3e19eda194def8c0c4b2b7a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08b4f76e3e19eda194def8c0c4b2b7a3">&#9670;&nbsp;</a></span>gsd_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Close a GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>GSD file to close.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened by <a class="el" href="../../df/d8f/gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a>. </dd>
<dd>
<a class="el" href="../../df/d8f/gsd_8h.html#aa03810337c5eebcbe716d8633eaefc5e">gsd_end_frame()</a> has been called since the last call to <a class="el" href="../../df/d8f/gsd_8h.html#ae22447904b925f284bf987fae448488a">gsd_write_chunk()</a>.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The file is closed. </dd>
<dd>
<em>handle</em> is freed and can no longer be used.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Ensure that all <a class="el" href="../../df/d8f/gsd_8h.html#ae22447904b925f284bf987fae448488a">gsd_write_chunk()</a> calls are committed with <a class="el" href="../../df/d8f/gsd_8h.html#aa03810337c5eebcbe716d8633eaefc5e">gsd_end_frame()</a> before closing the file.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_INVALID_ARGUMENT: <em>handle</em> is NULL. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01763">1763</a> of file <a class="el" href="../../dc/dcb/gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>    {</div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>        {</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>        }</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span> </div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>    <span class="comment">// save the fd so we can use it after freeing the handle</span></div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>    <span class="keywordtype">int</span> fd = handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>;</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span> </div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>    <span class="keywordtype">int</span> retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>);</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>    <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>        {</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>        }</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span> </div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a51a1e266f6d7d1aafdfd54822fc226b1">reserved</a> &gt; 0)</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>        {</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>        retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>);</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>        <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>            {</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>            }</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>        }</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span> </div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a501968a30f0b06f4b7cb69c115648627">buffer_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a51a1e266f6d7d1aafdfd54822fc226b1">reserved</a> &gt; 0)</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>        {</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>        retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a501968a30f0b06f4b7cb69c115648627">buffer_index</a>);</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>        <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>            {</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>            }</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>        }</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span> </div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a7ae49d668bbd61ce9d022acf5e5a9e76">write_buffer</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a1be9afcc4aead755f0c37f93088fab1c">reserved</a> &gt; 0)</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>        {</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>        retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a7ae49d668bbd61ce9d022acf5e5a9e76">write_buffer</a>);</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>        <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>            {</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>            }</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>        }</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span> </div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>    retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a8249dc854c432e55e8ee07a8d3e8546c">gsd_name_id_map_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a17f63ed60cc1f9e456bf2d5ce301ecf8">name_map</a>);</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>    <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>        {</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>        }</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span> </div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#acb6f5e1288792803b529b8549e6dc1ce">frame_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a1be9afcc4aead755f0c37f93088fab1c">reserved</a> &gt; 0)</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>        {</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#acb6f5e1288792803b529b8549e6dc1ce">frame_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#aee7f806d610d9c4b8e0f045024d4e1f6">n_names</a> = 0;</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>        retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#acb6f5e1288792803b529b8549e6dc1ce">frame_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>);</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>        <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>            {</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>            }</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>        }</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span> </div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a1be9afcc4aead755f0c37f93088fab1c">reserved</a> &gt; 0)</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>        {</div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#aee7f806d610d9c4b8e0f045024d4e1f6">n_names</a> = 0;</div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>        retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>);</div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>        <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>            {</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>            }</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>        }</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span> </div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>    <span class="comment">// close the file</span></div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>    retval = close(fd);</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>    <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>        {</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>        }</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span> </div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>;</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>    }</div>
<div class="ttc" id="astructgsd__name__buffer_html_aee7f806d610d9c4b8e0f045024d4e1f6"><div class="ttname"><a href="../../d4/d77/structgsd__name__buffer.html#aee7f806d610d9c4b8e0f045024d4e1f6">gsd_name_buffer::n_names</a></div><div class="ttdeci">size_t n_names</div><div class="ttdoc">Number of names in the list.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00269">gsd.h:269</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8f/gsd_8h_source.html#l00296">gsd_handle::buffer_index</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00266">gsd_name_buffer::data</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00284">gsd_handle::fd</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00290">gsd_handle::file_index</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00302">gsd_handle::file_names</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00293">gsd_handle::frame_index</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00305">gsd_handle::frame_names</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00535">gsd_byte_buffer_free()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00078">GSD_ERROR_INVALID_ARGUMENT</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00075">GSD_ERROR_IO</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00706">gsd_index_buffer_free()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00257">gsd_name_id_map_free()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00072">GSD_SUCCESS</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00269">gsd_name_buffer::n_names</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00317">gsd_handle::name_map</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00232">gsd_index_buffer::reserved</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00255">gsd_byte_buffer::reserved</a>, and <a class="el" href="../../df/d8f/gsd_8h_source.html#l00299">gsd_handle::write_buffer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d4a/systemData_8cpp_source.html#l00028">systemData::~systemData()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_a08b4f76e3e19eda194def8c0c4b2b7a3_cgraph.svg" width="512" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_a08b4f76e3e19eda194def8c0c4b2b7a3_icgraph.svg" width="319" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa03810337c5eebcbe716d8633eaefc5e" name="aa03810337c5eebcbe716d8633eaefc5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa03810337c5eebcbe716d8633eaefc5e">&#9670;&nbsp;</a></span>gsd_end_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_end_frame </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Commit the current frame and increment the frame counter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to an open GSD file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened by <a class="el" href="../../df/d8f/gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a>. </dd>
<dd>
<a class="el" href="../../df/d8f/gsd_8h.html#ae22447904b925f284bf987fae448488a">gsd_write_chunk()</a> has been called at least once since the last call to <a class="el" href="../../df/d8f/gsd_8h.html#aa03810337c5eebcbe716d8633eaefc5e">gsd_end_frame()</a>.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The current frame counter is increased by 1 and cached indexes are written to disk.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_INVALID_ARGUMENT: <em>handle</em> is NULL.</li>
<li>GSD_ERROR_FILE_MUST_BE_WRITABLE: The file was opened read-only.</li>
<li>GSD_ERROR_MEMORY_ALLOCATION_FAILED: Unable to allocate memory. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01842">1842</a> of file <a class="el" href="../../dc/dcb/gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>    {</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>        {</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>        }</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a37ddf6d53fc8c4f3eff247508fcc814b">open_flags</a> == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>)</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>        {</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>;</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>        }</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span> </div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>    <span class="comment">// increment the frame counter</span></div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>    handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a144dc0976a1fe2f895423495689daea5">cur_frame</a>++;</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span> </div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>    <span class="comment">// flush the namelist buffer</span></div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>    <span class="keywordtype">int</span> retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ab147cf4d77c10fd8085e5023e9afe55f">gsd_flush_name_buffer</a>(handle);</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>    <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>        {</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>        }</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span> </div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>    <span class="comment">// flush the write buffer</span></div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>    retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a61daeaa70162e9bac3d241832b460278">gsd_flush_write_buffer</a>(handle);</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>    <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>        {</div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>        <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>        }</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span> </div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>    <span class="comment">// write the frame index to the file</span></div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a> &gt; 0)</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>        {</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>        <span class="comment">// ensure there is enough space in the index</span></div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>        <span class="keywordflow">if</span> ((handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a> + handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a>) &gt; handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a51a1e266f6d7d1aafdfd54822fc226b1">reserved</a>)</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>            {</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>            <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ae6dddb94661e99e54f6c01b1a443e27f">gsd_expand_file_index</a>(handle, handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a> + handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a>);</div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>            }</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span> </div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>        <span class="comment">// sort the index before writing</span></div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>        retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a6c20ccb47eed1a3ea9995a47a8eebdbd">gsd_index_buffer_sort</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>);</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>        <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>            {</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>            }</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span> </div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>        <span class="comment">// write the frame index entries to the file</span></div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>        int64_t write_pos = handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a0b9b163d35869b802a8937e958ea410c">header</a>.<a class="code hl_variable" href="../../d5/d56/structgsd__header.html#a89d5af9234f456010e16116452064b78">index_location</a></div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>                            + <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code hl_struct" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a>) * handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a>;</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span> </div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>        <span class="keywordtype">size_t</span> bytes_to_write = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code hl_struct" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a>) * handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a>;</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>        ssize_t bytes_written</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>            = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a3fb7746d93a1c856ca7ef64fa3548cbe">gsd_io_pwrite_retry</a>(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>, handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a8731f4ca2105be1c3efc1d0b5d6e8908">data</a>, bytes_to_write, write_pos);</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span> </div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>        <span class="keywordflow">if</span> (bytes_written == -1 || bytes_written != bytes_to_write)</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>            {</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>            }</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span> </div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span><span class="preprocessor">#if !GSD_USE_MMAP</span></div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span>        <span class="comment">// add the entries to the file index</span></div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>        memcpy(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a8731f4ca2105be1c3efc1d0b5d6e8908">data</a> + handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a>,</div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>               handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a8731f4ca2105be1c3efc1d0b5d6e8908">data</a>,</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>               <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a>) * handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a>);</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span> </div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>        <span class="comment">// update size of file index</span></div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a> += handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a>;</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span> </div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>        <span class="comment">// clear the frame index</span></div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a> = 0;</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>        }</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span> </div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>;</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>    }</div>
<div class="ttc" id="agsd_8c_html_a3fb7746d93a1c856ca7ef64fa3548cbe"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#a3fb7746d93a1c856ca7ef64fa3548cbe">gsd_io_pwrite_retry</a></div><div class="ttdeci">static ssize_t gsd_io_pwrite_retry(int fd, const void *buf, size_t count, int64_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00148">gsd.c:148</a></div></div>
<div class="ttc" id="agsd_8c_html_a61daeaa70162e9bac3d241832b460278"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#a61daeaa70162e9bac3d241832b460278">gsd_flush_write_buffer</a></div><div class="ttdeci">static int gsd_flush_write_buffer(struct gsd_handle *handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l01081">gsd.c:1081</a></div></div>
<div class="ttc" id="agsd_8c_html_a6c20ccb47eed1a3ea9995a47a8eebdbd"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#a6c20ccb47eed1a3ea9995a47a8eebdbd">gsd_index_buffer_sort</a></div><div class="ttdeci">static int gsd_index_buffer_sort(struct gsd_index_buffer *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00899">gsd.c:899</a></div></div>
<div class="ttc" id="agsd_8c_html_ab147cf4d77c10fd8085e5023e9afe55f"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#ab147cf4d77c10fd8085e5023e9afe55f">gsd_flush_name_buffer</a></div><div class="ttdeci">static int gsd_flush_name_buffer(struct gsd_handle *handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l01148">gsd.c:1148</a></div></div>
<div class="ttc" id="agsd_8c_html_ae6dddb94661e99e54f6c01b1a443e27f"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#ae6dddb94661e99e54f6c01b1a443e27f">gsd_expand_file_index</a></div><div class="ttdeci">static int gsd_expand_file_index(struct gsd_handle *handle, size_t size_required)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00933">gsd.c:933</a></div></div>
<div class="ttc" id="astructgsd__handle_html_a144dc0976a1fe2f895423495689daea5"><div class="ttname"><a href="../../d0/dc2/structgsd__handle.html#a144dc0976a1fe2f895423495689daea5">gsd_handle::cur_frame</a></div><div class="ttdeci">uint64_t cur_frame</div><div class="ttdoc">The index of the last frame in the file.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00308">gsd.h:308</a></div></div>
<div class="ttc" id="astructgsd__header_html_a89d5af9234f456010e16116452064b78"><div class="ttname"><a href="../../d5/d56/structgsd__header.html#a89d5af9234f456010e16116452064b78">gsd_header::index_location</a></div><div class="ttdeci">uint64_t index_location</div><div class="ttdoc">Location of the chunk index in the file.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00133">gsd.h:133</a></div></div>
<div class="ttc" id="astructgsd__index__buffer_html_a42b83ab7239cc24da11719b8d0354e37"><div class="ttname"><a href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">gsd_index_buffer::size</a></div><div class="ttdeci">size_t size</div><div class="ttdoc">Number of entries in the buffer.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00229">gsd.h:229</a></div></div>
<div class="ttc" id="astructgsd__index__buffer_html_a8731f4ca2105be1c3efc1d0b5d6e8908"><div class="ttname"><a href="../../dc/d4d/structgsd__index__buffer.html#a8731f4ca2105be1c3efc1d0b5d6e8908">gsd_index_buffer::data</a></div><div class="ttdeci">struct gsd_index_entry * data</div><div class="ttdoc">Indices in the buffer.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00226">gsd.h:226</a></div></div>
<div class="ttc" id="astructgsd__index__entry_html"><div class="ttname"><a href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00166">gsd.h:167</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8f/gsd_8h_source.html#l00308">gsd_handle::cur_frame</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00226">gsd_index_buffer::data</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00284">gsd_handle::fd</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00290">gsd_handle::file_index</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00293">gsd_handle::frame_index</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00098">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00078">GSD_ERROR_INVALID_ARGUMENT</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00075">GSD_ERROR_IO</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00933">gsd_expand_file_index()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01148">gsd_flush_name_buffer()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01081">gsd_flush_write_buffer()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00899">gsd_index_buffer_sort()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00148">gsd_io_pwrite_retry()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00062">GSD_OPEN_READONLY</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00072">GSD_SUCCESS</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00287">gsd_handle::header</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00133">gsd_header::index_location</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00314">gsd_handle::open_flags</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00232">gsd_index_buffer::reserved</a>, and <a class="el" href="../../df/d8f/gsd_8h_source.html#l00229">gsd_index_buffer::size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df3/GSDUtil_8cpp_source.html#l00456">GSDUtil::writeFrame()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_aa03810337c5eebcbe716d8633eaefc5e_cgraph.svg" width="978" height="544"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_aa03810337c5eebcbe716d8633eaefc5e_icgraph.svg" width="318" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ae22447904b925f284bf987fae448488a" name="ae22447904b925f284bf987fae448488a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae22447904b925f284bf987fae448488a">&#9670;&nbsp;</a></span>gsd_write_chunk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_write_chunk </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>N</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>M</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Write a data chunk to the current frame</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to an open GSD file. </td></tr>
    <tr><td class="paramname">name</td><td>Name of the data chunk. </td></tr>
    <tr><td class="paramname">type</td><td>type ID that identifies the type of data in <em>data</em>. </td></tr>
    <tr><td class="paramname">N</td><td>Number of rows in the data. </td></tr>
    <tr><td class="paramname">M</td><td>Number of columns in the data. </td></tr>
    <tr><td class="paramname">flags</td><td>set to 0, non-zero values reserved for future use. </td></tr>
    <tr><td class="paramname">data</td><td>Data buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened by <a class="el" href="../../df/d8f/gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a>. </dd>
<dd>
<em>name</em> is a unique name for data chunks in the given frame. </dd>
<dd>
data is allocated and contains at least <code>N * M * gsd_sizeof_type(type)</code> bytes.</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The given data chunk is written to the end of the file and its location is updated in the in-memory index.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the GSD file is version 1.0, the chunk name is truncated to 63 bytes. GSD version 2.0 files support arbitrarily long names.</dd>
<dd>
<em>N</em> == 0 is allowed. When <em>N</em> is 0, <em>data</em> may be NULL.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_INVALID_ARGUMENT: <em>handle</em> is NULL, <em>N</em> == 0, <em>M</em> == 0, <em>type</em> is invalid, or flags* != 0.</li>
<li>GSD_ERROR_FILE_MUST_BE_WRITABLE: The file was opened read-only.</li>
<li>GSD_ERROR_NAMELIST_FULL: The file cannot store any additional unique chunk names.</li>
<li>GSD_ERROR_MEMORY_ALLOCATION_FAILED: failed to allocate memory. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01916">1916</a> of file <a class="el" href="../../dc/dcb/gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>    {</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>    <span class="comment">// validate input</span></div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>    <span class="keywordflow">if</span> (N &gt; 0 &amp;&amp; data == NULL)</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>        {</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>        }</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>    <span class="keywordflow">if</span> (M == 0)</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>        {</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>        }</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a37ddf6d53fc8c4f3eff247508fcc814b">open_flags</a> == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>)</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>        {</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa5cbc2efac6a7d90f89b616e791eac64">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>;</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>        }</div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>    <span class="keywordflow">if</span> (flags != 0)</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>        {</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>        }</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span> </div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>    uint16_t <span class="keywordtype">id</span> = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a31b9400272036b121040e9fc0a9e626b">gsd_name_id_map_find</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a17f63ed60cc1f9e456bf2d5ce301ecf8">name_map</a>, name);</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == UINT16_MAX)</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>        {</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>        <span class="comment">// not found, append to the index</span></div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>        <span class="keywordtype">int</span> retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#aa1a0a7dcf4015edcadbb47a6451b4a4b">gsd_append_name</a>(&amp;<span class="keywordtype">id</span>, handle, name);</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>        <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>            {</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>            }</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span> </div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>        <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == UINT16_MAX)</div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>            {</div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>            <span class="comment">// this should never happen</span></div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4cca403d94a443c160073da8cf26a88b">GSD_ERROR_NAMELIST_FULL</a>;</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>            }</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>        }</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span> </div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a> entry;</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>    <span class="comment">// populate fields in the entry&#39;s data</span></div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>    <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9b05d58560daee2512f03bedf7b2926d">gsd_util_zero_memory</a>(&amp;entry, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a>));</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>    entry.frame = handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a144dc0976a1fe2f895423495689daea5">cur_frame</a>;</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>    entry.id = <a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#aa7ed270380c0d8074232aad5bb32bfb4">id</a>;</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>    entry.type = (uint8_t)<a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#aebddbeda0dacc7125308440c46b9230a">type</a>;</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>    entry.N = <a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#ae913d46842b10fe8b5b74da3a7075726">N</a>;</div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>    entry.M = <a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#acbd3b797c1d179affc5fe279260b40f2">M</a>;</div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>    <span class="keywordtype">size_t</span> size = <a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#ae913d46842b10fe8b5b74da3a7075726">N</a> * <a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#acbd3b797c1d179affc5fe279260b40f2">M</a> * <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ab1d1a8a5f73b37df0c706f41df3bdd69">gsd_sizeof_type</a>(<a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#aebddbeda0dacc7125308440c46b9230a">type</a>);</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span> </div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>    <span class="comment">// decide whether to write this chunk to the buffer or straight to disk</span></div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>    <span class="keywordflow">if</span> (size &lt; handle-&gt;write_buffer.reserved / 2)</div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>        {</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>        <span class="comment">// flush the buffer if this entry won&#39;t fit</span></div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>        <span class="keywordflow">if</span> (size &gt; (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a7ae49d668bbd61ce9d022acf5e5a9e76">write_buffer</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a1be9afcc4aead755f0c37f93088fab1c">reserved</a> - handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a7ae49d668bbd61ce9d022acf5e5a9e76">write_buffer</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a3630961b7d45df2885cdd887e4b83b60">size</a>))</div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>            {</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>            <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a61daeaa70162e9bac3d241832b460278">gsd_flush_write_buffer</a>(handle);</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>            }</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span> </div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>        entry.location = handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a7ae49d668bbd61ce9d022acf5e5a9e76">write_buffer</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a3630961b7d45df2885cdd887e4b83b60">size</a>;</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span> </div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>        <span class="comment">// add an entry to the buffer index</span></div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>        <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a>* index_entry;</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span> </div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>        <span class="keywordtype">int</span> retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a258b64725f90f60d969752d65fba9850">gsd_index_buffer_add</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a501968a30f0b06f4b7cb69c115648627">buffer_index</a>, &amp;index_entry);</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>        <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>            {</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>            }</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>        *index_entry = entry;</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span> </div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>        <span class="comment">// add the data to the write buffer</span></div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>        <span class="keywordflow">if</span> (size &gt; 0)</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>            {</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>            retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a7a717f9dafe011e68434e181c76253af">gsd_byte_buffer_append</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a7ae49d668bbd61ce9d022acf5e5a9e76">write_buffer</a>, data, size);</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>            <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>                {</div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>                <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>                }</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>            }</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>        }</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>        {</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>        <span class="comment">// add an entry to the frame index</span></div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>        <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a>* index_entry;</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span> </div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>        <span class="keywordtype">int</span> retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a258b64725f90f60d969752d65fba9850">gsd_index_buffer_add</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>, &amp;index_entry);</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>        <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>            {</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>            }</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>        *index_entry = entry;</div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span> </div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>        <span class="comment">// find the location at the end of the file for the chunk</span></div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>        index_entry-&gt;<a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#a70e15b9094a3a22954bba035496d83bf">location</a> = handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#ac35aad0eef4a5844ecc4141041fa9243">file_size</a>;</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span> </div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>        <span class="comment">// write the data</span></div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>        ssize_t bytes_written = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a3fb7746d93a1c856ca7ef64fa3548cbe">gsd_io_pwrite_retry</a>(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>, data, size, index_entry-&gt;<a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#a70e15b9094a3a22954bba035496d83bf">location</a>);</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>        <span class="keywordflow">if</span> (bytes_written == -1 || bytes_written != size)</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>            {</div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>            }</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span> </div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>        <span class="comment">// update the file_size in the handle</span></div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#ac35aad0eef4a5844ecc4141041fa9243">file_size</a> += bytes_written;</div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>        }</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span> </div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>;</div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>    }</div>
<div class="ttc" id="agsd_8c_html_a258b64725f90f60d969752d65fba9850"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#a258b64725f90f60d969752d65fba9850">gsd_index_buffer_add</a></div><div class="ttdeci">static int gsd_index_buffer_add(struct gsd_index_buffer *buf, struct gsd_index_entry **entry)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00744">gsd.c:744</a></div></div>
<div class="ttc" id="agsd_8c_html_a31b9400272036b121040e9fc0a9e626b"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#a31b9400272036b121040e9fc0a9e626b">gsd_name_id_map_find</a></div><div class="ttdeci">static uint16_t gsd_name_id_map_find(struct gsd_name_id_map *map, const char *str)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00377">gsd.c:377</a></div></div>
<div class="ttc" id="agsd_8c_html_a7a717f9dafe011e68434e181c76253af"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#a7a717f9dafe011e68434e181c76253af">gsd_byte_buffer_append</a></div><div class="ttdeci">static int gsd_byte_buffer_append(struct gsd_byte_buffer *buf, const char *data, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00491">gsd.c:491</a></div></div>
<div class="ttc" id="agsd_8c_html_aa1a0a7dcf4015edcadbb47a6451b4a4b"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#aa1a0a7dcf4015edcadbb47a6451b4a4b">gsd_append_name</a></div><div class="ttdeci">static int gsd_append_name(uint16_t *id, struct gsd_handle *handle, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l01264">gsd.c:1264</a></div></div>
<div class="ttc" id="agsd_8c_html_ab1d1a8a5f73b37df0c706f41df3bdd69"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#ab1d1a8a5f73b37df0c706f41df3bdd69">gsd_sizeof_type</a></div><div class="ttdeci">size_t gsd_sizeof_type(enum gsd_type type)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l02177">gsd.c:2177</a></div></div>
<div class="ttc" id="astructgsd__byte__buffer_html_a3630961b7d45df2885cdd887e4b83b60"><div class="ttname"><a href="../../d5/dc6/structgsd__byte__buffer.html#a3630961b7d45df2885cdd887e4b83b60">gsd_byte_buffer::size</a></div><div class="ttdeci">size_t size</div><div class="ttdoc">Number of bytes in the buffer.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00252">gsd.h:252</a></div></div>
<div class="ttc" id="astructgsd__handle_html_ac35aad0eef4a5844ecc4141041fa9243"><div class="ttname"><a href="../../d0/dc2/structgsd__handle.html#ac35aad0eef4a5844ecc4141041fa9243">gsd_handle::file_size</a></div><div class="ttdeci">int64_t file_size</div><div class="ttdoc">Size of the file (in bytes)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00311">gsd.h:311</a></div></div>
<div class="ttc" id="astructgsd__index__entry_html_a70e15b9094a3a22954bba035496d83bf"><div class="ttname"><a href="../../de/d4e/structgsd__index__entry.html#a70e15b9094a3a22954bba035496d83bf">gsd_index_entry::location</a></div><div class="ttdeci">int64_t location</div><div class="ttdoc">Location of the chunk in the file.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00175">gsd.h:175</a></div></div>
<div class="ttc" id="astructgsd__index__entry_html_aa7ed270380c0d8074232aad5bb32bfb4"><div class="ttname"><a href="../../de/d4e/structgsd__index__entry.html#aa7ed270380c0d8074232aad5bb32bfb4">gsd_index_entry::id</a></div><div class="ttdeci">uint16_t id</div><div class="ttdoc">Index of the chunk name in the name list.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00181">gsd.h:181</a></div></div>
<div class="ttc" id="astructgsd__index__entry_html_acbd3b797c1d179affc5fe279260b40f2"><div class="ttname"><a href="../../de/d4e/structgsd__index__entry.html#acbd3b797c1d179affc5fe279260b40f2">gsd_index_entry::M</a></div><div class="ttdeci">uint32_t M</div><div class="ttdoc">Number of columns in the chunk.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00178">gsd.h:178</a></div></div>
<div class="ttc" id="astructgsd__index__entry_html_ae913d46842b10fe8b5b74da3a7075726"><div class="ttname"><a href="../../de/d4e/structgsd__index__entry.html#ae913d46842b10fe8b5b74da3a7075726">gsd_index_entry::N</a></div><div class="ttdeci">uint64_t N</div><div class="ttdoc">Number of rows in the chunk.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00172">gsd.h:172</a></div></div>
<div class="ttc" id="astructgsd__index__entry_html_aebddbeda0dacc7125308440c46b9230a"><div class="ttname"><a href="../../de/d4e/structgsd__index__entry.html#aebddbeda0dacc7125308440c46b9230a">gsd_index_entry::type</a></div><div class="ttdeci">uint8_t type</div><div class="ttdoc">Data type of the chunk: one of gsd_type.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00184">gsd.h:184</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8f/gsd_8h_source.html#l00296">gsd_handle::buffer_index</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00308">gsd_handle::cur_frame</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00284">gsd_handle::fd</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00311">gsd_handle::file_size</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00187">gsd_index_entry::flags</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00169">gsd_index_entry::frame</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00293">gsd_handle::frame_index</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01264">gsd_append_name()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00491">gsd_byte_buffer_append()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00098">GSD_ERROR_FILE_MUST_BE_WRITABLE</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00078">GSD_ERROR_INVALID_ARGUMENT</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00075">GSD_ERROR_IO</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00093">GSD_ERROR_NAMELIST_FULL</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01081">gsd_flush_write_buffer()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00744">gsd_index_buffer_add()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00148">gsd_io_pwrite_retry()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00377">gsd_name_id_map_find()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00062">GSD_OPEN_READONLY</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02177">gsd_sizeof_type()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00072">GSD_SUCCESS</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00130">gsd_util_zero_memory()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00181">gsd_index_entry::id</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00175">gsd_index_entry::location</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00178">gsd_index_entry::M</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00172">gsd_index_entry::N</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00317">gsd_handle::name_map</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00314">gsd_handle::open_flags</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00255">gsd_byte_buffer::reserved</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00252">gsd_byte_buffer::size</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00184">gsd_index_entry::type</a>, and <a class="el" href="../../df/d8f/gsd_8h_source.html#l00299">gsd_handle::write_buffer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df3/GSDUtil_8cpp_source.html#l00473">GSDUtil::writeHeader()</a>, <a class="el" href="../../dc/df3/GSDUtil_8cpp_source.html#l00500">GSDUtil::writeParameters()</a>, and <a class="el" href="../../dc/df3/GSDUtil_8cpp_source.html#l00517">GSDUtil::writeParticles()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_ae22447904b925f284bf987fae448488a_cgraph.svg" width="775" height="383"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_ae22447904b925f284bf987fae448488a_icgraph.svg" width="548" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ac00249e8c3030557711beb337c8424dd" name="ac00249e8c3030557711beb337c8424dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac00249e8c3030557711beb337c8424dd">&#9670;&nbsp;</a></span>gsd_find_chunk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a> * gsd_find_chunk </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Find a chunk in the GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to an open GSD file </td></tr>
    <tr><td class="paramname">frame</td><td>Frame to look for chunk </td></tr>
    <tr><td class="paramname">name</td><td>Name of the chunk to find</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened by <a class="el" href="../../df/d8f/gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a> in read or readwrite mode.</dd></dl>
<p>The found entry contains size and type metadata and can be passed to <a class="el" href="../../df/d8f/gsd_8h.html#a2db2e3e8a72948bf413e7f09469ec8a6">gsd_read_chunk()</a> to read the data.</p>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the found chunk, or NULL if not found. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02039">2039</a> of file <a class="el" href="../../dc/dcb/gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span>    {</div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span>        {</div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>        }</div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>    <span class="keywordflow">if</span> (name == NULL)</div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>        {</div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>        }</div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>    <span class="keywordflow">if</span> (frame &gt;= <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a7479046d4d6e15c33cb24034ddd87562">gsd_get_nframes</a>(handle))</div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>        {</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>        }</div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a37ddf6d53fc8c4f3eff247508fcc814b">open_flags</a> == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a>)</div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>        {</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>        }</div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span> </div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>    <span class="comment">// find the id for the given name</span></div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span>    uint16_t match_id = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a31b9400272036b121040e9fc0a9e626b">gsd_name_id_map_find</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a17f63ed60cc1f9e456bf2d5ce301ecf8">name_map</a>, name);</div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span>    <span class="keywordflow">if</span> (match_id == UINT16_MAX)</div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>        {</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>        }</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span> </div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a0b9b163d35869b802a8937e958ea410c">header</a>.<a class="code hl_variable" href="../../d5/d56/structgsd__header.html#a5e2e07be01bcfa15c0834d6859878171">gsd_version</a> &gt;= <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version</a>(2, 0))</div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>        {</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>        <span class="comment">// gsd 2.0 files sort the entire index</span></div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>        <span class="comment">// binary search for the index entry</span></div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span>        ssize_t L = 0;</div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>        ssize_t R = handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a> - 1;</div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>        <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a> T;</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>        T.<a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#a1b6c67d9197aa4588964052c2919092e">frame</a> = <a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#a1b6c67d9197aa4588964052c2919092e">frame</a>;</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>        T.id = match_id;</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span> </div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>        <span class="keywordflow">while</span> (L &lt;= R)</div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>            {</div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>            <span class="keywordtype">size_t</span> m = (L + R) / 2;</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>            <span class="keywordtype">int</span> cmp = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a3ffe758eed9a5bae487f514a0a45e97d">gsd_cmp_index_entry</a>(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a8731f4ca2105be1c3efc1d0b5d6e8908">data</a> + m, &amp;T);</div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>            <span class="keywordflow">if</span> (cmp == -1)</div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>                {</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span>                L = m + 1;</div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>                }</div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmp == 1)</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>                {</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span>                R = m - 1;</div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>                }</div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>                {</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>                <span class="keywordflow">return</span> &amp;(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a8731f4ca2105be1c3efc1d0b5d6e8908">data</a>[m]);</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span>                }</div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span>            }</div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>        }</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>        {</div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>        <span class="comment">// gsd 1.0 file: use binary search to find the frame and linear search to find the entry</span></div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>        <span class="keywordtype">size_t</span> L = 0;</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>        <span class="keywordtype">size_t</span> R = handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a>;</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span> </div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>        <span class="comment">// progressively narrow the search window by halves</span></div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span>        <span class="keywordflow">do</span></div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>            {</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span>            <span class="keywordtype">size_t</span> m = (L + R) / 2;</div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span> </div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>            <span class="keywordflow">if</span> (frame &lt; handle-&gt;file_index.data[m].frame)</div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>                {</div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>                R = m;</div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>                }</div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span>                {</div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>                L = m;</div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span>                }</div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>            } <span class="keywordflow">while</span> ((R - L) &gt; 1);</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span> </div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>        <span class="comment">// this finds L = the rightmost index with the desired frame</span></div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>        int64_t cur_index;</div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span> </div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>        <span class="comment">// search all index entries with the matching frame</span></div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>        <span class="keywordflow">for</span> (cur_index = L; (cur_index &gt;= 0) &amp;&amp; (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a8731f4ca2105be1c3efc1d0b5d6e8908">data</a>[cur_index].<a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#a1b6c67d9197aa4588964052c2919092e">frame</a> == <a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#a1b6c67d9197aa4588964052c2919092e">frame</a>);</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>             cur_index--)</div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>            {</div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span>            <span class="comment">// if the frame matches, check the id</span></div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>            <span class="keywordflow">if</span> (match_id == handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a8731f4ca2105be1c3efc1d0b5d6e8908">data</a>[cur_index].<a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#aa7ed270380c0d8074232aad5bb32bfb4">id</a>)</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>                {</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>                <span class="keywordflow">return</span> &amp;(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a8731f4ca2105be1c3efc1d0b5d6e8908">data</a>[cur_index]);</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>                }</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>            }</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>        }</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span> </div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>    <span class="comment">// if we got here, we didn&#39;t find the specified chunk</span></div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>    }</div>
<div class="ttc" id="agsd_8c_html_a3ffe758eed9a5bae487f514a0a45e97d"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#a3ffe758eed9a5bae487f514a0a45e97d">gsd_cmp_index_entry</a></div><div class="ttdeci">static int gsd_cmp_index_entry(const struct gsd_index_entry *a, const struct gsd_index_entry *b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00774">gsd.c:774</a></div></div>
<div class="ttc" id="agsd_8c_html_a493ef951956c9f98adff89a80ddb3fa6"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version</a></div><div class="ttdeci">uint32_t gsd_make_version(unsigned int major, unsigned int minor)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l01563">gsd.c:1563</a></div></div>
<div class="ttc" id="agsd_8c_html_a7479046d4d6e15c33cb24034ddd87562"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#a7479046d4d6e15c33cb24034ddd87562">gsd_get_nframes</a></div><div class="ttdeci">uint64_t gsd_get_nframes(struct gsd_handle *handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l02029">gsd.c:2029</a></div></div>
<div class="ttc" id="astructgsd__header_html_a5e2e07be01bcfa15c0834d6859878171"><div class="ttname"><a href="../../d5/d56/structgsd__header.html#a5e2e07be01bcfa15c0834d6859878171">gsd_header::gsd_version</a></div><div class="ttdeci">uint32_t gsd_version</div><div class="ttdoc">GSD file format version from gsd_make_version().</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00148">gsd.h:148</a></div></div>
<div class="ttc" id="astructgsd__index__entry_html_a1b6c67d9197aa4588964052c2919092e"><div class="ttname"><a href="../../de/d4e/structgsd__index__entry.html#a1b6c67d9197aa4588964052c2919092e">gsd_index_entry::frame</a></div><div class="ttdeci">uint64_t frame</div><div class="ttdoc">Frame index of the chunk.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00169">gsd.h:169</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8f/gsd_8h_source.html#l00226">gsd_index_buffer::data</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00290">gsd_handle::file_index</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00169">gsd_index_entry::frame</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00774">gsd_cmp_index_entry()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02029">gsd_get_nframes()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01563">gsd_make_version()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00377">gsd_name_id_map_find()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00065">GSD_OPEN_APPEND</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00148">gsd_header::gsd_version</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00287">gsd_handle::header</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00181">gsd_index_entry::id</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00317">gsd_handle::name_map</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00314">gsd_handle::open_flags</a>, and <a class="el" href="../../df/d8f/gsd_8h_source.html#l00229">gsd_index_buffer::size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df3/GSDUtil_8cpp_source.html#l00107">GSDUtil::readChunk()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_ac00249e8c3030557711beb337c8424dd_cgraph.svg" width="490" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_ac00249e8c3030557711beb337c8424dd_icgraph.svg" width="742" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a2db2e3e8a72948bf413e7f09469ec8a6" name="a2db2e3e8a72948bf413e7f09469ec8a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2db2e3e8a72948bf413e7f09469ec8a6">&#9670;&nbsp;</a></span>gsd_read_chunk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_read_chunk </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a> *&#160;</td>
          <td class="paramname"><em>chunk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Read a chunk from the GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to an open GSD file. </td></tr>
    <tr><td class="paramname">data</td><td>Data buffer to read into. </td></tr>
    <tr><td class="paramname">chunk</td><td>Chunk to read.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened in read or readwrite mode. </dd>
<dd>
<em>chunk</em> was found by <a class="el" href="../../df/d8f/gsd_8h.html#ac00249e8c3030557711beb337c8424dd">gsd_find_chunk()</a>. </dd>
<dd>
<em>data</em> points to an allocated buffer with at least <code>N * M * gsd_sizeof_type(type)</code> bytes.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_INVALID_ARGUMENT: <em>handle</em> is NULL, <em>data</em> is NULL, or <em>chunk</em> is NULL.</li>
<li>GSD_ERROR_FILE_MUST_BE_READABLE: The file was opened in append mode.</li>
<li>GSD_ERROR_FILE_CORRUPT: The GSD file is corrupt. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02133">2133</a> of file <a class="el" href="../../dc/dcb/gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>    {</div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span>    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span>        {</div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>        }</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>    <span class="keywordflow">if</span> (data == NULL)</div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>        {</div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>        }</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>    <span class="keywordflow">if</span> (chunk == NULL)</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span>        {</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span>        }</div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a37ddf6d53fc8c4f3eff247508fcc814b">open_flags</a> == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a987636cdb7cdac06ae7173d291abec40">GSD_OPEN_APPEND</a>)</div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>        {</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07bac5de89b0da97d4df5b52f18ee0977b7c">GSD_ERROR_FILE_MUST_BE_READABLE</a>;</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>        }</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span> </div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>    <span class="keywordtype">size_t</span> size = chunk-&gt;<a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#ae913d46842b10fe8b5b74da3a7075726">N</a> * chunk-&gt;<a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#acbd3b797c1d179affc5fe279260b40f2">M</a> * <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ab1d1a8a5f73b37df0c706f41df3bdd69">gsd_sizeof_type</a>((<span class="keyword">enum</span> <a class="code hl_enumeration" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a>)chunk-&gt;<a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#aebddbeda0dacc7125308440c46b9230a">type</a>);</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>    <span class="keywordflow">if</span> (size == 0)</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>        {</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c">GSD_ERROR_FILE_CORRUPT</a>;</div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>        }</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>    <span class="keywordflow">if</span> (chunk-&gt;<a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#a70e15b9094a3a22954bba035496d83bf">location</a> == 0)</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>        {</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c">GSD_ERROR_FILE_CORRUPT</a>;</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>        }</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span> </div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>    <span class="comment">// validate that we don&#39;t read past the end of the file</span></div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>    <span class="keywordflow">if</span> ((chunk-&gt;<a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#a70e15b9094a3a22954bba035496d83bf">location</a> + size) &gt; (uint64_t)handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#ac35aad0eef4a5844ecc4141041fa9243">file_size</a>)</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>        {</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c">GSD_ERROR_FILE_CORRUPT</a>;</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>        }</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span> </div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>    ssize_t bytes_read = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ac1f41abbefbfe35337e7053d766c089b">gsd_io_pread_retry</a>(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>, data, size, chunk-&gt;<a class="code hl_variable" href="../../de/d4e/structgsd__index__entry.html#a70e15b9094a3a22954bba035496d83bf">location</a>);</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>    <span class="keywordflow">if</span> (bytes_read == -1 || bytes_read != size)</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span>        {</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>        }</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span> </div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>;</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>    }</div>
<div class="ttc" id="agsd_8c_html_ac1f41abbefbfe35337e7053d766c089b"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#ac1f41abbefbfe35337e7053d766c089b">gsd_io_pread_retry</a></div><div class="ttdeci">static ssize_t gsd_io_pread_retry(int fd, void *buf, size_t count, int64_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00190">gsd.c:190</a></div></div>
<div class="ttc" id="agsd_8h_html_a5813a2a637516567a2b42dc745ec1118"><div class="ttname"><a href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a></div><div class="ttdeci">gsd_type</div><div class="ttdoc">Identifiers for the gsd data chunk element types.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00022">gsd.h:23</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8f/gsd_8h_source.html#l00284">gsd_handle::fd</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00311">gsd_handle::file_size</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00087">GSD_ERROR_FILE_CORRUPT</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00103">GSD_ERROR_FILE_MUST_BE_READABLE</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00078">GSD_ERROR_INVALID_ARGUMENT</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00075">GSD_ERROR_IO</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00190">gsd_io_pread_retry()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00065">GSD_OPEN_APPEND</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02177">gsd_sizeof_type()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00072">GSD_SUCCESS</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00175">gsd_index_entry::location</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00178">gsd_index_entry::M</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00172">gsd_index_entry::N</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00314">gsd_handle::open_flags</a>, and <a class="el" href="../../df/d8f/gsd_8h_source.html#l00184">gsd_index_entry::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df3/GSDUtil_8cpp_source.html#l00107">GSDUtil::readChunk()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_a2db2e3e8a72948bf413e7f09469ec8a6_cgraph.svg" width="316" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_a2db2e3e8a72948bf413e7f09469ec8a6_icgraph.svg" width="746" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a7479046d4d6e15c33cb24034ddd87562" name="a7479046d4d6e15c33cb24034ddd87562"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7479046d4d6e15c33cb24034ddd87562">&#9670;&nbsp;</a></span>gsd_get_nframes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t gsd_get_nframes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Get the number of frames in the GSD file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to an open GSD file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened by <a class="el" href="../../df/d8f/gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The number of frames in the file, or 0 on error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02029">2029</a> of file <a class="el" href="../../dc/dcb/gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>    {</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>        {</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>        }</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>    <span class="keywordflow">return</span> handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a144dc0976a1fe2f895423495689daea5">cur_frame</a>;</div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8f/gsd_8h_source.html#l00308">gsd_handle::cur_frame</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02039">gsd_find_chunk()</a>, <a class="el" href="../../dc/df3/GSDUtil_8cpp_source.html#l00008">GSDUtil::GSDUtil()</a>, <a class="el" href="../../dc/df3/GSDUtil_8cpp_source.html#l00473">GSDUtil::writeHeader()</a>, and <a class="el" href="../../dc/df3/GSDUtil_8cpp_source.html#l00517">GSDUtil::writeParticles()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_a7479046d4d6e15c33cb24034ddd87562_icgraph.svg" width="958" height="342"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ab1d1a8a5f73b37df0c706f41df3bdd69" name="ab1d1a8a5f73b37df0c706f41df3bdd69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1d1a8a5f73b37df0c706f41df3bdd69">&#9670;&nbsp;</a></span>gsd_sizeof_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t gsd_sizeof_type </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118">gsd_type</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Query size of a GSD type ID.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type ID to query.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Size of the given type in bytes, or 0 for an unknown type ID. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02177">2177</a> of file <a class="el" href="../../dc/dcb/gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>    {</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>    <span class="keywordtype">size_t</span> val = 0;</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>    <span class="keywordflow">if</span> (type == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118addc1aa49964e9df18eca95586854564e">GSD_TYPE_UINT8</a>)</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>        {</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>        val = <span class="keyword">sizeof</span>(uint8_t);</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>        }</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a154cf53ac1f09d58516ee90c5e50ee9b">GSD_TYPE_UINT16</a>)</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span>        {</div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>        val = <span class="keyword">sizeof</span>(uint16_t);</div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>        }</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a49225daa33e0c1f26dda21d22a6ffb10">GSD_TYPE_UINT32</a>)</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>        {</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>        val = <span class="keyword">sizeof</span>(uint32_t);</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>        }</div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a43c1b41755ac12b8611b8478eab5f377">GSD_TYPE_UINT64</a>)</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>        {</div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>        val = <span class="keyword">sizeof</span>(uint64_t);</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>        }</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a5d13ce82d25b294b7300ea013396fb45">GSD_TYPE_INT8</a>)</div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>        {</div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>        val = <span class="keyword">sizeof</span>(int8_t);</div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>        }</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a6e5c1ccf3040cebc0dbcf562fd4291cb">GSD_TYPE_INT16</a>)</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>        {</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>        val = <span class="keyword">sizeof</span>(int16_t);</div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>        }</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a58aacbcfef4ae23382d8b857cfba815a">GSD_TYPE_INT32</a>)</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>        {</div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>        val = <span class="keyword">sizeof</span>(int32_t);</div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>        }</div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a25b4572782ed785491f8b5b666692212">GSD_TYPE_INT64</a>)</div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>        {</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>        val = <span class="keyword">sizeof</span>(int64_t);</div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>        }</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a8f2fc103d16a251246a102c5477fc0be">GSD_TYPE_FLOAT</a>)</div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>        {</div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>        val = <span class="keyword">sizeof</span>(float);</div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>        }</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a5813a2a637516567a2b42dc745ec1118a2bf7336e70f8d15921952b6ec177d238">GSD_TYPE_DOUBLE</a>)</div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>        {</div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>        val = <span class="keyword">sizeof</span>(double);</div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>        }</div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>        {</div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>        }</div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>    <span class="keywordflow">return</span> val;</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8f/gsd_8h_source.html#l00052">GSD_TYPE_DOUBLE</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00049">GSD_TYPE_FLOAT</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00040">GSD_TYPE_INT16</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00043">GSD_TYPE_INT32</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00046">GSD_TYPE_INT64</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00037">GSD_TYPE_INT8</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00028">GSD_TYPE_UINT16</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00031">GSD_TYPE_UINT32</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00034">GSD_TYPE_UINT64</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00025">GSD_TYPE_UINT8</a>, and <a class="el" href="../../df/d8f/gsd_8h_source.html#l00184">gsd_index_entry::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00417">gsd_is_entry_valid()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02133">gsd_read_chunk()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01916">gsd_write_chunk()</a>, and <a class="el" href="../../dc/df3/GSDUtil_8cpp_source.html#l00107">GSDUtil::readChunk()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_ab1d1a8a5f73b37df0c706f41df3bdd69_icgraph.svg" width="1175" height="544"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ad6f823bc40d0a28be983368adb42783e" name="ad6f823bc40d0a28be983368adb42783e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6f823bc40d0a28be983368adb42783e">&#9670;&nbsp;</a></span>gsd_find_matching_chunk_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * gsd_find_matching_chunk_name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>match</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Search for chunk names in a gsd file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to an open GSD file. </td></tr>
    <tr><td class="paramname">match</td><td>String to match. </td></tr>
    <tr><td class="paramname">prev</td><td>Search starting point.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened by <a class="el" href="../../df/d8f/gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a> </dd>
<dd>
<em>prev</em> was returned by a previous call to <a class="el" href="../../df/d8f/gsd_8h.html#ad6f823bc40d0a28be983368adb42783e">gsd_find_matching_chunk_name()</a></dd></dl>
<p>To find the first matching chunk name, pass NULL for prev. Pass in the previous found string to find the next after that, and so on. Chunk names match if they begin with the string in match*. Chunk names returned by this function may be present in at least one frame.</p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a string, NULL if no more matching chunks are found found, or NULL if prev* is invalid </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02228">2228</a> of file <a class="el" href="../../dc/dcb/gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>    {</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>        {</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span>        }</div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>    <span class="keywordflow">if</span> (match == NULL)</div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span>        {</div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span>        }</div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#aee7f806d610d9c4b8e0f045024d4e1f6">n_names</a> == 0)</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>        {</div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>        }</div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span> </div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span>    <span class="comment">// return nothing found if the name buffer is corrupt</span></div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a8ee2fd3c02e78149fe1b0ee269ce3965">data</a>[handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a1be9afcc4aead755f0c37f93088fab1c">reserved</a> - 1] != 0)</div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>        {</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>        }</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span> </div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>    <span class="comment">// determine search start index</span></div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* search_str;</div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>    <span class="keywordflow">if</span> (prev == NULL)</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span>        {</div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span>        search_str = handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a8ee2fd3c02e78149fe1b0ee269ce3965">data</a>;</div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>        }</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>        {</div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span>        <span class="comment">// return not found if prev is not in range</span></div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>        <span class="keywordflow">if</span> (prev &lt; handle-&gt;file_names.data.data)</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>            {</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>            }</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>        <span class="keywordflow">if</span> (prev &gt;= (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a8ee2fd3c02e78149fe1b0ee269ce3965">data</a> + handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a1be9afcc4aead755f0c37f93088fab1c">reserved</a>))</div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span>            {</div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>            }</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span> </div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span>        <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a0b9b163d35869b802a8937e958ea410c">header</a>.<a class="code hl_variable" href="../../d5/d56/structgsd__header.html#a5e2e07be01bcfa15c0834d6859878171">gsd_version</a> &lt; <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version</a>(2, 0))</div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>            {</div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span>            search_str = prev + <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a06fc87d81c62e9abb8790b6e5713c55bab1e8211d5344adb743238d82d369331d">GSD_NAME_SIZE</a>;</div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span>            }</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span>            {</div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span>            search_str = prev + strlen(prev) + 1;</div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>            }</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>        }</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span> </div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>    <span class="keywordtype">size_t</span> match_len = strlen(match);</div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span> </div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>    <span class="keywordflow">while</span> (search_str &lt; (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a8ee2fd3c02e78149fe1b0ee269ce3965">data</a> + handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a1be9afcc4aead755f0c37f93088fab1c">reserved</a>))</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span>        {</div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>        <span class="keywordflow">if</span> (search_str[0] != 0 &amp;&amp; 0 == strncmp(match, search_str, match_len))</div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>            {</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>            <span class="keywordflow">return</span> search_str;</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>            }</div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span> </div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>        <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a0b9b163d35869b802a8937e958ea410c">header</a>.<a class="code hl_variable" href="../../d5/d56/structgsd__header.html#a5e2e07be01bcfa15c0834d6859878171">gsd_version</a> &lt; <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version</a>(2, 0))</div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span>            {</div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span>            search_str += <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a06fc87d81c62e9abb8790b6e5713c55bab1e8211d5344adb743238d82d369331d">GSD_NAME_SIZE</a>;</div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>            }</div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>            {</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>            search_str += strlen(search_str) + 1;</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>            }</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>        }</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span> </div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>    <span class="comment">// searched past the end of the list, return NULL</span></div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>    }</div>
<div class="ttc" id="astructgsd__byte__buffer_html_a8ee2fd3c02e78149fe1b0ee269ce3965"><div class="ttname"><a href="../../d5/dc6/structgsd__byte__buffer.html#a8ee2fd3c02e78149fe1b0ee269ce3965">gsd_byte_buffer::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">Data.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00249">gsd.h:249</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8f/gsd_8h_source.html#l00249">gsd_byte_buffer::data</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00266">gsd_name_buffer::data</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00302">gsd_handle::file_names</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01563">gsd_make_version()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00111">GSD_NAME_SIZE</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00148">gsd_header::gsd_version</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00287">gsd_handle::header</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00269">gsd_name_buffer::n_names</a>, and <a class="el" href="../../df/d8f/gsd_8h_source.html#l00255">gsd_byte_buffer::reserved</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02300">gsd_upgrade()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_ad6f823bc40d0a28be983368adb42783e_cgraph.svg" width="410" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_ad6f823bc40d0a28be983368adb42783e_icgraph.svg" width="376" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="adb92d5142812c19bf4ee33cbde439131" name="adb92d5142812c19bf4ee33cbde439131"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb92d5142812c19bf4ee33cbde439131">&#9670;&nbsp;</a></span>gsd_upgrade()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gsd_upgrade </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/dc2/structgsd__handle.html">gsd_handle</a> *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Upgrade a GSD file to the latest specification.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to an open GSD file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><em>handle</em> was opened by <a class="el" href="../../df/d8f/gsd_8h.html#ae0add799755285c1108a7b97b2ed7e00">gsd_open()</a> with a writable mode. </dd>
<dd>
There are no pending data to write to the file in <a class="el" href="../../df/d8f/gsd_8h.html#aa03810337c5eebcbe716d8633eaefc5e">gsd_end_frame()</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>GSD_SUCCESS (0) on success. Negative value on failure:</li>
<li>GSD_ERROR_IO: IO error (check errno).</li>
<li>GSD_ERROR_INVALID_ARGUMENT: <em>handle</em> is NULL</li>
<li>GSD_ERROR_FILE_MUST_BE_WRITABLE: The file was opened in read-only mode. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02300">2300</a> of file <a class="el" href="../../dc/dcb/gsd_8c_source.html">gsd.c</a>.</p>
<div class="fragment"><div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>    {</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span>    <span class="keywordflow">if</span> (handle == NULL)</div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>        {</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>        }</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a37ddf6d53fc8c4f3eff247508fcc814b">open_flags</a> == <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a23a9970f53fda4e8902697670300ec98a22f5dee98250b8ead7d43cc1a347f205">GSD_OPEN_READONLY</a>)</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span>        {</div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>        }</div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a9086141add0c7be99bcfed3bfd6dadac">frame_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a> &gt; 0 || handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#acb6f5e1288792803b529b8549e6dc1ce">frame_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#aee7f806d610d9c4b8e0f045024d4e1f6">n_names</a> &gt; 0)</div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>        {</div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07baa3938911ea417ad6dfa297f203ededc2">GSD_ERROR_INVALID_ARGUMENT</a>;</div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span>        }</div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span> </div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>    <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a0b9b163d35869b802a8937e958ea410c">header</a>.<a class="code hl_variable" href="../../d5/d56/structgsd__header.html#a5e2e07be01bcfa15c0834d6859878171">gsd_version</a> &lt; <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version</a>(2, 0))</div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>        {</div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>        <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a> &gt; 0)</div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>            {</div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span>            <span class="comment">// make a copy of the file index</span></div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span>            <span class="keyword">struct </span><a class="code hl_struct" href="../../dc/d4d/structgsd__index__buffer.html">gsd_index_buffer</a> buf;</div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span>            <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9b05d58560daee2512f03bedf7b2926d">gsd_util_zero_memory</a>(&amp;buf, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../dc/d4d/structgsd__index__buffer.html">gsd_index_buffer</a>));</div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>            <span class="keywordtype">int</span> retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ae1948c93f77d642c4e3797fe7e5f2095">gsd_index_buffer_allocate</a>(&amp;buf, handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a>);</div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>            <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>                {</div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>                <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span>                }</div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>            memcpy(buf.data,</div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span>                   handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a8731f4ca2105be1c3efc1d0b5d6e8908">data</a>,</div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>                   <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a>) * handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a>);</div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>            buf.size = handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>.<a class="code hl_variable" href="../../dc/d4d/structgsd__index__buffer.html#a42b83ab7239cc24da11719b8d0354e37">size</a>;</div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span> </div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>            <span class="comment">// sort the copy and write it back out to the file</span></div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>            retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a6c20ccb47eed1a3ea9995a47a8eebdbd">gsd_index_buffer_sort</a>(&amp;buf);</div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>            <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>                {</div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>                <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;buf);</div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span>                <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>                }</div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span> </div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span>            ssize_t bytes_written = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a3fb7746d93a1c856ca7ef64fa3548cbe">gsd_io_pwrite_retry</a>(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>,</div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span>                                                        buf.data,</div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>                                                        <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a>) * buf.size,</div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>                                                        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a0b9b163d35869b802a8937e958ea410c">header</a>.<a class="code hl_variable" href="../../d5/d56/structgsd__header.html#a89d5af9234f456010e16116452064b78">index_location</a>);</div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span> </div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span>            <span class="keywordflow">if</span> (bytes_written == -1 || bytes_written != <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../de/d4e/structgsd__index__entry.html">gsd_index_entry</a>) * buf.size)</div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span>                {</div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span>                <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;buf);</div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span>                }</div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span> </div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span>            retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;buf);</div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span>            <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span>                {</div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span>                <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>                }</div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span> </div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span>            <span class="comment">// sync the updated index</span></div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span>            retval = fsync(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>);</div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>            <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span>                {</div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span>                }</div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>            }</div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span> </div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span>        <span class="keywordflow">if</span> (handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#aee7f806d610d9c4b8e0f045024d4e1f6">n_names</a> &gt; 0)</div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>            {</div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>            <span class="comment">// compact the name list without changing its size or position on the disk</span></div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span>            <span class="keyword">struct </span><a class="code hl_struct" href="../../d5/dc6/structgsd__byte__buffer.html">gsd_byte_buffer</a> new_name_buf;</div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span>            <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9b05d58560daee2512f03bedf7b2926d">gsd_util_zero_memory</a>(&amp;new_name_buf, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../d5/dc6/structgsd__byte__buffer.html">gsd_byte_buffer</a>));</div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>            <span class="keywordtype">int</span> retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#aeaf487909ab334303fa478cf4a126d6f">gsd_byte_buffer_allocate</a>(&amp;new_name_buf, handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a1be9afcc4aead755f0c37f93088fab1c">reserved</a>);</div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>            <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>                {</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>                <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>                }</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span> </div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>            <span class="keyword">const</span> <span class="keywordtype">char</span>* name = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ad6f823bc40d0a28be983368adb42783e">gsd_find_matching_chunk_name</a>(handle, <span class="stringliteral">&quot;&quot;</span>, NULL);</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>            <span class="keywordflow">while</span> (name != NULL)</div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>                {</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span>                retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a7a717f9dafe011e68434e181c76253af">gsd_byte_buffer_append</a>(&amp;new_name_buf, name, strlen(name) + 1);</div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>                <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>                    {</div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>                    <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;new_name_buf);</div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>                    <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span>                    }</div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>                name = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ad6f823bc40d0a28be983368adb42783e">gsd_find_matching_chunk_name</a>(handle, <span class="stringliteral">&quot;&quot;</span>, name);</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>                }</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span> </div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>            <span class="keywordflow">if</span> (new_name_buf.reserved != handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>.<a class="code hl_variable" href="../../d5/dc6/structgsd__byte__buffer.html#a1be9afcc4aead755f0c37f93088fab1c">reserved</a>)</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span>                {</div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span>                <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;new_name_buf);</div>
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba4236f6900d8a81a3a4ccafa2170ad27c">GSD_ERROR_FILE_CORRUPT</a>;</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span>                }</div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span> </div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>            <span class="comment">// write the new names out to disk</span></div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>            ssize_t bytes_written = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a3fb7746d93a1c856ca7ef64fa3548cbe">gsd_io_pwrite_retry</a>(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>,</div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span>                                                        new_name_buf.data,</div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>                                                        new_name_buf.reserved,</div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span>                                                        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a0b9b163d35869b802a8937e958ea410c">header</a>.<a class="code hl_variable" href="../../d5/d56/structgsd__header.html#a0d69a5886105e2e4cf210406c77f35f0">namelist_location</a>);</div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span> </div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>            <span class="keywordflow">if</span> (bytes_written == -1 || bytes_written != new_name_buf.reserved)</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>                {</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span>                <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;new_name_buf);</div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>                }</div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span> </div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span>            <span class="comment">// swap in the re-organized name buffer</span></div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>            retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a>);</div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>            <span class="keywordflow">if</span> (retval != <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>)</div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span>                {</div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span>                <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;new_name_buf);</div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>                <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>                }</div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span>            handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a80988eb386cc7af15aa4c6329e9f6217">file_names</a>.<a class="code hl_variable" href="../../d4/d77/structgsd__name__buffer.html#a78255aa2f730ed427a11debe378087c8">data</a> = new_name_buf;</div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span> </div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>            <span class="comment">// sync the updated name list</span></div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>            retval = fsync(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>);</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>            <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>                {</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span>                <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#ae50726c30c5bf629b6af1ef88020302f">gsd_byte_buffer_free</a>(&amp;new_name_buf);</div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>                }</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>            }</div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span> </div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span>        <span class="comment">// label the file as a v2.0 file</span></div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span>        handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a0b9b163d35869b802a8937e958ea410c">header</a>.<a class="code hl_variable" href="../../d5/d56/structgsd__header.html#a5e2e07be01bcfa15c0834d6859878171">gsd_version</a> = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a493ef951956c9f98adff89a80ddb3fa6">gsd_make_version</a>(<a class="code hl_enumvalue" href="../../dc/dcb/gsd_8c.html#abed82baf7f470b522273a3e37c24c600a9e41ab940950d400d353438f87a6f559">GSD_CURRENT_FILE_VERSION</a>, 0);</div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span> </div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>        <span class="comment">// write the new header out</span></div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>        ssize_t bytes_written</div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>            = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a3fb7746d93a1c856ca7ef64fa3548cbe">gsd_io_pwrite_retry</a>(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>, &amp;(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a0b9b163d35869b802a8937e958ea410c">header</a>), <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../d5/d56/structgsd__header.html">gsd_header</a>), 0);</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>        <span class="keywordflow">if</span> (bytes_written != <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../d5/d56/structgsd__header.html">gsd_header</a>))</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>            {</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>            }</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span> </div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>        <span class="comment">// sync the updated header</span></div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>        <span class="keywordtype">int</span> retval = fsync(handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a38e4bf4d587e525904d615ce49352592">fd</a>);</div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span>        <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>            {</div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba8400aca2d73ab6a20336bfdc2aa60b96">GSD_ERROR_IO</a>;</div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>            }</div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span> </div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>        <span class="comment">// remap the file index</span></div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span>        retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a9e12a38df69cf73fa771b005748cb3e5">gsd_index_buffer_free</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>);</div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span>        <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>            {</div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>            }</div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span> </div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>        retval = <a class="code hl_function" href="../../dc/dcb/gsd_8c.html#a6fe75caf6c4df550af2455a0c40bfbdf">gsd_index_buffer_map</a>(&amp;handle-&gt;<a class="code hl_variable" href="../../d0/dc2/structgsd__handle.html#a6b5215cbf0bdf8172f66166ef4fda7a8">file_index</a>, handle);</div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span>        <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span>            {</div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>            <span class="keywordflow">return</span> retval;</div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span>            }</div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>        }</div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span> </div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d8f/gsd_8h.html#a03a578779769ed7e288df22c6a75f07ba2320e5bf0746477ebd58b6e261eebde3">GSD_SUCCESS</a>;</div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span>    }</div>
<div class="ttc" id="agsd_8c_html_a6fe75caf6c4df550af2455a0c40bfbdf"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#a6fe75caf6c4df550af2455a0c40bfbdf">gsd_index_buffer_map</a></div><div class="ttdeci">static int gsd_index_buffer_map(struct gsd_index_buffer *buf, struct gsd_handle *handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00593">gsd.c:593</a></div></div>
<div class="ttc" id="agsd_8c_html_abed82baf7f470b522273a3e37c24c600a9e41ab940950d400d353438f87a6f559"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#abed82baf7f470b522273a3e37c24c600a9e41ab940950d400d353438f87a6f559">GSD_CURRENT_FILE_VERSION</a></div><div class="ttdeci">@ GSD_CURRENT_FILE_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00082">gsd.c:81</a></div></div>
<div class="ttc" id="agsd_8c_html_ad6f823bc40d0a28be983368adb42783e"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#ad6f823bc40d0a28be983368adb42783e">gsd_find_matching_chunk_name</a></div><div class="ttdeci">const char * gsd_find_matching_chunk_name(struct gsd_handle *handle, const char *match, const char *prev)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l02228">gsd.c:2228</a></div></div>
<div class="ttc" id="agsd_8c_html_ae1948c93f77d642c4e3797fe7e5f2095"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#ae1948c93f77d642c4e3797fe7e5f2095">gsd_index_buffer_allocate</a></div><div class="ttdeci">static int gsd_index_buffer_allocate(struct gsd_index_buffer *buf, size_t reserve)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00558">gsd.c:558</a></div></div>
<div class="ttc" id="agsd_8c_html_aeaf487909ab334303fa478cf4a126d6f"><div class="ttname"><a href="../../dc/dcb/gsd_8c.html#aeaf487909ab334303fa478cf4a126d6f">gsd_byte_buffer_allocate</a></div><div class="ttdeci">static int gsd_byte_buffer_allocate(struct gsd_byte_buffer *buf, size_t reserve)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcb/gsd_8c_source.html#l00463">gsd.c:463</a></div></div>
<div class="ttc" id="astructgsd__byte__buffer_html"><div class="ttname"><a href="../../d5/dc6/structgsd__byte__buffer.html">gsd_byte_buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00246">gsd.h:247</a></div></div>
<div class="ttc" id="astructgsd__header_html_a0d69a5886105e2e4cf210406c77f35f0"><div class="ttname"><a href="../../d5/d56/structgsd__header.html#a0d69a5886105e2e4cf210406c77f35f0">gsd_header::namelist_location</a></div><div class="ttdeci">uint64_t namelist_location</div><div class="ttdoc">Location of the name list in the file.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00139">gsd.h:139</a></div></div>
<div class="ttc" id="astructgsd__index__buffer_html"><div class="ttname"><a href="../../dc/d4d/structgsd__index__buffer.html">gsd_index_buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8f/gsd_8h_source.html#l00223">gsd.h:224</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8f/gsd_8h_source.html#l00226">gsd_index_buffer::data</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00249">gsd_byte_buffer::data</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00266">gsd_name_buffer::data</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00284">gsd_handle::fd</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00290">gsd_handle::file_index</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00302">gsd_handle::file_names</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00293">gsd_handle::frame_index</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00305">gsd_handle::frame_names</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00463">gsd_byte_buffer_allocate()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00491">gsd_byte_buffer_append()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00535">gsd_byte_buffer_free()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00081">GSD_CURRENT_FILE_VERSION</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00087">GSD_ERROR_FILE_CORRUPT</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00078">GSD_ERROR_INVALID_ARGUMENT</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00075">GSD_ERROR_IO</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l02228">gsd_find_matching_chunk_name()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00558">gsd_index_buffer_allocate()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00706">gsd_index_buffer_free()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00593">gsd_index_buffer_map()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00899">gsd_index_buffer_sort()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00148">gsd_io_pwrite_retry()</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l01563">gsd_make_version()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00062">GSD_OPEN_READONLY</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00072">GSD_SUCCESS</a>, <a class="el" href="../../dc/dcb/gsd_8c_source.html#l00130">gsd_util_zero_memory()</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00148">gsd_header::gsd_version</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00287">gsd_handle::header</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00133">gsd_header::index_location</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00269">gsd_name_buffer::n_names</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00139">gsd_header::namelist_location</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00314">gsd_handle::open_flags</a>, <a class="el" href="../../df/d8f/gsd_8h_source.html#l00255">gsd_byte_buffer::reserved</a>, and <a class="el" href="../../df/d8f/gsd_8h_source.html#l00229">gsd_index_buffer::size</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d8f/gsd_8h_adb92d5142812c19bf4ee33cbde439131_cgraph.svg" width="1002" height="658"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_5619d3ff040d238c5bcfe0ac1235817d.html">data_io</a></li><li class="navelem"><a class="el" href="../../df/d8f/gsd_8h.html">gsd.h</a></li>
    <li class="footer">Generated on Wed Oct 13 2021 10:16:22 for Bodied in Potential Flow by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
